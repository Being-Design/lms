!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CS_builder=e()}}(function(){var define,module,exports;return function e(t,n,o){function i(r,a){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return i(n||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,t,n){t.exports=Cornerstone.Mn.Behavior.extend({defaults:{message:cs.l18n("confirm-message"),subtext:!1,yep:cs.l18n("confirm-yep"),nope:cs.l18n("confirm-nope"),classes:[]},initialize:function(){this.listenTo(this.view,"confirm:warn:open",this.open),this.listenTo(cs.confirm,"accept",this.accept),this.listenTo(cs.confirm,"decline",this.decline)},events:function(){var e={};return e["click @ui."+(this.options.ui||"confirmWarn")]="open",e},open:function(){cs.confirm.trigger("open",_.extend(this.options,{view:this.view}))},accept:function(e){e==this.view.cid&&this.view.triggerMethod("confirm:warn:accept")},decline:function(e){e==this.view.cid&&this.view.triggerMethod("confirm:warn:decline")}})},{}],2:[function(e,t,n){t.exports=Cornerstone.Mn.Behavior.extend({initialize:function(){this.listenTo(this.view,"confirm:open",this.open)},events:function(){var e={};return e["click @ui."+(this.options.ui||"confirm")]="open",e},open:function(){cs.confirm.trigger("open",_.extend(this.options,{allowQuickConfirm:this.view.canQuickConfirm,accept:_.bind(this.accept,this),decline:_.bind(this.decline,this)}),this.view)},accept:function(){this.view.triggerMethod("confirm:accept")},decline:function(){this.view.triggerMethod("confirm:decline")}})},{}],3:[function(e,t,n){t.exports.Confirm=e("./confirm"),t.exports.ConfirmWarn=e("./confirm-warn")},{"./confirm":2,"./confirm-warn":1}],4:[function(e,t,n){var o=e("mousetrap");e("mousetrap/plugins/global-bind/mousetrap-global-bind"),Cornerstone.Vendor.Mousetrap=o,Cornerstone.Vendor.NProgress=e("nprogress"),Cornerstone.Vendor.dragula=e("../vendor/dragula"),e("perfect-scrollbar/jquery")(Backbone.$),e("../vendor/pointer-events-polyfill"),e("../vendor/rgbaster"),e("../vendor/jquery.growl"),e("../vendor/jquery.visible"),Cornerstone.Vendor.HTMLHint=e("htmlhint").HTMLHint,e("./utility/jquery.shadow-height"),e("./utility/string-replace-all"),cs.registerComponents(e("./components")),cs.updateConfig(csBuilderData),cs.updateRegistry({start:["mn-extensions","template-loader","view-loader","model-loader","keybindings","builder"],editor:["editor","post-handler","options","navigator","element-pane","template-manager","layout","layout-templates","inspector","settings","skeleton","element-manager","cheatsheet"],preview:["preview","render-queue"]})},{"../vendor/dragula":186,"../vendor/jquery.growl":187,"../vendor/jquery.visible":188,"../vendor/pointer-events-polyfill":189,"../vendor/rgbaster":190,"./components":26,"./utility/jquery.shadow-height":95,"./utility/string-replace-all":97,htmlhint:198,mousetrap:200,"mousetrap/plugins/global-bind/mousetrap-global-bind":201,nprogress:202,"perfect-scrollbar/jquery":203}],5:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data=Backbone.Radio.channel("cs:data"),cs.extra=Backbone.Radio.channel("cs:extra"),cs.observer=Backbone.Radio.channel("cs:observer"),cs.tooltips=Backbone.Radio.channel("cs:tooltips"),cs.search=Backbone.Radio.channel("cs:search"),cs.confirm=Backbone.Radio.channel("cs:confirm"),cs.message=Backbone.Radio.channel("cs:message"),this.cs.loadComponents(this.cs.config("isPreview")?"preview":"editor"),!1!==this.cs.config("classicMode")?Backbone.$("body").addClass("cs-classic"):this.cs.loadComponent("migration"),this.browserDetection(),document.onmousemove=function(e){cs.mouse=_.pick(e,"clientX","clientY","pageX","pageY")}},browserDetection:function(){var e=Cornerstone.Vendor.bowser;e.msie&&Backbone.$("body").addClass("cs-browser-msie cs-browser-msie-"+parseInt(e.version)),e.msedge&&Backbone.$("body").addClass("cs-browser-msedge cs-browser-msedge-"+parseInt(e.version))}})},{}],6:[function(e,t,n){t.exports=Cornerstone.Component.extend({bindings:{ark:"up up down down left right left right b a enter"},initialize:function(e){cs.keybind=Backbone.Radio.channel("cs:keybind"),this.listenTo(cs.events,"editor:init",this.setup),this.listenTo(cs.events,"preview:iframe:reloaded",this.setup),this.common()},setup:function(){this.listenTo(cs.global,"keybind",function(e){cs.keybind.trigger(e)}),this.bindings=_.extend(cs.config("keybindings"),this.bindings),_.each(this.bindings,function(e,t){var n=void 0,o=["keypress","keyup","keydown"];_.each(o,function(t){0==e.indexOf(t+":")&&(n=t,e=e.replace(t+":",""))}),Cornerstone.Vendor.Mousetrap.bindGlobal(e,function(){return cs.global.trigger("keybind",t),!1},n)})},common:function(){!1===this.cs.config("classicMode")||cs.Config.isPreview||this.listenTo(cs.keybind,"save",function(){cs.events.trigger("action:save")}),this.listenTo(cs.keybind,"delete-confirm",function(){cs.data.reply("delete:confirm:key",!0),cs.events.trigger("delete:confirm:key",!0)}),this.listenTo(cs.keybind,"delete-release",function(){cs.data.reply("delete:confirm:key",!1),cs.events.trigger("delete:confirm:key",!1)})}})},{}],7:[function(e,t,n){var o={toggleCustomJS:function(e){cs.navigate.trigger("pane","settings"),_.defer(function(){cs.navigate.trigger("toggle:code:editor","custom_js",e)})},toggleCustomCSS:function(e){cs.navigate.trigger("pane","settings"),_.defer(function(){cs.navigate.trigger("toggle:code:editor","custom_css",e)})},toggleIsCollapsed:function(e){Backbone.$("body").toggleClass("cs-editor-active",!e).toggleClass("cs-editor-inactive",e)},toggleSkeleton:function(e){cs.extra.trigger("toggle","skeleton:mode",e)},togglePreviewSizer:function(e){cs.extra.trigger("flyout","respond")},save:function(){cs.events.trigger("action:save")}};t.exports=Cornerstone.Component.extend({saveComplete:function(){this.messagePort.postMessage({action:"builder:shim",data:"save:complete",noreply:!0})},initialize:function(){this.listenTo(cs.keybind,"save",function(){this.messagePort.postMessage({action:"builder:shim",data:"propogate:save"})}),this.listenTo(cs.channel,"page:unsaved",function(){this.messagePort.postMessage({action:"builder:shim",data:"unsaved:data"})}),this.listenTo(cs.data,"migration:save:complete",this.saveComplete),window.cs.Config.previewData.timestamp?window.parent.postMessage("cs-preview-port-request::"+window.cs.Config.previewData.timestamp,"*"):console.warn("Classic builder has loaded with a corrupt state");var e=function(t){if(window.removeEventListener("message",e,!1),"cs-preview-port"===t.data){var n=t.ports[0];n.addEventListener("message",function(e){e.data.batch&&window._.map(e.data.batch,function(e){o[e.action]&&o[e.action](e.data)})}.bind(this),!1),n.start(),this.messagePort=n}}.bind(this);window.addEventListener("message",e,!0)}})},{}],8:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.Behaviors=e("../../behaviors"),Cornerstone.Mn.Behaviors.behaviorsLookup=_.bind(function(){return this.Behaviors},this)}})},{"../../behaviors":3}],9:[function(e,t,n){t.exports=Cornerstone.Component.extend({modelLookup:function(e){return this.Models[e]||this.Models.Base},collectionLookup:function(e){return this.Collections[e]||this.Collections.Base}})},{}],10:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.render=this,this.cache={},this.jobs={},this.timing={};var e=parseInt(cs.config("remoteRenderDelay"),10);this.run=_.debounce(_.bind(this.run,this),e);var t=setTimeout(_.bind(function(){this.trigger("primed")},this),2*e);this.once("add",function(){clearTimeout(t)}),this.on("hold",function(e){this.holdRender=!!e,!1===e&&this.run()})},onQueue:function(e){var t=e.definition.get("flags");this.trigger("add",e);var n=e.toJSON(),o={};if(t.child){var i=e.collection.getParent();i&&(o.parent=i.getDataForChild())}_.isEmpty(o)||(n._transient=o),this.queue(e.cid,t._v,n,function(t){this.cache[e.cid]=t,e.trigger("remote:render")})},preRender:function(e){var t="new:"+e;if(!this.cache[t]){var n=cs.elementLibrary.lookup(e),o=new Cornerstone.Models.Element({_type:e}),i=o.toJSON();delete o,this.queue(t,n.get("flags")._v,i,function(e){this.cache[t]=e})}},shadow:function(e,t){var n=this.cache[t];n&&(this.cache[e.cid]=_.isFunction(n)?n:_.clone(n))},getCache:function(e){var t=this.cache[e.cid];return t||(this.triggerMethod("queue",e),t=cs.template("loading")),t},queue:function(e,t,n,o){var i=Date.now();this.timing[e]=i,this.jobs[e]={data:n,provider:t,ts:i,callback:o},this.holdRender||this.run()},run:function(e){if(!e){var t=_.map(this.jobs,function(e,t){return{jobID:t,ts:e.ts,provider:e.provider,data:e.data||{}}});e={post_id:cs.post.get("post_id"),batch:t},(cs.raw_markup||top&&top.cs&&top.cs.raw_markup)&&(e.raw_markup=!0),this.registeredJobs=_.clone(this.jobs),this.jobs={}}cs.ajax("cs_render_element",e,{success:_.bind(function(e){var t=[];e.scripts&&(t=t.concat(_.map(e.scripts,function(e,t){return function(n){cs.preview.trigger("late:script:enqueue",t,e,n)}},this))),e.styles&&(t=t.concat(_.map(e.styles,function(e,t){return function(n){cs.preview.trigger("late:style:enqueue",t,e,n)}},this))),t=t.concat(_.map(e.jobs,function(e,t){return _.bind(function(n){if(e.ts<this.timing[t])return void n();0===e.markup.indexOf("%%TMPL%%")&&(e.markup=e.markup.replace("%%TMPL%%",""),e.markup=_.template(e.markup)),""===e.markup&&(e.markup=cs.template("empty-element")),this.registeredJobs[t]&&!this.jobs[t]&&(this.registeredJobs[t].callback.call(this,e.markup),delete this.registeredJobs[t]),n()},this)},this)),Cornerstone.serial(t).done(_.bind(function(e){this.trigger("primed"),e&&console.log(e)},this))},this)})},isRunning:function(){return _.keys(this.registeredJobs).length>0}})},{}],11:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.cs.loadTemplates(e(this.cs.Config.isPreview?"../../templates/elements":"../../templates")),this.listenTo(cs.events,"editor:init",this.populateIcons)},populateIcons:function(){cs.config("fontAwesome");var e={};_.each(_.pairs(cs.Config.fontAwesome),function(t){e[t[1]]=e[t[1]]||new Array,e[t[1]].push(t[0])}),this.icons=e,cs.data.reply("get:icons",this.icons)}})},{"../../templates":68,"../../templates/elements":59}],12:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.listenTo(cs.events,"editor:init",this.registerControlViews),this.listenTo(cs.events,"editor:init",this.registerSkeletonViews),this.listenTo(cs.events,"preview:init",this.registerElementViews)},registerElementViews:function(){window.Cornerstone.ElementViews={Base:e("../../views/preview/base")},_.extend(window.Cornerstone.ElementViews,e("../../views/preview")),cs.events.trigger("register:element:views")},registerSkeletonViews:function(){window.Cornerstone.SkeletonViews={Base:e("../../views/skeleton/base")},_.extend(window.Cornerstone.SkeletonViews,e("../../views/skeleton")),cs.events.trigger("register:skeleton:views")},registerControlViews:function(){window.Cornerstone.ControlViews={Base:e("../../views/controls/base")},_.extend(window.Cornerstone.ControlViews,e("../../views/controls")),cs.events.trigger("register:control:views")},elementLookup:function(e){return Cornerstone.ElementViews[e]||Cornerstone.ElementViews.Base},skeletonLookup:function(e){return Cornerstone.SkeletonViews[e]||Cornerstone.SkeletonViews.Base}})},{"../../views/controls":112,"../../views/controls/base":98,"../../views/preview":169,"../../views/preview/base":163,"../../views/skeleton":182,"../../views/skeleton/base":180}],13:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data.reply("cheatsheet:data",!1)},fetchSheets:function(){cs.ajax("cs_cheatsheet",{post_id:this.cs.post.get("post_id")},{success:function(e){e&&e.sheets&&_.isArray(e.sheets)&&cs.data.reply("cheatsheet:data",e.sheets)}})}})},{}],14:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(e){cs.global=Backbone.Radio.channel("cs:remote"),this.listenToOnce(cs.global,"preview:primed",this.primed),Backbone.$(window).on("load",_.bind(this.loadView,this));var t=Backbone.$("#preview-frame");t.on("load",_.bind(this.loadIFrame,this)),t.attr("src",t.attr("data-preview-url-src")),Backbone.$(window).resize(function(e){cs.events.trigger("editor:resize",e)}),cs.events.trigger("editor:init"),this.listenTo(cs.elements,"element:deleted",function(){cs.global.trigger("kill:observer")})},primed:function(t){this.clearPreloader(),e("../../utility/custom-media-manager"),cs.global.reply("editor:ready",!0),cs.global.trigger("editor:ready"),t&&cs.message.trigger("notice",cs.l18n("preview-late"))},loadView:function(){var t=e("../../views/main/editor");this.view=new t({el:"#editor"}),this.view.render()},loadIFrame:function(){var e=document.getElementById("preview-frame").contentWindow;if(e.cs&&e.cs.preview)return void e.cs.preview.trigger("iframe:ready",this,cs);console.log("Unable to initialize preview. iFrame failed to load."),_.defer(function(){cs.global.trigger("preview:primed"),cs.global.trigger("preview:failure",cs.l18n("preview-failure1"))})},clearPreloader:function(){$preloader=Backbone.$("#preloader").addClass("cs-preloader-fade").one("transitionend",function(){$preloader.remove()}),_.delay(function(){$preloader&&$preloader.remove()},2e3)}})},{"../../utility/custom-media-manager":93,"../../views/main/editor":155}],15:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.elementLibrary.registerContext("builder",this.elementFilter)},elementFilter:function(e){var t=e.get("flags");return!(0==e.get("active")||!_.contains(["builder","all"],t.context)||t.child)}})},{}],16:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.listenTo(cs.global,"element:delete",this.elDelete),this.listenTo(cs.global,"element:erase",this.erase),this.listenTo(cs.global,"element:duplicate",this.duplicate)},elDelete:function(e,t){function n(){_.defer(function(){cs.elements.trigger("delete",{model:e})})}function o(){_.defer(function(){cs.elements.trigger("add:item",e.get("_type"),e.collection.parent),cs.elements.trigger("delete",{model:e})})}var t=t||{};if(e.collection&&e.collection.parent&&e.collection.parent.atFloor())return void(t.noConfirm?o():cs.confirm.trigger("open",{message:cs.l18n("sortable-at-floor"),accept:o,allowQuickConfirm:!0}));if(t.noConfirm)n();else{var i=e.elements&&e.elements.length>0?"confirm-element-delete-contents":"confirm-element-delete";cs.confirm.trigger("open",{message:cs.l18n(i).replace("%s",e.definition.get("ui").title),accept:n,allowQuickConfirm:!0})}},erase:function(e,t){function n(){_.defer(function(){cs.elements.trigger("erase",{model:e})})}var t=t||{};t.noConfirm?n():cs.confirm.trigger("open",{message:cs.l18n("columns-erase-confirm"),accept:n,allowQuickConfirm:!0})},duplicate:function(e){cs.elements.trigger("duplicate",e)}})},{}],17:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.inspect={primary:new Cornerstone.InspectionSupervisor,secondary:new Cornerstone.InspectionSupervisor,expansion:new Cornerstone.InspectionSupervisor},this.resetInspector("primary"),this.listenTo(cs.events,"inspect:element",this.inspectElement),this.listenTo(cs.events,"expand:control",this.expansionSource),this.listenTo(cs.events,"expand:close",this.expansionClose),cs.navigate.reply("inspector:heading",cs.l18n("inspector-heading"))},inspectElement:function(e,t,n){var t=!!_.isUndefined(t)||t,n=n||!0,o=e,i=!1;if(e.definition.get("flags").child){var s=e.collection.getParent();o=!!s.definition&&s,i=e}o&&(this.updateInspector("primary",o),t&&cs.navigate.trigger("inspector:home"),n&&cs.global.trigger("autoscroll",o.cid)),cs.config("debug")&&(cs.nowInspecting=o),i&&(this.updateInspector("secondary",i),t&&cs.navigate.trigger("inspector:item"))},resetInspector:function(e){"primary"==e&&(this.resetInspector("secondary"),this.setHeading(!1)),this.updateInspector(e,new Cornerstone.Models.Proxyable,[],[])},expansionSource:function(e,t){this.updateInspector("expansion",e,_.filter(e.definition.getControls(),function(e){return t==e.name})),cs.events.trigger("expand:control:open")},expansionClose:function(){this.inspect.expansion.reset()},updateInspector:function(e,t,n,o){if(this.inspect[e]){var i;this.listenToOnce(t,"imminent:replacement",function(e){this.listenToOnce(e,"created",function(e){this.inspectElement(e,!1),clearTimeout(i)})}),this.listenToOnce(t,"destroy",function(t){i=setTimeout(_.bind(function(){this.resetInspector(e,null)},this),5)}),n||(n=t.definition.getControls()),o||(o=this.getMetaControls(e,t)),this.inspect[e].source({name:"meta",source:t,controls:o}),this.inspect[e].source({name:"element",source:t,controls:n}),this.inspect[e].rebuildControls(),"primary"==e&&t.definition&&this.setHeading(t.definition.get("ui").title)}},getMetaControls:function(e,t){var n=[],o=t.definition.get("ui"),i=t.definition.get("name"),s="_internal"==t.definition.get("flags").context;if("primary"==e&&("settings"!==cs.navigate.request("active:pane")&&n.push({type:"breadcrumbs"}),o.helpText&&n.push({type:"info-box",ui:{title:o.helpText.title||"",message:o.helpText.message||""}}),!s)){var r=_.contains(["section","row","column"],i)?i:"element";n.push({type:r+"-actions"})}return n},setHeading:function(e){e||(e=cs.l18n("inspector-heading")),cs.navigate.reply("inspector:heading",e),cs.navigate.trigger("refresh:inspector:heading")},getPrimaryControls:function(){return this.inspect.primary.controls},getSecondaryControls:function(){return this.inspect.secondary.controls},getExpansionControls:function(){return this.inspect.expansion.controls}})},{}],18:[function(e,t,n){t.exports=Cornerstone.Component.extend({nativeSections:["themeco-pages","themeco-blocks"],userSections:["user-pages","user-blocks"],initialize:function(){this.data=new Backbone.Model({title:cs.l18n("templates-title")}),this.controls=new Cornerstone.Collections.Control,this.listenTo(cs.templates,"ready",this.setup),this.listenTo(cs.templates,"add",this.setup),this.listenTo(cs.templates,"remove",this.setup)},setup:function(){var e=new Cornerstone.Collections.Control;e.add({name:"info",type:"info-box",ui:{title:cs.l18n("templates-info-title"),message:cs.l18n("templates-info-description")}}),e.add({name:"action",type:"template-actions",ui:{divider:!0}}),e.add({name:"title",type:"template-save-dialog",condition:{action:"save"}}),e.add({name:"uploader",type:"template-upload-dialog",condition:{action:"upload"}});var t,n,o,i;i=cs.component("template-manager"),o=[],_.each(_.union(this.nativeSections,this.userSections),function(s){var r=i.templates.section(s);t=r.map(_.bind(function(e){return _.contains(this.userSections,s)&&o.push(e),{value:e.get("slug"),label:e.get("title")}},this)),n=s.indexOf("page")>-1?"page":"block",e.add({name:s,type:"template-select",ui:{title:cs.l18n("templates-"+s),buttonText:cs.l18n("templates-insert"),divider:"block"==n,compact:"block"==n},options:{choices:t,templateType:n}})},this),t=o.map(function(e){var t="block"==e.get("type")?cs.l18n("templates-remove-block"):cs.l18n("templates-remove-page");return{value:e.get("slug"),label:t.replace("%s",e.get("title"))}}),e.add({name:"user-removals",type:"template-remove",ui:{title:cs.l18n("templates-remove-label"),buttonText:cs.l18n("templates-remove")},options:{choices:t,templateType:"remove"}}),e.invoke("setProxy",this.data);var s=this.controls;this.controls=e,cs.templates.trigger("control:reset"),s.reset()}})},{}],19:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.inspect={},this.inspect.primary=new Cornerstone.InspectionSupervisor([{name:"primary",source:new Cornerstone.Models.Proxyable,controls:[{name:"help_text",key:"disabled",type:"info-box",ui:{title:cs.l18n("layout-info-title"),message:cs.l18n("layout-info-description")}},{name:"layout_actions",key:"disabled",type:"layout-actions",options:{divider:!0}}]},{name:"section",source:cs.post.data,controls:[{name:"sections",key:"elements",type:"sortable-sections"}]}]),this.inspect.secondary=new Cornerstone.InspectionSupervisor([{name:"section",source:new Cornerstone.Models.Proxyable,controls:[]},{name:"row",source:new Cornerstone.Models.Proxyable,controls:[]}]),cs.navigate.reply("layout:active:row",!1),this.listenTo(cs.events,"inspect:layout",this.inspectorDetector),this.listenTo(cs.events,"add:section",function(){cs.elements.trigger("add:item","section",cs.post.data,cs.l18n("section-numeric"))}),this.listenTo(cs.global,"incoming:element",function(e){cs.post.data.elements.isEmpty()&&(cs.events.trigger("add:section"),this.listenToOnce(cs.global,"incoming:element:end",function(e){try{var t=cs.post.data.elements.first();t.elements.first().elements.first().elements.isEmpty()&&cs.elements.trigger("delete",{model:t})}catch(e){}}))})},inspectSection:function(e,t,n){e&&(t||(t=e.elements.first()),cs.global.trigger("autoscroll",t.cid),cs.navigate.reply("layout:active:row",t),this.inspect.secondary.source({name:"section",source:e,controls:e.definition.getControls("_layout")}),this.inspect.secondary.source({name:"row",source:t,controls:t.definition.getControls("_layout")}),this.inspect.secondary.rebuildControls(),_.isFunction(n)&&n())},inspectRow:function(e){e&&this.inspectSection(e.collection.parent,e)},inspectorDetector:function(e,t){function n(){t.navigate&&cs.navigate.trigger("layout:rows")}var t=t||{};e.get("_type");switch(e.get("_type")){case"section":this.inspectSection(e,null,n);break;case"row":this.inspectSection(e.collection.parent,e,n);break;case"column":this.inspectSection(e.collection.parent.collection.parent,e.collection.parent,n)}}})},{}],20:[function(e,t,n){t.exports=Cornerstone.Component.extend({panes:{layout:["rows","templates"],elements:[],inspector:["item"],settings:["item"]},initialize:function(){cs.navigate=Backbone.Radio.channel("cs:navigate"),cs.navigate.reply("auto:focus",!1),this.listenTo(cs.navigate,"pane",this.killObserver),this.listenTo(cs.navigate,"subpane:opened",this.killObserver),this.listenTo(cs.navigate,"pane:switch",function(){cs.extra.trigger("flyout","none")}),this.listenTo(cs.global,"auto:focus",_.debounce(function(e){cs.navigate.reply("auto:focus",e),cs.navigate.trigger("auto:focus",e)},10,!0)),this.listenTo(cs.global,"inspect",function(e){cs.events.trigger("inspect:element",e,!0),cs.confirm.trigger("abort")}),cs.extra.reply("get:collapse",!1),_.each(this.panes,function(e,t){this.listenTo(cs.navigate,t+":home",function(e){cs.extra.request("get:collapse")||cs.navigate.trigger("pane",t)}),_.each(e,function(e){this.listenTo(cs.navigate,t+":"+e,function(n){cs.extra.request("get:collapse")||cs.navigate.trigger("pane",t,e)})},this)},this),this.listenTo(cs.global,"nav:kylelements",function(){cs.navigate.trigger("elements:home")})},killObserver:function(){cs.global.trigger("kill:observer")}})},{}],21:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.options=Backbone.Radio.channel("cs:options"),cs.options.reply("help:text",cs.config("helpTextEnabled")),cs.options.reply("skeleton:mode","true"==localStorage.cs_options_skeleton_mode),this.listenTo(cs.extra,"toggle",function(e){var t=!cs.options.request(e);cs.options.reply(e,t),cs.options.trigger(e,t),localStorage.setItem("cs_options_"+e.replaceAll(":","_"),t?"true":"false")})}})},{}],22:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){this.cs.post=new Cornerstone.Post(cs.config("post")),this.listenTo(cs.events,"action:save",this.save),this.listenTo(cs.data,"save:success",this.saveSuccess),this.listenTo(cs.data,"save:error",this.saveError),this.listenTo(cs.global,"preview:primed",function(){this.listenTo(cs.channel,"page:unsaved",function(){cs.changed=!0})}),cs.data.reply("saved:last",null),window.onbeforeunload=function(e){if(cs.changed)return cs.l18n("home-onbeforeunload")}},saveSuccess:function(){if(cs.data.reply("saved:last",Cornerstone.Vendor.moment()),cs.channel.trigger("update:saved:last"),cs.changed=!1,!1===this.cs.config("classicMode"))return void cs.data.trigger("migration:save:complete");"settings"==cs.navigate.request("active:pane")&&(localStorage.CornerstonePane="settings",location.reload())},save:function(){cs.data.trigger("save"),Cornerstone.Vendor.NProgress.configure({showSpinner:!1,speed:850,minimum:.925}),Cornerstone.Vendor.NProgress.start(),cs.ajax("cs_endpoint_save",_.omit(this.cs.post.toJSON(),["_type"]),{success:function(e){cs.data.trigger("save:success",e)},error:function(e){cs.data.trigger("save:error",e)},always:function(e){Cornerstone.Vendor.NProgress.done()}})}})},{}],23:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data.reply("settings:ready",!1),this.listenTo(cs.data,"save",this.save),this.listenTo(cs.global,"editor:ready",this.fetchSections),this.listenTo(cs.global,"settings:pingback",this.setupListeners)},save:function(){1==cs.data.request("settings:ready")&&this.cs.post.set("settings",this.getSettingData())},fetchSections:function(){cs.ajax("cs_setting_sections",{post_id:this.cs.post.get("post_id")},{success:_.bind(this.loadSettings,this)})},loadSettings:function(e){this.inspect=new Cornerstone.InspectionSupervisor({name:"primary",source:new Cornerstone.Models.Proxyable,controls:[{name:"settings-actions",key:"disabled",type:"settings-actions"}]}),this.cs.settingSections=new Backbone.Collection(e.models),this.settings=new Cornerstone.Collections.Setting(e.data);var t=this.settings.findWhere({_section:"general"});t&&window.localStorage.getItem("cornerstone_auto_draft")===cs.post.data.get("post_id").toString()&&(localStorage.removeItem("cornerstone_auto_draft"),"draft"===t.get("post_status")&&t.set("post_status","publish")),this.settings.each(function(e){e.inspect=new Cornerstone.InspectionSupervisor({name:"primary",source:e,controls:e.section.get("controls")})}),cs.data.reply("settings:ready",!0),cs.global.trigger("settings:ready")},getSettings:function(){return this.settings},getSettingData:function(){return this.settings.invoke("updateChildData"),this.settings.toJSON()},getPrimaryControls:function(){return this.inspect.controls},setupListeners:function(){var e=this.settings.findWhere({_section:"general"});if(e?(window.localStorage.getItem("cornerstone_auto_draft")===cs.post.data.get("post_id").toString()&&(localStorage.removeItem("cornerstone_auto_draft"),"draft"===e.get("post_status")&&(console.log("MATCH"),e.set("post_status","publish"))),this.listenTo(e,"change:custom_css",function(e,t){cs.global.trigger("update:custom_css",t)}),cs.global.trigger("update:custom_css",e.get("custom_css"))):cs.warn("Unable to load Custom CSS because Cornerstone settings are corrupted."),e=this.settings.findWhere({_section:"responsive-text"})){var t=_.debounce(function(){cs.global.trigger("update:responsive_text",_.map(e.elements.toProxy().toJSON(),function(e){return _.pick(e,"selector","compression","min_size","max_size")}))},5);this.listenTo(e.elements,"model:change",t),this.listenTo(e.elements,"add",t),this.listenTo(e.elements,"remove",t),t()}else cs.warn("Unable to load Responsive Text because Cornerstone settings are corrupted. ")}})},{}],24:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.data.reply("skeleton:preview:height",Backbone.$(window).height()),this.enabled=cs.options.request("skeleton:mode")||!1,this.toggle(this.enabled,!0),!1!==this.cs.config("classicMode")&&this.listenTo(cs.keybind,"skeleton-mode",function(){cs.extra.trigger("toggle","skeleton:mode")}),this.listenTo(cs.options,"skeleton:mode",function(e){this.toggle(e||void 0)}),this.listenTo(cs.global,"preview:resize",function(e){var t=e.Body.height>1?Math.min(e.Window.height,e.Body.height):e.Window.height;cs.data.reply("skeleton:preview:height",t),cs.events.trigger("resize:skeleton")}),this.listenTo(cs.global,"preview:failure",function(e){this.toggle(!0),this.locked=!0,cs.message.trigger("error",e),Backbone.$("body").addClass("cs-recovery-mode")})},toggle:function(e,t){if(this.locked)return void cs.message.trigger("warning",cs.l18n("skeleton-locked"));_.isUndefined(e)&&(e=!this.enabled),this.enabled=e,cs.options.reply("skeleton:mode",this.enabled),t||cs.events.trigger("toggle:skeleton:mode",this.enabled),Backbone.$("body").toggleClass("cs-skeleton-active",this.enabled).toggleClass("cs-skeleton-inactive",!this.enabled)}})},{}],25:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.templates=Backbone.Radio.channel("cs:templates"),this.templates=new Cornerstone.Collections.Template,this.selections=new Backbone.Collection,this.listenToOnce(cs.global,"preview:primed",this.requestTemplates),this.on("templates:recieved",this.loadTemplates),this.listenTo(cs.templates,"import",this.importTemplate),this.listenTo(cs.templates,"save",this.save),this.listenTo(cs.templates,"delete",this.deletion),this.listenTo(cs.templates,"download",this.blockDownload)},requestTemplates:function(){cs.ajax("cs_templates",{},{success:_.bind(function(e,t){this.templates.add(e),cs.templates.trigger("ready",this)},this)})},importTemplate:function(e,t){function n(){cs.render.trigger("hold",!1),cs.message.trigger("error",cs.l18n("templates-error-import"))}if("string"==typeof e){var o=this.templates.findWhere({slug:e});e=o?o.get("elements"):[]}var i=cs.post.elements();if("page"==t&&i.reset(),!e||!e.length||0==e.length)return void cs.message.trigger("error",cs.l18n("templates-error-import"));"row"==e[0].elType&&(e=this.convertLegacy(_.clone(e))),cs.ajax("cs_template_migration",{elements:e},{success:_.bind(function(e){var o=[];cs.render.trigger("hold",!0);new Promise(function(t,n){function s(){o.length<=0&&t();var e=o.pop();_.isFunction(e)&&e()}o=_.map(e.elements,function(e){return function(){try{i.create(e)}catch(e){return console.warn("Template import error",e),void n()}_.defer(s)}},this),o.reverse(),s()}).then(function(){cs.render.trigger("hold",!1),cs.message.trigger("success","page"==t?cs.l18n("templates-page-updated"):cs.l18n("templates-block-inserted"))},n)},this),error:n,always:function(e){cs.log("template_migration",e)}})},convertLegacy:function(e){var t=["bg_type","bg_color","bg_image","bg_pattern_toggle","parallax","bg_video","bg_video_poster","margin","padding","border_style","border_color","visibility","class","style"];return _.map(e,function(e){var n=_.pick(e,t);return n.elType="section",n.elements=[],n.elements.push(_.omit(e,t)),n})},save:function(e,t){var n=_.extend(_.pick(cs.post.toJSON(),["elements"]),{type:e||"block",title:t||"Untitled"});cs.ajax("cs_save_template",n,{success:_.bind(function(e){this.templates.add(e.template),cs.templates.trigger("add",this),cs.message.trigger("success",cs.l18n("templates-saved"),4e3)},this),error:function(e){cs.message.trigger("error",cs.l18n("templates-error-save"),1e4)},always:function(e){cs.log("save_template",e)}})},deletion:function(e){var t=this.templates.findWhere({slug:e});t&&(t.destroy(),this.deleteRemote(e),cs.templates.trigger("remove",this))},deleteRemote:function(e){cs.ajax("cs_delete_template",{slug:e},{success:function(e){cs.message.trigger("success",cs.l18n("templates-delete-success"),4e3)},error:function(e){cs.message.trigger("error",cs.l18n("templates-error-delete"),1e4)},always:function(e){cs.log("delete_template",e)}})},blockDownload:function(e){try{new Blob}catch(e){return void cs.message.trigger("error",cs.l18n("browser-no-can"))}var e=e||"template",t={title:e,elements:cs.post.toJSON().elements},n=e.replace(/\s+/g,"_"),o=JSON.stringify(t,null,2);Cornerstone.Vendor.FileSaver.saveAs(new Blob([o],{type:"text/plain;charset=utf-8"}),n+".csl")}})},{}],26:[function(e,t,n){t.exports={builder:e("./common/builder"),
"mn-extensions":e("./common/mn-extensions"),"template-loader":e("./common/template-loader"),"view-loader":e("./common/view-loader"),"model-loader":e("./common/model-loader"),"render-queue":e("./common/render-queue"),keybindings:e("./common/keybindings"),migration:e("./common/migration"),editor:e("./editor/editor"),"element-pane":e("./editor/element-library"),navigator:e("./editor/navigator"),options:e("./editor/options"),layout:e("./editor/layout"),"layout-templates":e("./editor/layout-templates"),inspector:e("./editor/inspector"),"post-handler":e("./editor/post-handler"),settings:e("./editor/settings"),"template-manager":e("./editor/template-manager"),skeleton:e("./editor/skeleton"),"element-manager":e("./editor/element-manager"),cheatsheet:e("./editor/cheatsheet"),preview:e("./preview/preview")}},{"./common/builder":5,"./common/keybindings":6,"./common/migration":7,"./common/mn-extensions":8,"./common/model-loader":9,"./common/render-queue":10,"./common/template-loader":11,"./common/view-loader":12,"./editor/cheatsheet":13,"./editor/editor":14,"./editor/element-library":15,"./editor/element-manager":16,"./editor/inspector":17,"./editor/layout":19,"./editor/layout-templates":18,"./editor/navigator":20,"./editor/options":21,"./editor/post-handler":22,"./editor/settings":23,"./editor/skeleton":24,"./editor/template-manager":25,"./preview/preview":27}],27:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(e){Backbone.$(document).ready(function(){Backbone.$("#cs-content").empty()}),cs.preview=Backbone.Radio.channel("cs:preview"),cs.observer=Backbone.Radio.channel("cs:observer"),window.xData&&(window.xData.isPreview=!0),this.listenTo(cs.preview,"iframe:ready",this.reload),cs.events.trigger("preview:init"),cs.preview.reply("responsive:text",null),this.listenTo(cs.preview,"responsive:text",this.responsiveTextUpdate),this.listenTo(cs.preview,"late:script:enqueue",this.lateScriptEnqueue),this.listenTo(cs.preview,"late:style:enqueue",this.lateStyleEnqueue),cs.config("useLegacyAjax")&&(window.ajaxurl=cs.config("fallbackAjaxUrl"))},reload:function(t){cs.global=t.cs.global,t.cs.render=cs.render,this.cs.post=t.cs.post,0==Backbone.$("#cs-content").length&&(console.log("Unable to initialize preview. #cs-content missing."),this.noContentArea=!0);var n=e("../../views/main/preview.js");this.view=new n({el:"#cs-content",model:this.cs.post.data}),this.view.render(),this.sendWindowDimensions(),this.listenToOnce(cs.render,"primed",this.primed),_.delay(_.bind(function(){this.primed(!0),this.sendWindowDimensions()},this),9e3),this.listenTo(cs.global,"settings:ready",this.settingsPingback),this.listenTo(cs.global,"update:custom_css",this.customCSS),this.listenTo(cs.global,"update:responsive_text",this.responsiveText),cs.events.trigger("preview:iframe:reloaded"),cs.observer.reply("get:collapse",!1),this.listenTo(cs.global,"set:collapse",function(e){cs.observer.reply("get:collapse",e)}),Backbone.$(window).resize(function(){cs.events.trigger("preview:resize")}),this.listenTo(cs.events,"preview:resize",this.sendWindowDimensions)},sendWindowDimensions:function(){var e=Backbone.$("body"),t=Backbone.$(window);cs.global.trigger("preview:resize",{Window:{width:t.width(),height:t.height()},Body:{width:e.width(),height:e.height()}})},primed:function(e){this.isPrimed||cs.global.request("editor:ready")||(this.isPrimed=!0,cs.global.trigger("preview:primed",e||!1),this.noContentArea&&_.defer(function(){cs.global.trigger("preview:failure",cs.l18n("preview-failure2"))}))},settingsPingback:function(){cs.global.trigger("settings:pingback")},customCSS:function(e){Backbone.$("#cornerstone-custom-page-css").html(e)},responsiveText:function(e){cs.preview.reply("responsive:text",e),Backbone.$(window).trigger("fittextReset"),cs.preview.trigger("responsive:text")},responsiveTextUpdate:function(e){var e=e||Backbone,t=cs.preview.request("responsive:text");t&&_.each(t,function(t){var n=e.$(t.selector);_.defer(function(){n.css("font-size",""),n.csFitText(t.compression,{minFontSize:t.min_size,maxFontSize:t.max_size})})},this)},lateScriptEnqueue:function(e,t,n){if(0==Backbone.$('script[data-cs-handle="'+e+'"]').length&&t.src){var o=setTimeout(function(){cs.warn("Unable to load: "+e),n()},1e4);if(t.before){var i=Backbone.$('<script data-cs-script-extra="'+e+'">'+t.before+"<\/script>");Backbone.$("body").append(i)}var s=document.createElement("script");Backbone.$("body").append(s),s.onload=function(){clearTimeout(o),cs.log("Cornerstone | Runtime script loaded: "+e),_.defer(n)},s.src=t.src,Backbone.$(s).attr("data-cs-handle",e)}else n()},lateStyleEnqueue:function(e,t,n){if(0==Backbone.$('script[data-cs-handle="'+e+'"]').length&&t.tag){var o=setTimeout(function(){cs.warn("Unable to load: "+e),n()},1e4),i=Backbone.$(t.tag);i[0].onload=function(){clearTimeout(o),cs.log("Cornerstone | Runtime style loaded: "+e),_.defer(n)},Backbone.$("head").append(i),n()}else n()}})},{"../../views/main/preview.js":159}],28:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=" ",ui.title&&(__p+=' <div class="cs-control-header"> <label ',ui.tooltip&&(__p+=' data-tooltip-message="'+(null==(__t=ui.tooltip)?"":__t)+'" '),__p+=">"+(null==(__t=ui.title)?"":__t)+"</label> </div> "),__p+=' <input type="hidden" value=""> '+(null==(__t=render(controlTemplate,arguments[0]))?"":__t)+" ",ui.message&&(__p+=' <div class="cs-control-footer"> <span>'+(null==(__t=ui.message)?"":__t)+"</span> </div> "),__p+="";return __p}},{}],29:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <ul class="cs-choose cols-'+(null==(__t=options.columns)?"":__t)+'"> ',_.each(options.choices,function(e){__p+=' <li data-choice="'+(null==(__t=e.value)?"":__t)+'"> <i class="cs-icon" data-cs-icon="'+(null==(__t=e.icon)?"":__t)+'" ',e.tooltip&&(__p+=' title="'+(null==(__t=e.tooltip)?"":__t)+'" '),__p+="></i> ",e.label&&(__p+="<span>"+(null==(__t=e.label)?"":__t)+"</span>"),__p+=" </li> "}),__p+=" </ul>";return __p}},{}],30:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <input type="text" class="cs-color-input">';return __p}},{}],31:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <ul class="cs-column-layout"> <li class="prefab" data-layout="1/1"><span class="cs-1-1">1/1</span></li> <li class="prefab" data-layout="1/2 + 1/2"><span class="cs-1-2">1/2</span><span class="cs-1-2">1/2</span></li> <li class="prefab" data-layout="1/3 + 2/3"><span class="cs-1-3">1/3</span><span class="cs-2-3">2/3</span></li> <li class="prefab" data-layout="2/3 + 1/3"><span class="cs-2-3">2/3</span><span class="cs-1-3">1/3</span></li> <li class="prefab" data-layout="1/3 + 1/3 + 1/3"><span class="cs-1-3">1/3</span><span class="cs-1-3">1/3</span><span class="cs-1-3">1/3</span></li> <li class="prefab" data-layout="1/4 + 1/4 + 1/4 + 1/4"><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span><span class="cs-1-4">1/4</span></li> <li class="prefab" data-layout="1/5 + 1/5 + 1/5 + 1/5 + 1/5"><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span><span class="cs-1-5">1/5</span></li> <li class="custom"><span class="cs-1-1 custom"><span>'+(null==(__t=cs.l18n("columns-layout-custom"))?"":__t)+'</span></span></li> </ul> <input type="text" id="column-layout" value="'+(null==(__t=_column_layout)?"":__t)+'">';return __p}},{}],32:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <span class="handle"><span>'+(null==(__t=size)?"":__t)+"</span></span>";return __p}},{}],33:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <ul class="cs-column-order"></ul>';return __p}},{}],34:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+=""+(null==(__t=message)?"":__t);return __p}},{}],35:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<input type="text" class="cs-date-input"> <div class="cs-date-container"> <div class="cs-date-picker-entry"></div> <div class="cs-date-format"> <div class="cs-date-format-label">Select a Format<select tabindex="-1"></select></div> </div> </div>';return __p}},{}],36:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=" <span>"+(null==(__t=debug("Control <strong>"+controlType+"</strong> could not be found."))?"":__t)+"</span>";return __p}},{}],37:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <ul class="cs-dimensions"> <li><input data-edge="top" type="text"><span>'+(null==(__t=l18n("dimensions-top"))?"":__t)+'</span></li> <li><input data-edge="right" type="text"><span>'+(null==(__t=l18n("dimensions-right"))?"":__t)+'</span></li> <li><input data-edge="bottom" type="text"><span>'+(null==(__t=l18n("dimensions-bottom"))?"":__t)+'</span></li> <li><input data-edge="left" type="text"><span>'+(null==(__t=l18n("dimensions-left"))?"":__t)+'</span></li> <li> <button class="cs-link-dimensions"> <i class="cs-icon link" data-cs-icon="&#xf0c1;" title="'+(null==(__t=l18n("dimensions-unlink"))?"":__t)+'"></i> <i class="cs-icon unlink" data-cs-icon="&#xf127;" title="'+(null==(__t=l18n("dimensions-link"))?"":__t)+'"></i> </button> </li> </ul>';return __p}},{}],38:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <button class="cs-expand-control"> <span class="dashicons dashicons-editor-expand"></span>'+(null==(__t=cs.l18n("expand-control"))?"":__t)+" </button>";return __p}},{}],39:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<li title="'+(null==(__t=choice)?"":__t)+'" data-choice="'+(null==(__t=choice)?"":__t)+'" data-choices="'+(null==(__t=choices)?"":__t)+'"><i class="cs-icon" data-cs-icon="&#x'+(null==(__t=code)?"":__t)+'"></i></li>';return __p}},{}],40:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div class="cs-icons-outer',options.expandable&&print(" cs-expandable"),__p+='"> <div class="cs-search-section"> <div class="cs-search"> <input class="cs-search-input" type="search" placeholder="Search Icons"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("search"))?"":__t)+'"></i> </div> </div> <div class="cs-icons-inner"> <ul class="cs-choose single"></ul> </div> ',options.expandable&&print(render("controls/expand-control-button")),__p+=" </div>";return __p}},{}],41:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div class="cs-image"> <i class="cs-icon add" data-cs-icon="'+(null==(__t=fontIcon("plus-circle"))?"":__t)+'"></i> <i class="cs-icon remove" data-cs-icon="'+(null==(__t=fontIcon("times-circle"))?"":__t)+'"></i> </div>';return __p}},{}],42:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",ui.title&&(__p+="<h4>"+(null==(__t=ui.title)?"":__t)+"</h4>"),__p+=" ",ui.message&&(__p+="<p>"+(null==(__t=ui.message)?"":__t)+"</p>"),__p+="";return __p}},{}],43:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div> <input type="number" value=""> ',options.units&&(__p+=" <span>"+(null==(__t=options.units)?"":__t)+"</span> "),__p+=" </div>";return __p}},{}],44:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=" <select> ",_.each(options.choices,function(e){__p+=' <option value="'+(null==(__t=e.value)?"":__t)+'">'+(null==(__t=e.label)?"":__t)+"</option> "}),__p+=" </select>";return __p}},{}],45:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <span class="handle"><i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("plus-square"))?"":__t)+'"></i> <span>Add</span></span>';return __p}},{}],46:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <span class="handle">'+(null==(__t=title)?"":__t)+'</span> <div class="controls"> <button class="action1 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[0].icon))?"":__t)+'" title="'+(null==(__t=actions[0].tooltip)?"":__t)+'"></button> <button class="action2 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[1].icon))?"":__t)+'" title="'+(null==(__t=actions[1].tooltip)?"":__t)+'"></button> </div> <div class="controls extra"> <button class="action3 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[2].icon))?"":__t)+'" title="'+(null==(__t=actions[2].tooltip)?"":__t)+'"></button> </div>';return __p}},{}],47:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <span class="handle">'+(null==(__t=title)?"":__t)+'</span> <div class="controls"> <button class="action1 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[0].icon))?"":__t)+'" title="'+(null==(__t=actions[0].tooltip)?"":__t)+'"></button> <button class="action2 cs-icon" data-cs-icon="'+(null==(__t=fontIcon(actions[1].icon))?"":__t)+'" title="'+(null==(__t=actions[1].tooltip)?"":__t)+'"></button> </div>';return __p}},{}],48:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="cs-sortable"></ul> ',canAdd&&!empty&&(__p+=' <button class="cs-add-sortable-item"> <i class="cs-icon" data-cs-icon="&#xf0fe;"></i> <span>'+(null==(__t=cs.l18n("sortable-add"))?"":__t)+"</span> </button> "),__p+="";return __p}},{}],49:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=" <select> ",_.each(options.choices,function(e){__p+=' <option value="'+(null==(__t=e.value)?"":__t)+'">'+(null==(__t=e.label)?"":__t)+"</option> "}),__p+=' </select> <button class="'+(null==(__t=options.templateType)?"":__t)+'">'+(null==(__t=ui.buttonText)?"":__t)+"</button>";return __p}},{}],50:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=" <input "+(null==(__t=options.monospace?'style="font-family:monospace;"':"")?"":__t)+' type="text" value="">';return __p}},{}],51:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=" <textarea "+(null==(__t=options.monospace?'style="font-family:monospace;"':"")?"":__t)+"></textarea> ",options.expandable&&function(){__p+=__j.call(arguments,"")}(render("controls/expand-control-button")),__p+="";return __p}},{}],52:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-title ',options.showInspectButton&&(__p+="inspectable"),__p+='"> <input type="text" class="cs-title-input"> ',options.showInspectButton&&(__p+=' <button class="cs-title-button" title="'+(null==(__t=l18n("tooltip-inspect"))?"":__t)+'"><i class="cs-icon" data-cs-icon="&#xf002;"></i></button> '),__p+=" </div>";return __p}},{}],53:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <ul class="cs-toggle"> <li class="on"><span>'+(null==(__t=l18n("controls-on"))?"":__t)+'</span></li> <li class="off"><span>'+(null==(__t=l18n("controls-off"))?"":__t)+"</span></li> </ul>";return __p}},{}],54:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div class="cs-wp-select"></div>';return __p}},{}],55:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-dragging-placeholder"> <svg class="cs-custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-290 382 30 30" enable-background="new -290 382 30 30" xml:space="preserve"> <g> <path d="M-275,395.9l12-6.4l-11.5-6c-0.3-0.2-0.6-0.2-0.9,0l-11.6,6.1L-275,395.9z"/> <path d="M-274,397.5v12.7l11.4-6.1c0.3-0.2,0.5-0.5,0.5-0.9v-12.1L-274,397.5z"/> <path d="M-276,397.5l-11.9-6.3v12.1c0,0.4,0.2,0.7,0.5,0.9l11.4,6V397.5z"/> </g> </svg> </div>';return __p}},{}],56:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-empty-column"> <svg class="cs-custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-290 382 30 30" enable-background="new -290 382 30 30" xml:space="preserve"> <g> <path d="M-275,395.9l12-6.4l-11.5-6c-0.3-0.2-0.6-0.2-0.9,0l-11.6,6.1L-275,395.9z"/> <path d="M-274,397.5v12.7l11.4-6.1c0.3-0.2,0.5-0.5,0.5-0.9v-12.1L-274,397.5z"/> <path d="M-276,397.5l-11.9-6.3v12.1c0,0.4,0.2,0.7,0.5,0.9l11.4,6V397.5z"/> </g> </svg> </div>';return __p}},{}],57:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-empty-element"> <div class="cs-empty-element-icon"> '+(null==(__t=cs.elementIcon(_type))?"":__t)+" </div> </div>";return __p}},{}],58:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=" "+(null==(__t=cs.icon("interface/logo-flat-muted"))?"":__t)+' <h2>Welcome to Cornerstone</h2> <p>Get started by adding sections to the <strong class="cs-empty-rows-layout">'+(null==(__t=cs.icon("interface/nav-layout-solid"))?"":__t)+'Layout</strong> pane in the sidebar or begin with a template. Click on your sections to add rows and alter column structure, then go to the <strong class="cs-empty-rows-elements">'+(null==(__t=cs.icon("interface/nav-elements-solid"))?"":__t)+'Elements</strong> pane and begin dragging in your items. Clicking on any element in the preview area takes you to the <strong class="cs-empty-rows-inspector">'+(null==(__t=cs.icon("interface/nav-inspector-solid"))?"":__t)+"Inspector</strong> pane to alter its appearance. Happy building!</p>";return __p}},{}],59:[function(e,t,n){t.exports={"dragging-placeholder":e("./dragging-placeholder"),"empty-column":e("./empty-column"),"empty-element":e("./empty-element"),"empty-rows":e("./empty-rows"),loading:e("./loading"),observer:e("./observer")}},{"./dragging-placeholder":55,"./empty-column":56,"./empty-element":57,"./empty-rows":58,"./loading":60,"./observer":61}],60:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div class="cs-empty-element"> <div class="cs-empty-element-icon"> <i class="cs-icon cs-icon-loading" data-cs-icon="&#xf110;"></i> </div> </div>';return __p}},{}],61:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-observer-tooltip top left">'+(null==(__t=tooltip)?"":__t)+"</div>";return __p}},{}],62:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div class="'+(null==(__t=contentClass)?"":__t)+'"> ',message&&(__p+='<p class="message">'+(null==(__t=message)?"":__t)+"</p>"),__p+=" ",yep&&(__p+='<button class="action yep sad">'+(null==(__t=yep)?"":__t)+"</button>"),__p+=" ",nope&&(__p+='<button class="action nope">'+(null==(__t=nope)?"":__t)+"</button>"),__p+=" ",subtext&&(__p+='<p class="subtext">'+(null==(__t=subtext)?"":__t)+"</p>"),__p+=" </div>";return __p}},{}],63:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-expanded-content-inner"></div> <button class="cs-expanded-close">&times;</button>';return __p}},{}],64:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <p class="saved-last '+(null==(__t=savedLastClass)?"":__t)+'">'+(null==(__t=savedLastMessage)?"":__t)+'</p> <ul class="cs-controls"> <li class="cs-control cs-control-actions"> <ul class="cs-actions"> <li class="action new"> <a href="'+(null==(__t=dashboardEditUrl)?"":__t)+'"> <i class="cs-icon" data-cs-icon="&#xf19a;"></i> <span>'+(null==(__t=l18n("home-dashboard"))?"":__t)+'</span> </a> </li> <li class="action view-site"> <a href="'+(null==(__t=frontEndUrl)?"":__t)+'"> <i class="cs-icon" data-cs-icon="&#xf14c;"></i> <span>'+(null==(__t=l18n("home-view-site"))?"":__t)+"</span> </a> </li> </ul> </li> </ul>";return __p}},{}],65:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+="";return __p}},{}],66:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div class="cs-respond-buttons"> <button class="cs-icon xl" data-respond="xl" data-cs-icon="'+(null==(__t=cs.fontIcon("desktop"))?"":__t)+'"></button> <button class="cs-icon lg" data-respond="lg" data-cs-icon="'+(null==(__t=cs.fontIcon("laptop"))?"":__t)+'"></button> <button class="cs-icon md" data-respond="md" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></button> <button class="cs-icon sm" data-respond="sm" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></button> <button class="cs-icon xs" data-respond="xs" data-cs-icon="'+(null==(__t=cs.fontIcon("mobile"))?"":__t)+'"></button> </div> <div class="cs-respond-labels"> <div class="xl" data-respond="xl"><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("desktop"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-xl-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-xl-desc"))?"":__t)+'</span></div> <div class="lg" data-respond="lg"><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("laptop"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-lg-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-lg-desc"))?"":__t)+'</span></div> <div class="md" data-respond="md"><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-md-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-md-desc"))?"":__t)+'</span></div> <div class="sm" data-respond="sm"><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("tablet"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-sm-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-sm-desc"))?"":__t)+'</span></div> <div class="xs" data-respond="xs"><i class="cs-icon" data-cs-icon="'+(null==(__t=cs.fontIcon("mobile"))?"":__t)+'"></i><span class="label">'+(null==(__t=l18n("respond-xs-title"))?"":__t)+'</span><span class="size">'+(null==(__t=l18n("respond-xs-desc"))?"":__t)+"</span></div> </div>";return __p}},{}],67:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <p class="message">'+(null==(__t=message)?"":__t)+"</p>";return __p}},{}],68:[function(e,t,n){t.exports={"controls/base":e("./controls/base"),"controls/choose":e("./controls/choose"),"controls/color":e("./controls/color"),"controls/column-layout":e("./controls/column-layout"),"controls/column-order-item":e("./controls/column-order-item"),"controls/column-order":e("./controls/column-order"),"controls/custom-markup":e("./controls/custom-markup"),"controls/date":e("./controls/date"),"controls/default":e("./controls/default"),"controls/dimensions":e("./controls/dimensions"),"controls/expand-control-button":e("./controls/expand-control-button"),"controls/icon-choose":e("./controls/icon-choose"),"controls/icon-choose-item":e("./controls/icon-choose-item"),"controls/image":e("./controls/image"),"controls/info-box":e("./controls/info-box"),"controls/number":e("./controls/number"),"controls/select":e("./controls/select"),"controls/sortable-empty":e("./controls/sortable-empty"),"controls/sortable-item-wide":e("./controls/sortable-item-wide"),"controls/sortable-item":e("./controls/sortable-item"),"controls/sortable":e("./controls/sortable"),"controls/template-select":e("./controls/template-select"),"controls/textarea":e("./controls/textarea"),"controls/text":e("./controls/text"),"controls/title":e("./controls/title"),"controls/toggle":e("./controls/toggle"),"controls/wpselect":e("./controls/wpselect"),"extra/confirm":e("./extra/confirm"),"extra/expanded-control":e("./extra/expanded-control"),"extra/home":e("./extra/home"),"extra/options":e("./extra/options"),"extra/respond":e("./extra/respond"),"extra/save-complete":e("./extra/save-complete"),"inspector/blank-state":e("./inspector/blank-state"),"inspector/breadcrumbs":e("./inspector/breadcrumbs"),"inspector/column-actions":e("./inspector/column-actions"),"inspector/element-actions":e("./inspector/element-actions"),"inspector/row-actions":e("./inspector/row-actions"),"layout/sub-row/layout-sub-row":e("./layout/sub-row/layout-sub-row"),"layout/sub-templates/layout-sub-template":e("./layout/sub-templates/layout-sub-template"),"layout/sub-templates/save-dialog":e("./layout/sub-templates/save-dialog"),"layout/sub-templates/template-actions":e("./layout/sub-templates/template-actions"),"layout/sub-templates/upload-dialog":e("./layout/sub-templates/upload-dialog"),"layout/actions":e("./layout/actions"),"library/element-stub":e("./library/element-stub"),"library/search":e("./library/search"),"main/editor":e("./main/editor"),"main/extra":e("./main/extra"),"main/footer":e("./main/footer"),"main/header":e("./main/header"),"main/pane":e("./main/pane"),"main/skeleton-item":e("./main/skeleton-item"),"main/skeleton":e("./main/skeleton"),"settings/actions":e("./settings/actions"),"settings/content":e("./settings/content"),"settings/section":e("./settings/section"),"utility/htmlhint":e("./utility/htmlhint")}},{"./controls/base":28,"./controls/choose":29,"./controls/color":30,"./controls/column-layout":31,"./controls/column-order":33,"./controls/column-order-item":32,"./controls/custom-markup":34,"./controls/date":35,"./controls/default":36,"./controls/dimensions":37,"./controls/expand-control-button":38,"./controls/icon-choose":40,"./controls/icon-choose-item":39,"./controls/image":41,"./controls/info-box":42,"./controls/number":43,"./controls/select":44,"./controls/sortable":48,"./controls/sortable-empty":45,"./controls/sortable-item":47,"./controls/sortable-item-wide":46,"./controls/template-select":49,"./controls/text":50,"./controls/textarea":51,"./controls/title":52,"./controls/toggle":53,"./controls/wpselect":54,"./extra/confirm":62,"./extra/expanded-control":63,"./extra/home":64,"./extra/options":65,"./extra/respond":66,"./extra/save-complete":67,"./inspector/blank-state":69,"./inspector/breadcrumbs":70,"./inspector/column-actions":71,"./inspector/element-actions":72,"./inspector/row-actions":73,"./layout/actions":74,"./layout/sub-row/layout-sub-row":75,"./layout/sub-templates/layout-sub-template":76,"./layout/sub-templates/save-dialog":77,"./layout/sub-templates/template-actions":78,"./layout/sub-templates/upload-dialog":79,"./library/element-stub":80,"./library/search":81,"./main/editor":82,"./main/extra":83,"./main/footer":84,"./main/header":85,"./main/pane":86,"./main/skeleton":88,"./main/skeleton-item":87,"./settings/actions":89,"./settings/content":90,"./settings/section":91,"./utility/htmlhint":92}],69:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=" "+(null==(__t=cs.icon("interface/logo-flat-inspector"))?"":__t)+' <span class="title">'+(null==(__t=l18n("inspector-blank-pane-title"))?"":__t)+"</span> <span>"+(null==(__t=l18n("inspector-blank-pane-message"))?"":__t)+"</span>";return __p}},{}],70:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",count>0&&(__p+='<button data-level="0" ',1==items.length&&print('class="disabled"'),__p+=">",print(1==items.length?_.first(items).title:_.first(items).label),__p+="</button>",_.each(_.rest(items),function(e,t){__p+='<span><i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon(rtl?"angle-left":"angle-right"))?"":__t)+'"></i></span><button ',count==t+2&&print('class="disabled"'),__p+=' data-level="'+(null==(__t=t+1)?"":__t)+'">'+(null==(__t=e.label)?"":__t)+"</button>"}),__p+=""),__p+="";return __p}},{}],71:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="cs-actions"> <li class="action manage-layout"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("bars"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("inspector-manage-layout"))?"":__t)+'</span> </li> <li class="action erase"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("eraser"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("inspector-erase"))?"":__t)+'</span> <span class="quick-confirm">'+(null==(__t=l18n("inspector-really-erase"))?"":__t)+"</span> </li> </ul>";return __p}},{}],72:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")}
;with(obj||{})__p+='<ul class="cs-actions"> <li class="action duplicate"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("copy"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("inspector-duplicate"))?"":__t)+'</span> </li> <li class="action delete"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("trash-o"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("inspector-delete"))?"":__t)+'</span> <span class="quick-confirm">'+(null==(__t=l18n("inspector-really-delete"))?"":__t)+"</span> </li> </ul>";return __p}},{}],73:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="cs-actions"> <li class="action manage-layout"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("bars"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("inspector-manage-layout"))?"":__t)+'</span> </li> <li class="action delete"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("trash-o"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("inspector-delete"))?"":__t)+'</span> <span class="quick-confirm">'+(null==(__t=l18n("inspector-really-delete"))?"":__t)+"</span> </li> </ul>";return __p}},{}],74:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="cs-actions"> <li class="action new"> <i class="cs-icon" data-cs-icon="&#xf0fe;"></i> <span>'+(null==(__t=l18n("layout-add-section"))?"":__t)+'</span> </li> <li class="action templates"> <i class="cs-icon" data-cs-icon="&#xf15b;"></i> <span>'+(null==(__t=l18n("layout-templates"))?"":__t)+"</span> </li> </ul>";return __p}},{}],75:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div id="layout-row-controls" class="cs-pane-section controls"></div> <div id="layout-column-controls" class="cs-pane-section controls"></div>';return __p}},{}],76:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div id="layout-template-controls" class="cs-pane-section controls"></div> <div id="layout-template-sections" class="cs-pane-section sections"></div>';return __p}},{}],77:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-title"> <input type="text" class="cs-title-input" value="'+(null==(__t=title)?"":__t)+'"> </div> <ul class="cs-actions"> <li class="action download"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("download"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("templates-download"))?"":__t)+'</span> </li> <li class="action save"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("book"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("templates-save-library"))?"":__t)+'</span> </li> </ul> <button class="close">&times;</button>';return __p}},{}],78:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="cs-actions"> <li class="action save"> <i class="cs-icon" data-cs-icon="&#xf0c7;"></i> <span>'+(null==(__t=l18n("templates-save"))?"":__t)+'</span> </li> <li class="action upload"> <i class="cs-icon" data-cs-icon="&#xf093;"></i> <span>'+(null==(__t=l18n("templates-upload"))?"":__t)+"</span> </li> </ul>";return __p}},{}],79:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<input id="template-upload" type="file" name="blockUpload"> <button class="process">'+(null==(__t=l18n("templates-upload-button"))?"":__t)+'</button> <button class="close">&times;</button>';return __p}},{}],80:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <span class="icon">'+(null==(__t=icon)?"":__t)+'</span> <span class="name"><span>'+(null==(__t=ui.title)?"":__t)+"</span></span>";return __p}},{}],81:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-search-section"> <div class="cs-search"> <input type="search" placeholder="'+(null==(__t=l18n("elements-search"))?"":__t)+'" id="elements-search"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("search"))?"":__t)+'"></i> </div> </div>';return __p}},{}],82:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <header id="header" class="cs-editor-header"></header> <section id="pane"></section> <div id="skeleton" class="cs-editor-skeleton"></div> <footer id="footer" class="cs-editor-footer"></footer> <div id="expand" class="cs-editor-expansion"></div>';return __p}},{}],83:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-editor-extra"> <div class="cs-tooltip-outer"><div class="cs-tooltip-inner"></div></div> </div>';return __p}},{}],84:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <nav> <button class="collapse cs-icon" data-cs-icon="'+(null==(__t=fontIcon("play-circle"))?"":__t)+'"></button> <button class="home cs-icon has-flyout" data-cs-icon="'+(null==(__t=fontIcon("home"))?"":__t)+'"></button> <button class="skeleton-mode cs-icon" data-toggle="skeleton:mode" data-cs-icon="'+(null==(__t=fontIcon("object-group"))?"":__t)+'"></button> <button class="respond cs-icon has-flyout" data-cs-icon="'+(null==(__t=fontIcon("mobile"))?"":__t)+'"></button> <button class="save">'+(null==(__t=l18n("footer-button-save"))?"":__t)+'</button> </nav> <div class="cs-editor-extra"> <div class="cs-tooltip-outer"><div class="cs-tooltip-inner"></div></div> </div>';return __p}},{}],85:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <button class="layout">'+(null==(__t=cs.icon("interface/nav-layout-solid"))?"":__t)+'</button> <button class="elements">'+(null==(__t=cs.icon("interface/nav-elements-solid"))?"":__t)+'</button> <button class="inspector">'+(null==(__t=cs.icon("interface/nav-inspector-solid"))?"":__t)+'</button> <button class="settings">'+(null==(__t=cs.icon("interface/nav-settings-solid"))?"":__t)+"</button>";return __p}},{}],86:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<h2>"+(null==(__t=heading)?"":__t)+'</h2> <div class="cs-pane-content-outer"> ',paneTemplate&&(__p+=" "+(null==(__t=render(paneTemplate,arguments[0]))?"":__t)+" "),__p+=' <div id="content" class="cs-pane-content-inner" style="right:0px"></div> </div> <div class="cs-builder-sub '+(null==(__t=name)?"":__t)+'"> <button class="cs-builder-sub-back"> <i class="cs-icon" data-cs-icon="&#xf053;"></i> <span>'+(null==(__t=returnButtonText)?"":__t)+'</span> </button> <div class="cs-pane-content-outer"> <div id="sub" class="cs-pane-content-inner"></div> </div> </div>';return __p}},{}],87:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-skeleton-handle"> <div class="cs-skeleton-title">'+(null==(__t=title)?"":__t)+'</div> <div class="cs-skeleton-controls"> ',_.each(controls,function(e){var t=e.action+(e.persist?" persist":"");__p+=' <button class="'+(null==(__t=t)?"":__t)+' cs-icon" data-action="'+(null==(__t=e.action)?"":__t)+'" data-cs-icon="'+(null==(__t=fontIcon(e.icon))?"":__t)+'" ',e.iconAlt&&(__p+=' data-cs-icon-alt="'+(null==(__t=fontIcon(e.iconAlt))?"":__t)+'" '),__p+="></button> "}),__p+=" </div> </div> ","row"==_type?__p+=' <div class="cs-skeleton-container-outer"> <div class="cs-skeleton-container-inner cs-skeleton-container-'+(null==(__t=_type)?"":__t)+'"></div> </div> ':__p+=' <div class="cs-skeleton-container cs-skeleton-container-'+(null==(__t=_type)?"":__t)+'"></div> ',__p+="";return __p}},{}],88:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cs-skeleton-content-inner"> <div class="cs-skeleton-items"></div> </div>';return __p}},{}],89:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="cs-actions"> <li class="action css"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("paint-brush"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("settings-css-editor"))?"":__t)+'</span> </li> <li class="action js"> <i class="cs-icon" data-cs-icon="'+(null==(__t=fontIcon("code"))?"":__t)+'"></i> <span>'+(null==(__t=l18n("settings-js-editor"))?"":__t)+"</span> </li> </ul>";return __p}},{}],90:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=' <div id="controls"></div> <div id="sections"></div>';return __p}},{}],91:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h3 class="cs-pane-section-toggle">'+(null==(__t=_section_title)?"":__t)+'</h3> <div class="cs-pane-section"> <ul class="cs-controls"></ul> </div>';return __p}},{}],92:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<p>"+(null==(__t=l18n("htmlhint-intro"))?"":__t)+"</p> <ul>",_.each(errors,function(e){__p+=" <li>"+(null==(__t=l18n("htmlhint-"+e))?"":__t)+"</li> "}),__p+="</ul>";return __p}},{}],93:[function(e,t,n){var o=wp.media,i=o.view.l10n;wp.media.view.MediaFrame.Cornerstone=wp.media.view.MediaFrame.Post.extend({createStates:function(){var e=this.options;this.states.add([new o.controller.Library({id:"insert",title:i.insertMediaTitle,priority:20,toolbar:"main-insert",filterable:"all",library:o.query(e.library),multiple:!!e.multiple&&"reset",editable:!0,allowLocalEdits:!0,displaySettings:!1,displayUserSettings:!0}),new o.controller.Embed({metadata:e.metadata}),new o.controller.EditImage({model:e.editImage})]),o.view.settings.post.featuredImageId&&this.states.add(new o.controller.FeaturedImage)}})},{}],94:[function(e,t,n){var o={editorCloned:function(e,t,n){if("mirror"!=n)return void Backbone.$(t).trigger("dragula:cloned",e);Backbone.$(t).trigger("dragula:mirror",e),_.defer(function(){Backbone.$(t).trigger("dragula:start",e),cs.global.trigger("dragging",!0)})},skeletonEnd:function(e){cs.global.trigger("dragging",!1),cs.events.trigger("skeleton:dragging",!1)},skeletonStart:function(e,t){var n=Backbone.$(e);cs.events.trigger("skeleton:dragging",!0,n.attr("data-element-type")),n.trigger("dragula:lift"),Backbone.$(t).trigger("dragula:lift:child")},cancel:function(e,t,n){Backbone.$(e).trigger("dragula:dragend")},drop:function(e,t,n,o){Backbone.$(e).trigger("dragula:drop",[t,n,o]),Backbone.$(t).trigger("dragula:receive",[e,n,o])},over:function(e,t,n){Backbone.$(t).trigger("dragula:over"),Backbone.$(n).trigger("dragula:source:over")},out:function(e,t,n){Backbone.$(t).trigger("dragula:out")},shadow:function(e,t,n){Backbone.$(n).trigger("dragula:shadow")}};t.exports=o},{}],95:[function(e,t,n){!function(e){var t=e('<div class="shadow-height x-section" style="position:absolute;top:200%;visibility:hidden;"></div>');e.fn.shadowHeight=function(){if(!(this.length<1)){var e=this.length>1?this.eq(0):this,n=e.clone();t.empty().appendTo("#cs-content"),t.append(n);var o=n.outerHeight();return o<1&&(n.addClass("cf"),o=n.outerHeight()),t.detach(),n.remove(),o}},e.fn.csPointInsideElement=function(e,t){if(!(this.length<1)){var n=this.length>1?this.eq(0):this,o=n.offset(),i=e>o.left&&e<o.left+n.width(),s=t>o.top&&t<o.top+n.height();return i&&s}},e.fn.focusEnd=function(){return this.each(function(){if(e(this).focus(),"function"==typeof this.setSelectionRange){var t=2*e(this).val().length;this.setSelectionRange(t,t),this.scrollTop=99999999}})},e.fn.cleanPaste=function(){function t(e){return e.replace(/\u200B/g,"")}function n(n){try{var o=t(n.originalEvent.clipboardData.getData("text")),i=this.value.substr(0,this.selectionStart)+o,s=this.value.substr(this.selectionEnd,this.value.length);this.value=i+s,this.setSelectionRange(i.length,i.length),n.preventDefault(),e(this).change()}catch(n){}}return this.each(function(){e(this).off("paste",n).on("paste",n)})}}(jQuery)},{}],96:[function(e,t,n){t.exports.reduceFractions=function(e){reductions=[{f:"2/4",r:"1/2"},{f:"2/6",r:"1/3"},{f:"3/6",r:"1/2"},{f:"4/6",r:"2/3"}];var t=e;return _(reductions).each(function(e){var n=new RegExp(e.f,"g");t=t.replace(n,e.r)}),t},t.exports.layoutIsValid=function(e){return _(["1/1","1/2 + 1/2","2/3 + 1/3","1/3 + 2/3","1/3 + 1/3 + 1/3","3/4 + 1/4","1/4 + 3/4","1/2 + 1/2","1/2 + 1/4 + 1/4","1/4 + 1/2 + 1/4","1/4 + 1/4 + 1/2","1/4 + 1/4 + 1/4 + 1/4","4/5 + 1/5","1/5 + 4/5","3/5 + 2/5","2/5 + 3/5","3/5 + 1/5 + 1/5","1/5 + 3/5 + 1/5","1/5 + 1/5 + 3/5","2/5 + 2/5 + 1/5","2/5 + 1/5 + 2/5","1/5 + 2/5 + 2/5","2/5 + 1/5 + 1/5 + 1/5","1/5 + 2/5 + 1/5 + 1/5","1/5 + 1/5 + 2/5 + 1/5","1/5 + 1/5 + 1/5 + 2/5","1/5 + 1/5 + 1/5 + 1/5 + 1/5","5/6 + 1/6","1/6 + 5/6","2/3 + 1/3","1/3 + 2/3","2/3 + 1/6 + 1/6","1/6 + 2/3 + 1/6","1/6 + 1/6 + 2/3","1/2 + 1/2","1/2 + 1/3 + 1/6","1/2 + 1/6 + 1/3","1/3 + 1/2 + 1/6","1/3 + 1/6 + 1/2","1/6 + 1/2 + 1/3","1/6 + 1/3 + 1/2","1/2 + 1/6 + 1/6 + 1/6","1/6 + 1/2 + 1/6 + 1/6","1/6 + 1/6 + 1/2 + 1/6","1/6 + 1/6 + 1/6 + 1/2","1/3 + 1/3 + 1/3","1/3 + 1/3 + 1/6 + 1/6","1/3 + 1/6 + 1/3 + 1/6","1/3 + 1/6 + 1/6 + 1/3","1/6 + 1/3 + 1/3 + 1/6","1/6 + 1/3 + 1/6 + 1/3","1/6 + 1/6 + 1/3 + 1/3","1/3 + 1/6 + 1/6 + 1/6 + 1/6","1/6 + 1/3 + 1/6 + 1/6 + 1/6","1/6 + 1/6 + 1/3 + 1/6 + 1/6","1/6 + 1/6 + 1/6 + 1/3 + 1/6","1/6 + 1/6 + 1/6 + 1/6 + 1/3","1/6 + 1/6 + 1/6 + 1/6 + 1/6 + 1/6"]).contains(e)}},{}],97:[function(e,t,n){String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),t)}},{}],98:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({tagName:"li",template:"controls/base",controlName:"default",bindings:{},canCompact:!0,baseEvents:{"click button.cs-expand-control":"expandControl"},controlEvents:{},events:function(){return _.extend(this.baseEvents,this.controlEvents)},constructor:function(){this.className="cs-control cs-control-"+this.controlName,CS.Mn.CompositeView.apply(this,arguments),this.configureProxy(),this.listenTo(this.model,"set:proxy",this.configureProxy),this.on("render",this.baseRender),this.listenTo(cs.options,"help:text",this.render),_.isFunction(this.controlTemplate)||_.isFunction(cs.template(this.controlTemplate))||(this.controlTemplate="controls/"+this.controlName)},configureProxy:function(){if(this.proxy&&this.stopListening(this.proxy),this.proxy=this.model.proxy||null,!_.isNull(this.proxy)){var e=this.model.get("key");if(this.proxy.definition&&!this.proxy.has(e)&&!_.contains(["elements","disabled"],e))return void cs.warn("Element ["+this.proxy.definition.get("name")+"] missing ["+e+"] attribute.",this.proxy);var t=this.model.get("condition");t&&_.each(_.keys(t),function(e){e.indexOf(":not")==e.length-4&&(e=e.replace(":not","")),0==e.indexOf("parent:")&&(e=e.replace("parent:","")),this.listenTo(this.proxy,"change:"+e,this.toggleVisibility)},this),this.triggerMethod("proxy:ready")}},toggleVisibility:function(){var e=!0,t=this.model.get("condition");if(!_.isNull(this.proxy)&&t){var n=_.filter(_.keys(t),_.bind(function(e){var n=t[e],o=e.indexOf(":not")==Math.abs(e.length-4);o&&(e=e.replace(":not","")),0==e.indexOf("parent:")?(source=this.proxy.getSourceParent().toProxy(),e=e.replace("parent:","")):source=this.proxy;var i=source.get(e),s=_.isArray(n)?_.contains(n,i):i==n;return o?s:!s},this));e=_.isEmpty(n)}var o=this.$el.hasClass("hide"),i=o&&e||!o&&!e;this.$el.toggleClass("hide",!e),i&&cs.navigate.trigger("scrollbar:update"),this.triggerMethod("custom:visibility",e,i)},baseRender:function(){this.triggerMethod("before:base:render");var e=this.model.get("ui"),t=this.model.get("options");(!e.title&&this.canCompact||t.compact)&&this.$el.addClass("cs-control-compact"),(e.divider||this.divider)&&this.$el.addClass("cs-control-divider"),this.$el.attr("data-name",this.model.get("name")),this.toggleVisibility(),this.stickitBindings(),this.triggerMethod("after:base:render"),this.$("input,textarea").cleanPaste()},stickitBindings:function(){var e=this.bindingSelector||"input[type=hidden]",t={observe:this.model.get("key")};this.binding&&_.extend(t,this.binding),this.addBinding(this.proxy,e,t),this.stickit(this.proxy)},serializeData:function(){var e=this.model.get("options"),t=_.clone(this.model.get("ui"));t.message&&0==t.message.indexOf("[HelpText]")&&(t.message=t.message.replace("[HelpText]","")),cs.options.request("help:text")||!1===e.helpText||(t.message=!1);var n=_.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{controlTemplate:this.controlTemplate,controlType:this.model.get("type"),ui:t});return n.ui.title&&(n.ui.title=this.replacePlaceholders(n.ui.title)),n.ui.tooltip&&(n.ui.tooltip=this.replacePlaceholders(n.ui.tooltip)),n.ui.message&&(n.ui.message=this.replacePlaceholders(n.ui.message)),this.proxy&&_.extend(n,this.proxy.toJSON()),_.isFunction(this.controlData)&&_.extend(n,this.controlData()),n},baseTextReplacements:{"%%element-name%%":function(){return this.proxy?this.proxy.definition.get("name"):""},"%%element-type%%":function(){return this.proxy?this.proxy.get("_type"):""},"%%icon%%":function(){return this.proxy?cs.icon(this.proxy.definition.get("icon")):""},"%%icon-nav-elements-solid%%":function(){return cs.icon("interface/nav-elements-solid")},"%%icon-nav-settings-solid%%":function(){return cs.icon("interface/nav-settings-solid")}},replacePlaceholders:function(e){return _.each(_.extend(this.textReplacements||{},this.baseTextReplacements),_.bind(function(t,n){-1!=e.indexOf(n)&&(e=e.replace(new RegExp(n,"g"),t.apply(this)))},this)),e},notLiveTrigger:function(){var e=this.model.get("options");e.notLive&&cs.data.trigger("control:not:live",this.model.proxy.get("name")+"_"+this.model.get("name"),e.notLive)},expandControl:function(){this.triggerMethod("before:expand"),this.$el.addClass("cs-control-expanded"),cs.events.trigger("expand:control",this.proxy.getSource(),this.model.get("name"),this),this.listenToOnce(cs.events,"expand:close",this.expandClose)},expandClose:function(){this.proxy.refresh(),this.$el.removeClass("cs-control-expanded"),this.render(),this.triggerMethod("after:expand")}})},{}],99:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-breadcrumbs cs-control-divider",template:"inspector/breadcrumbs",controlName:"breadcrumbs",events:{"click button":"inspect","mouseover button":"mouseOver","mouseout button":"mouseOut"},initialize:function(){this.levels=this.findLevels([],this.model.proxy.getSource())},mouseOver:function(e){var t=this.buttonLevel(e);t&&t.model.trigger("observe:start")},mouseOut:function(e){var t=this.buttonLevel(e);t&&t.model.trigger("observe:end")},inspect:function(e){var t=this.buttonLevel(e);t&&cs.events.trigger("inspect:element",t.model,!1)},buttonLevel:function(e){return this.levels[parseInt(this.$(e.currentTarget).data("level"))]},findLevels:function(e,t){"section"!=t.get("_type")&&t.collection&&t.collection.parent&&(e=this.findLevels(e,t.collection.parent));var n={label:t.definition.get("ui").title,model:t};switch(t.get("_type")){case"section":n.title=t.get("title"),n.label=cs.l18n("section");break;case"row":n.label=cs.l18n("row");break;case"column":n.label=cs.l18n("column")}return e.push(n),e},serializeData:function(){return{items:_.first(this.levels,4),count:this.levels.length,rtl:cs.config("isRTL")}},onRender:function(){this.levels.length<=1&&!this.levels[0].title&&this.$el.toggleClass("hide",!0)}})},{}],100:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"choose",binding:{initialize:function(e,t,n){var o=this.model.get("options");this.$("li").on("click",_.bind(function(e){var i=this.$(e.currentTarget).data("choice");_.isUndefined(o.offValue)||i!=t.get(n.observe)||(i=o.offValue),t.set(n.observe,i)},this));var i=_.bind(function(e,t){var i=n.observe?t:null;i||""==i||(i=o.choices&&o.choices.length>0?o.choices[0].value:"none"),this.$("li").removeClass("active").siblings("[data-choice="+(""==i?"none":i)+"]").addClass("active")},this);i(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,i)}},onBeforeRender:function(){var e=this.model.get("options");_.contains(["2","3","4","5"],e.columns)||(e.columns="2",this.model.set("options",e))}})},{}],101:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"div",className:"cs-control-external cs-control-code-editor",template:_.template("<textarea></textarea>"),initialize:function(){this.listenTo(cs.navigate,"open:code:editor",function(e){e==this.model.get("key")?this.$("textarea").csCodeEditorShow():this.$("textarea").csCodeEditorHide()}),this.listenTo(cs.navigate,"toggle:code:editor",function(e,t){e==this.model.get("key")?this.$("textarea").csCodeEditorToggle(t):t&&this.$("textarea").csCodeEditorHide()})},onRender:function(){var e,t;this.$("textarea").val(this.model.proxy.get(this.model.get("key"))),e=this.model.get("options"),t=e.settings||{},t=_.extend(t,{change:_.bind(function(e){this.model.proxy.set(this.model.get("key"),e.doc.getValue())},this)}),_.defer(_.bind(function(){this.$el.detach(),Backbone.$("body").append(this.$el);var e=this.$("textarea");e.csCodeEditor(t),e.on("csCodeEditor.toggle",function(e){})},this))}})},{}],102:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"color",bindingSelector:"input[type=text].cs-color-input",onAfterBaseRender:function(){var e=this.model.get("options")||{},t={outputFormat:e.output_format||null};this.$(".cs-color-input").huebert(t)}})},{}],103:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/column-actions",controlName:"actions",ui:{confirm:".action.erase",layout:".action.manage-layout"},events:{"click @ui.layout":"layout"},behaviors:{Confirm:{message:cs.l18n("columns-erase-confirm")}},canQuickConfirm:!0,initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},layout:function(){cs.events.trigger("inspect:layout",this.proxy.getSource(),{navigate:!0})},onConfirmAccept:function(){cs.elements.trigger("erase",{model:this.proxy.getSource()})}})},{}],104:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({tagName:"ul",className:"cs-controls",initialize:function(){this.repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),4),this.listenTo(this.collection,"add",this.repaint),this.listenTo(this.collection,"remove",this.repaint),this.listenTo(this.collection,"reset",this.repaint),this.listenTo(cs.navigate,"auto:focus",this.autoFocus)},getChildView:function(e){return cs.controlLookup(e.get("type"))},onRender:function(){_.defer(_.bind(function(){this.$el.toggleClass("empty",this.collection.isEmpty()),this.autoFocus()},this))},autoFocus:function(){var e=cs.navigate.request("auto:focus");if(!1!==e){var t=this.$('[data-name="'+e+'"]');t.length>0&&!t.hasClass("cs-control-expanded")&&(cs.navigate.reply(!1),t.find('input[type="text"],textarea').focusEnd())}}})},{}],105:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"controls/custom-markup",controlName:"custom-markup",controlData:function(){return{message:this.model.get("options").html||""}}})},{}],106:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"date",binding:{initialize:function(e,t,n){function o(e){var o=s(t.get(n.observe)),i=e+a.delimiter+o.format;t.set(n.observe,i)}function i(){var e=s(t.get(n.observe)),o=e.date+a.delimiter+r(Backbone.$(this).val());t.set(n.observe,o)}function s(e){var t,n,o;if(e){var t=e.split(a.delimiter);t[0]&&(n=Cornerstone.Vendor.moment(t[0]),n=!!n.isValid()&&n),t[1]&&(o=t[1])}return n||(n=Cornerstone.Vendor.moment()),{date:n.toString(),format:r(o),moment:n}}function r(e){return _.contains(l,e)?e:a.default_format||"Do MMMM YYYY"}var a=this.model.get("options"),l=a.available_formats;if(!l||!l.length){var c=a.default_format||"Do MMMM YYYY";l=[c]}var u=this.$(".cs-date-input"),d=this.$(".cs-date-format select");this.picker=new Cornerstone.Vendor.Pikaday({field:u[0],bound:!1,container:this.$(".cs-date-picker-entry")[0],theme:"cs-date-picker",isRTL:cs.config("isRTL"),i18n:this.localize(),onSelect:o}),a.choose_format||this.$(".cs-date-format").hide(),d.on("change",i);var p=_.bind(function(e,t){t=s(t);Cornerstone.Vendor.moment(t.date,t.format);u.val(t.moment.format(t.format)),this.picker.config({format:t.format}),this.picker.setMoment(t.moment,!0);var n=_.reduce(l,function(e,n){return e+'<option value="'+n+'"'+(n==t.format?" selected":"")+">"+t.moment.format(n)+"</option>"},"");d.empty(),d.append(Backbone.$(n))},this);p(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,p)}},localize:function(){return{previousMonth:cs.l18n("prev-month"),nextMonth:cs.l18n("next-month"),months:cs.l18n("moment-months").split("_"),weekdays:cs.l18n("moment-weekdays").split("_"),weekdaysShort:cs.l18n("moment-weekdays-short").split("_")}},onBeforeDestroy:function(){this.picker.destroy()}})},{}],107:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"dimensions",binding:{initialize:function(e,t,n){var o=this.model.get("options");o.lock&&_.each(o.lock,function(e,t){this.$("[data-edge="+t+"]").prop("disabled",!0).val(e)},this),this.$("button.save");var i=function(){var e=t.get(n.observe);return e?_.clone(e):["0px","0px","0px","0px","unlinked"]};this.$("button.cs-link-dimensions").click(function(){var e=i();state="linked"==e[4]?"unlinked":"linked","linked"==state&&(e=_.map(e,function(){return e[0]})),e[4]=state,o.lock&&_.each(o.lock,function(t,n){"top"==n&&(e[0]=t),"right"==n&&(e[1]=t),"bottom"==n&&(e[2]=t),"left"==n&&(e[3]=t)},this),t.set(n.observe,e)}),this.$("[data-edge]").on("change keyup",_.bind(function(e){$changed=this.$(e.currentTarget);var s=i(),r=$changed.val().trim();""==r&&(r="0px"),"linked"==s[4]?(s=_.map(s,function(){return r}),s[4]="linked"):(s[$changed.parent().index()]=r,s[4]="unlinked"),o.lock&&_.each(o.lock,function(e,t){"top"==t&&(s[0]=e),"right"==t&&(s[1]=e),"bottom"==t&&(s[2]=e),"left"==t&&(s[3]=e)},this),t.set(n.observe,s)},this));var s=_.bind(function(e,t){$top=this.$("[data-edge=top]"),$right=this.$("[data-edge=right]"),$bottom=this.$("[data-edge=bottom]"),$left=this.$("[data-edge=left]"),$top.val()!=t[0]&&$top.val(t[0]),$right.val()!=t[1]&&$right.val(t[1]),$bottom.val()!=t[2]&&$bottom.val(t[2]),$left.val()!=t[3]&&$left.val(t[3]),$top.val()!=t[0]&&$top.val(t[0]),$right.val()!=t[1]&&$right.val(t[1]),$bottom.val()!=t[2]&&$bottom.val(t[2]),$left.val()!=t[3]&&$left.val(t[3]),this.$("button.cs-link-dimensions").toggleClass("active","linked"==t[4])},this);s(t,i()),this.listenTo(t,"change:"+n.observe,s)}}})},{}],108:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"editor",controlTemplate:"controls/textarea",bindingSelector:"textarea.cs-wp-editor",binding:{events:["keyup","change","cut","paste","focus"],onSet:function(e){return this.textReplace(e)},onGet:function(e){return this.textReplace(e)}},onProxyReady:function(){this.editorID="cswpeditor"+this.cid,tinyMCEPreInit.mceInit[this.editorID]=_.clone(tinyMCEPreInit.mceInit.cswpeditor),tinyMCEPreInit.mceInit[this.editorID].id=this.editorID,tinyMCEPreInit.mceInit[this.editorID].selector="#"+this.editorID,tinyMCEPreInit.qtInit[this.editorID]={buttons:"strong,em,del,link,img,close",id:this.editorID},tinyMCEPreInit.mceInit[this.editorID].setup=_.bind(function(e){var t=_.debounce(_.bind(function(){e.save(),this.$(".cs-wp-editor").trigger("change")},this),150);e.on("keyup change NodeChange",t)},this),this.markup=cs.config("editorMarkup").replace(new RegExp("cswpeditor","g"),this.editorID).replace(new RegExp("%%PLACEHOLDER%%","g"),this.proxy.get("content"))},updateContent:function(){},attachElContent:function(e){return this.$el.html(this.markup),this.$el.append(cs.template("controls/expand-control-button")()),this},onRender:function(){this.$(".button.insert-media.add_media").html('<span class="wp-media-buttons-icon"></span>'),this.$(".wp-media-buttons").children().not("#insert-media-button,#cs-insert-shortcode-button").detach(),_.defer(_.bind(function(){quicktags(tinyMCEPreInit.qtInit[this.editorID]),switchEditors.go(this.editorID,"html"),wpActiveEditor=this.editorID,_.defer(function(){delete QTags.instances[0]})},this))},onDestroy:function(){tinymce.EditorManager.execCommand("mceRemoveEditor",!0,this.editorID),delete QTags.instances[this.editorID],delete tinyMCEPreInit.mceInit[this.editorID],delete tinyMCEPreInit.qtInit[this.editorID]},replacements:{},textReplace:function(e){return e},onBeforeExpand:function(){switchEditors.go(this.editorID,"html")},onExpandedOpen:function(){}})},{}],109:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/element-actions",controlName:"actions",ui:{duplicate:".action.duplicate",delete:".action.delete"},events:{"click @ui.duplicate":"duplicate","click @ui.delete":"elDelete"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},duplicate:function(){cs.global.trigger("element:duplicate",this.proxy.getSource())},elDelete:function(){cs.global.trigger("element:delete",this.proxy.getSource())}})},{}],110:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"icon-choose",childViewContainer:"ul.cs-choose",childView:CS.Mn.ItemView.extend({tagName:"li",template:"controls/icon-choose-item"}),controlEvents:{"keyup .cs-search-input":"search","search .cs-search-input":"search"},initialize:function(){this.iconData=cs.data.request("get:icons"),this.filteredIcons=this.iconData,this.iconNames=cs.config("fontAwesome"),this.lazyUpdateSearch=_.debounce(this.updateSearch,250)},search:function(){this.lazyUpdateSearch(this.$(".cs-search-input").val().toLowerCase().trim())},updateSearch:function(e){if(_.defer(_.bind(this.deferRender,this)),""==e)return void(this.filteredIcons=this.iconData);var t={};_.each(this.iconData,function(n,o){_.reduce(n,function(t,n){return t+n.score(e)},0)>.5&&(t[o]=n)}),this.filteredIcons=t},binding:{initialize:function(e,t,n){this.$("ul").on("click","li",_.bind(function(e){var o=this.$(e.currentTarget).data("choice");if(o==t.get(n.observe))return void t.set(n.observe,"");this.$prevIcon&&this.$prevIcon.removeClass("active"),this.$prevIcon=this.$(e.currentTarget),this.click=!0,t.set(n.observe,o),this.$(e.currentTarget).addClass("active")},this));var o=_.bind(function(e,t){if(this.$prevIcon&&this.$prevIcon.removeClass("active"),t&&""!=t){this.$prevIcon=this.$(".cs-icons-inner li[data-choice="+t+"]"),this.$prevIcon.addClass("active");var n=this.$prevIcon.position()
;!this.click&&n&&this.$(".cs-icons-inner").scrollTop(n.top).perfectScrollbar("update"),this.click=!1}},this);this.on("deferred:render",function(){o(t,t.get(n.observe))}),this.listenTo(t,"change:"+n.observe,o)}},onRender:function(){this.$("ul.cs-choose").empty();var e=0;_.each(this.filteredIcons,function(t,n){e++>20||this.$("ul.cs-choose").append(cs.template("controls/icon-choose-item")({code:n,choice:t[0],choices:t.join(" ")}))},this),this.$(".cs-icons-inner").perfectScrollbar({scrollYMarginOffset:10,wheelPropagation:!0}),_.defer(_.bind(this.deferRender,this))},deferRender:function(){if(this.$("ul.cs-choose").empty(),_.each(this.filteredIcons,function(e,t){this.$("ul.cs-choose").append(cs.template("controls/icon-choose-item")({code:t,choice:e[0],choices:e.join(" ")}))},this),this.expanded){var e=this.$(".cs-icons-outer");e.removeClass("cs-expandable").addClass("cs-expanded");var t=e.outerHeight(),n=e.outerWidth();e.css({"max-width":n-n%50+2,"max-height":t-(t-70)%50})}this.$(".cs-icons-inner").perfectScrollbar("update"),this.trigger("deferred:render")},onExpandedOpen:function(){this.expanded=!0,_.delay(_.bind(function(){this.$(".cs-search-input").focus()},this),25)}})},{}],111:[function(e,t,n){var o=Cornerstone.ControlViews.Base.extend({controlName:"image",binding:{initialize:function(e,t,n){this.$(".cs-image").on("click",_.bind(function(e){if(!this.$(e.currentTarget).hasClass("empty"))return void t.set(n.observe,"");var i=o.uploader;i.off("insert"),i.off("select"),i.on("insert",_.bind(function(){var e=i.state().get("selection").first().toJSON();t.set(n.observe,e.url)},this)),i.on("select",function(){var e=i.state();e&&"embed"==e.get("id")&&t.set(n.observe,e.props.get("url"))}),i.open()},this));var i=_.bind(function(e,t){var n=!t||""==t;this.$(".cs-image").toggleClass("empty",n).css({backgroundImage:n?"none":"url("+t+")"})},this);i(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,i)}},initialize:function(){o.createMediaFrame()},onRender:function(){var e=this.model.get("options");this.$(".cs-image").toggleClass("pattern",!0===e.pattern)}},{uploader:null,createMediaFrame:function(){null==this.uploader&&(this.uploader=new wp.media.view.MediaFrame.Cornerstone({className:"media-frame cs-media-frame",multiple:!1,title:"THAT TITLE THOUG",library:{type:"image"},button:{text:"Insert Image"}}))}});t.exports=o},{}],112:[function(e,t,n){t.exports={title:e("./title"),toggle:e("./toggle"),text:e("./text"),textarea:e("./textarea"),editor:e("./editor"),"code-editor":e("./code-editor"),image:e("./image"),select:e("./select"),wpselect:e("./wpselect"),sortable:e("./sortable"),number:e("./number"),color:e("./color"),choose:e("./choose"),"multi-choose":e("./multi-choose"),"icon-choose":e("./icon-choose"),dimensions:e("./dimensions"),date:e("./date"),"info-box":e("./info-box"),"custom-markup":e("./custom-markup"),breadcrumbs:e("./breadcrumbs"),"element-actions":e("./element-actions"),"column-actions":e("./column-actions"),"row-actions":e("./row-actions"),"section-actions":e("./section-actions"),"settings-actions":e("./settings-actions"),"layout-actions":e("./layout/layout-actions"),"template-actions":e("./layout/template-actions"),"template-select":e("./layout/template-select"),"template-remove":e("./layout/template-remove"),"sortable-sections":e("./layout/sortable-sections"),"sortable-rows":e("./layout/sortable-rows"),"column-layout":e("./layout/column-layout"),"column-order":e("./layout/column-order"),"template-save-dialog":e("./layout/template-save-dialog"),"template-upload-dialog":e("./layout/template-upload-dialog")}},{"./breadcrumbs":99,"./choose":100,"./code-editor":101,"./color":102,"./column-actions":103,"./custom-markup":105,"./date":106,"./dimensions":107,"./editor":108,"./element-actions":109,"./icon-choose":110,"./image":111,"./info-box":113,"./layout/column-layout":114,"./layout/column-order":116,"./layout/layout-actions":117,"./layout/sortable-rows":118,"./layout/sortable-sections":119,"./layout/template-actions":120,"./layout/template-remove":121,"./layout/template-save-dialog":122,"./layout/template-select":123,"./layout/template-upload-dialog":124,"./multi-choose":125,"./number":126,"./row-actions":127,"./section-actions":128,"./select":129,"./settings-actions":130,"./sortable":133,"./text":134,"./textarea":135,"./title":136,"./toggle":137,"./wpselect":138}],113:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"controls/info-box",controlName:"info-box",onCustomVisibility:function(){this.$el.toggleClass("hide",!cs.options.request("help:text"))}})},{}],114:[function(e,t,n){var o=e("../../../utility/row-validator");t.exports=Cornerstone.ControlViews.Base.extend({controlName:"column-layout",bindings:{"#column-layout":{observe:"_column_layout",events:["blur"],onSet:"formatColumnLayout",updateModel:"confirmFormat",initialize:function(e,t,n){this.$("#column-layout").keyup(function(e){13===e.keyCode&&Backbone.$(this).blur()}),setActive=_.bind(function(e,t){if("custom"!=t){var n=t.split(" + ");e.elements.each(function(e){if(_.isEmpty(n))return void e.set("_active",!1);e.set("_active",!0);var t=n.shift();e.set("size",t)}),e.elements.sort()}if(this.$("#column-layout").hide(),this.$("li").removeClass("active"),$active=this.$('li[data-layout="'+t+'"]'),$active.length)return void $active.addClass("active");this.$("li.custom").addClass("active"),this.$("#column-layout").show()},this),this.$("ul li").click(_.bind(function(e){if($target=this.$(e.currentTarget),$target.hasClass("custom"))return void setActive(t,"custom");var i=$target.attr("data-layout");o.layoutIsValid(i)&&(t.set(n.observe,i),this.$("#column-layout").val(i))},this)),setActive(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,setActive),this.listenTo(t,"position:updated",this.render),this.listenTo(t.elements,"sort",function(){var e=[];t.elements.each(function(t){t.get("_active")&&e.push(t.get("size"))}),t.set("_column_layout",e.join(" + ").trim())})}}},formatColumnLayout:function(e,t){return o.reduceFractions(_.map(e.split("+"),function(e){return e.trim()}).join(" + "))},confirmFormat:function(e,t,n){return o.layoutIsValid(this.formatColumnLayout(e))},textReplacements:{"%%title%%":function(){return cs.l18n("row-numeric").replace("%s",this.proxy.getIndex()+1)}}})},{"../../../utility/row-validator":96}],115:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",template:"controls/column-order-item",ui:{handle:"span.handle"},events:{"dragula:drop":"updatePosition",mouseover:"mouseOver",mouseout:"mouseOut"},triggers:{"click @ui.handle":"click:action"},modelEvents:{"change:title":"render"},className:function(){return"cs-column-order-item cs-"+this.model.get("size").replace("/","-")},updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},mouseOver:function(e){this.model.trigger("observe:start")},mouseOut:function(e){this.model.trigger("observe:end")}})},{}],116:[function(e,t,n){var o=e("../sortable");t.exports=o.extend({controlName:"column-order",emptyView:CS.Mn.ItemView.extend({tagName:"li",className:"column empty",template:!1}),dragulaConfig:function(){return{offset:function(e,t,n){return e.x=Backbone.$(n).width()/2,e},direction:"horizontal",revertOnSpill:!0}},getChildView:function(){return e("./column-order-item")},filterBy:"_active",canAdd:!1,textReplacements:{"%%title%%":function(){return cs.l18n("row-numeric").replace("%s",this.proxy.getIndex()+1)}},onChildviewClickAction:function(e){cs.events.trigger("inspect:element",e.model)},getSortableContainer:function(){return this.$("ul.cs-column-order")[0]}})},{"../sortable":133,"./column-order-item":115}],117:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"layout/actions",controlName:"actions",ui:{new:".action.new",templates:".action.templates"},events:{"click @ui.new":"addItem","click @ui.templates":"openTemplates"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},addItem:function(){cs.events.trigger("add:section")},openTemplates:function(){cs.navigate.trigger("layout:templates")}})},{}],118:[function(e,t,n){var o=e("../sortable");t.exports=o.extend({emptyView:!1,wideControls:!0,confirmMessage:cs.l18n("layout-row-delete-confirm"),actions:[{icon:"copy",tooltip:cs.l18n("tooltip-copy")},{icon:"trash-o",tooltip:cs.l18n("tooltip-delete")},{icon:"search",tooltip:cs.l18n("tooltip-inspect")}],customChildTitle:function(e){return cs.l18n("row-numeric").replace("%s",this.children.length)},onChildviewClickActionAlt:function(e){cs.events.trigger("inspect:element",e.model)},onChildviewClickHandle:function(e){cs.events.trigger("inspect:layout",e.model)},onChildviewRender:function(e){var t=cs.navigate.request("layout:active:row");t&&e.model&&t.cid==e.model.cid&&e.$el.addClass("active")},onRemoveItem:function(e){var t=cs.navigate.request("layout:active:row");t&&e&&t.cid==e.cid&&_.defer(_.bind(function(){this.inspectFirst()},this))},inspectFirst:function(){cs.events.trigger("inspect:layout",this.collection.first())},onResetLastItem:function(){this.inspectFirst()}})},{"../sortable":133}],119:[function(e,t,n){var o=e("../sortable");t.exports=o.extend({emptyView:!1,canAdd:!1,confirmMessage:cs.l18n("layout-row-delete-confirm"),onChildviewClickHandle:function(e){cs.events.trigger("inspect:layout",e.model,{navigate:!0}),cs.navigate.trigger("auto:focus","title")},onAfterBaseRender:function(){this.$el.toggleClass("hide",0==this.collection.length)}})},{"../sortable":133}],120:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-template-actions cs-control-divider",template:"layout/sub-templates/template-actions",controlName:"actions",ui:{save:".action.save",upload:".action.upload"},events:{"click @ui.save":"save","click @ui.upload":"upload"},initialize:function(e){cs.channel.trigger("block:gen"),this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},save:function(){this.proxy.set("action","save")},upload:function(){this.proxy.set("action","upload")}})},{}],121:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"template-select",bindingSelector:"select",ui:{remove:"button.remove"},triggers:{"click @ui.block":"insert:block"},behaviors:{Confirm:{ui:"remove",message:cs.l18n("templates-remove-message")}},onCustomVisibility:function(){var e=this.model.get("options");this.$el.toggleClass("hide",e.choices&&e.choices.length<1)},onConfirmAccept:function(){cs.templates.trigger("delete",this.$("select").val())}})},{}],122:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"layout/sub-templates/save-dialog",controlName:"template-save-dialog",bindingSelector:"input[type=text]",ui:{download:".action.download",save:".action.save",close:"button.close"},events:{"click @ui.download":"download","click @ui.save":"save","click @ui.close":"close"},behaviors:{Confirm:{ui:"save",message:cs.l18n("templates-save-message"),yep:cs.l18n("templates-save-yep"),nope:cs.l18n("templates-save-nope")}},onConfirmAccept:function(){cs.templates.trigger("save","page",this.proxy.get("title")),this.close()},onConfirmDecline:function(){cs.templates.trigger("save","block",this.proxy.get("title")),this.close()},download:function(){cs.templates.trigger("download",this.proxy.get("title")),this.proxy.set("action","none")},close:function(){this.proxy.set("action","none")},onCustomVisibility:function(e){e&&this.$('input[type="text"]').focus()}})},{}],123:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"template-select",bindingSelector:"select",ui:{page:"button.page",block:"button.block"},triggers:{"click @ui.block":"insert:block"},behaviors:{Confirm:{ui:"page",message:cs.l18n("templates-overwrite-message"),yep:cs.l18n("templates-overwrite-yep"),nope:cs.l18n("templates-overwrite-nope")}},onCustomVisibility:function(){var e=this.model.get("options");this.$el.toggleClass("hide",e.choices&&e.choices.length<1)},onConfirmAccept:function(){_.defer(_.bind(function(){cs.templates.trigger("import",this.$("select").val(),"page")},this))},onInsertBlock:function(){_.defer(_.bind(function(){cs.templates.trigger("import",this.$("select").val(),"block")},this))}})},{}],124:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({template:"layout/sub-templates/upload-dialog",controlName:"template-upload-dialog",ui:{upload:"button.process",close:"button.close"},events:{"click @ui.close":"close","click @ui.upload":"confirmUpload"},initialize:function(){this.listenTo(cs.data,"template:upload:complete",this.uploadComplete)},confirmUpload:function(){cs.confirm.trigger("open",{message:cs.l18n("templates-upload-message"),accept:_.bind(this.uploadPage,this),decline:_.bind(this.uploadBlock,this),yep:cs.l18n("templates-upload-yep"),nope:cs.l18n("templates-upload-nope")})},uploadPage:function(){this.deferredUpload("page")},uploadBlock:function(){this.deferredUpload("block")},deferredUpload:function(e){_.defer(_.bind(this.upload,this),e)},upload:function(e){cs.message.trigger("notice","Cornerstone is uploading your template...");var t=this.$("#template-upload")[0].files[0];if(!t||t.name.match(/.+\.csl/)){var n=new FileReader;n.onload=function(t){cs.data.trigger("template:upload:complete",JSON.parse(n.result),e)};try{n.readAsText(t)}catch(e){cs.message.trigger("error",cs.l18n("templates-error-read"))}}else cs.message.trigger("error",cs.l18n("templates-error-upload")),console.warn("Invalid template file")},uploadComplete:function(e,t){cs.templates.trigger("import",e.elements,t),this.resetForm(),this.close()},resetForm:function(){var e=this.$("#template-upload");e.replaceWith(e.clone())},close:function(){this.proxy.set("action","none")}})},{}],125:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"multi-choose",controlTemplate:"controls/choose",binding:{initialize:function(e,t,n){this.$("li").on("click",_.bind(function(e){var o=_.clone(t.get(n.observe)),i=this.$(e.currentTarget).data("choice");_.isArray(o)||(o=[]),_.contains(o,i)?o=_.without(o,i):o.push(i),t.set(n.observe,o),t.trigger("change:"+n.observe,t,o,{})},this));var o=_.bind(function(e,t){this.$("li").removeClass("active").siblings(_.reduce(t||[],function(e,t){return e+",[data-choice="+t+"]"},".always-on")).addClass("active")},this);o(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,o)}},onBeforeRender:function(){var e=this.model.get("options");_.contains(["2","3","4","5"],e.columns)||(e.columns="2",this.model.set("options",e))}})},{}],126:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"number",bindingSelector:"input[type=number]"})},{}],127:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"inspector/row-actions",controlName:"actions",ui:{layout:".action.manage-layout",delete:".action.delete"},events:{"click @ui.delete":"elDelete","click @ui.layout":"layout"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0},layout:function(){cs.events.trigger("inspect:layout",this.proxy.getSource(),{navigate:!0})},elDelete:function(){cs.global.trigger("element:delete",this.proxy.getSource())}})},{}],128:[function(e,t,n){arguments[4][127][0].apply(n,arguments)},{dup:127}],129:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"select",bindingSelector:"select",controlEvents:{"change select":"notLiveTrigger"},onAfterBaseRender:function(){var e=this.model.get("options");_.each(e.choices,function(e){e.disabled&&this.$('option[value="'+e.value+'"]').prop("disabled",!0)},this)}})},{}],130:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control cs-control-actions cs-control-divider",template:"settings/actions",controlName:"actions",ui:{triggerCSS:".action.css",triggerJS:".action.js"},events:{"click @ui.triggerJS":"triggerJS","click @ui.triggerCSS":"triggerCSS"},initialize:function(e){this.proxy=this.model.proxy||null,this.selected=e.selected||void 0,this.jsMessage=_.once(function(){})},triggerCSS:function(){cs.navigate.trigger("open:code:editor","custom_css")},triggerJS:function(){if(!cs.config("unfilteredHTML"))return void cs.message.trigger("notice",cs.l18n("settings-js-denied"),8e3);cs.navigate.trigger("open:code:editor","custom_js"),this.jsMessage()}})},{}],131:[function(e,t,n){var o=e("./sortable-item");t.exports=o.extend({className:"sortable-item wide-controls",template:"controls/sortable-item-wide",ui:{action:"button.action1",confirm:"button.action2",actionAlt:"button.action3",handle:"span.handle"},triggers:{"click @ui.action":"clickAction","click @ui.actionAlt":"clickActionAlt","click @ui.handle":"click:handle"}})},{"./sortable-item":132}],132:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"sortable-item",template:"controls/sortable-item",ui:{action:"button.action1",confirm:"button.action2",handle:"span.handle"},events:{"dragula:drop":"updatePosition",mouseover:"mouseOver",mouseout:"mouseOut"},triggers:{"click @ui.action":"clickAction","click @ui.handle":"click:handle"},modelEvents:{"change:title":"render"},behaviors:{Confirm:{message:function(){return this.atFloor()?cs.l18n("sortable-at-floor"):this.confirmMessage},yep:function(){return cs.l18n("confirm-yep")},nope:function(){return this.atFloor()?cs.l18n("confirm-back"):cs.l18n("confirm-nope")}},ConfirmWarn:{message:function(){return cs.l18n("sortable-at-cap")},yep:function(){return""},nope:function(){return cs.l18n("confirm-back")}}},canQuickConfirm:!0,updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},serializeData:function(){var e=_.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{actions:this.actions});return _.isFunction(this.customTitle)?e.title=this.customTitle(this):e.title=this.model.get(this.title_field),e},mouseOver:function(e){this.model.trigger("observe:start")},mouseOut:function(e){this.model.trigger("observe:end")}})},{}],133:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"sortable",childViewContainer:"ul",actions:[{icon:"copy",tooltip:cs.l18n("tooltip-copy")},{icon:"trash-o",tooltip:cs.l18n("tooltip-delete")}],wideControls:!1,getChildView:function(){return e(this.wideControls?"./sortable-item-wide":"./sortable-item")},confirmMessage:cs.l18n("sortable-remove"),dragulaConfig:function(){return{offset:function(e,t,n){return e.y=Backbone.$(n).height()/2,e},revertOnSpill:!0}},buildChildView:function(e,t,n){var o=new t(_.extend({model:e},n));return o.atFloor=_.bind(function(){return this.floor>=this.collection.length},this),o.atCap=_.bind(function(){return!_.isNull(this.capacity)&&this.capacity<=this.collection.length},this),_.isFunction(this.customChildTitle)&&(o.customTitle=_.bind(this.customChildTitle,this)),o.title_field=this.title_field,o.actions=this.actions,o.confirmMessage=this.confirmMessage,o},emptyView:CS.Mn.ItemView.extend({tagName:"li",className:"sortable-item empty",template:"controls/sortable-empty",events:{"click span.handle":"click"},click:function(e){this.triggerMethod("empty:click:add",e)}}),sort:!1,filterBy:!1,canAdd:!0,canCompact:!1,ui:{add:"button.cs-add-sortable-item"},events:{"click @ui.add":"addItem"},initialize:function(){this.drake=Cornerstone.Vendor.dragula(_.result(this,"dragulaConfig")),this.drake.on("drag",function(e){cs.events.trigger("preview:no-pointer",!0)}),this.drake.on("dragend",function(e){cs.events.trigger("preview:no-pointer",!1)}),this.drake.on("drop",function(e,t,n,o){Backbone.$(e).trigger("dragula:drop",[t,n,o])})},controlData:function(){var e={canAdd:this.canAdd};return!_.isNull(this.capacity)&&this.collection.length>=this.capacity&&(e.canAdd=!1),e.empty=0==this.collection.length,e},onChildviewEmptyClickAdd:function(e){this.addItem()},onChildviewUpdatePosition:function(e,t,n,o){_.defer(_.bind(function(){this.triggerMethod("item:before:position:updated",e),this.collection.trigger("update:position",e.model,e.$el.index()),this.triggerMethod("item:position:updated",e)},this))},filter:function(e,t,n){return!this.filterBy||e.get(this.filterBy)},onProxyReady:function(){this.collection=this.proxy.elements,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"sort",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"add",this.render);var e=this.model.get("options");e.type&&(this.collection.childType=e.type),this.floor=e.floor||0,this.title_field=e.title_field||"title",this.capacity=e.capacity?e.capacity:null},onChildviewClickAction:function(e){e.atCap()?e.trigger("confirm:warn:open"):cs.elements.trigger("duplicate",e.model)},onChildviewClickHandle:function(e){cs.events.trigger("inspect:element",e.model,!1);var t="settings"==cs.navigate.request("active:pane")?"settings":"inspector";cs.navigate.trigger(t+":item")},onChildviewConfirmAccept:function(e){var t=e.atFloor();this.triggerMethod("remove:item",e.model),cs.elements.trigger("delete",{model:e.model}),t&&(this.addItem(),this.triggerMethod("reset:last:item"))},getSortableContainer:function(){return this.$("ul.cs-sortable")[0]},onRender:function(){this.drake.containers=[],this.drake.containers.push(this.getSortableContainer()),this.triggerMethod("after:render")},addItem:function(){var e=this.model.get("options"),t=e.newTitle||cs.l18n("sortable-default");cs.elements.trigger("add:item",e.element,this.proxy,t,e.title_field)},onDestroy:function(){this.drake.destroy()}})},{"./sortable-item":132,"./sortable-item-wide":131}],134:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"text",bindingSelector:"input[type=text]",controlEvents:{"blur input":"notLiveTrigger"},onRender:function(){var e=this.model.get("options");e.placeholder&&this.$("input[type=text]").attr("placeholder",e.placeholder)}})},{}],135:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"textarea",bindingSelector:"textarea",htmlhint:{"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!1,"src-not-empty":!1,"attr-no-duplication":!1,"title-require":!1},onProxyReady:function(){var e=this.model.get("options");e.expandable||!1===e.expandable||(e.expandable=e.controlTitle||!0,this.model.set("options",e))},onRender:function(){var e=this.model.get("options");if(e.placeholder&&this.$("textarea").attr("placeholder",e.placeholder),e.htmlhint){var t=this.$("textarea");t.on("blur",_.bind(function(){var e=_.map(Cornerstone.Vendor.HTMLHint.verify(t.val(),this.htmlhint),function(e){return e.rule.id});_.isEmpty(e)||cs.message.trigger("error",CS.Mn.Renderer.render("utility/htmlhint",{errors:e}),7e3)},this))}},onExpandedOpen:function(){}})},{}],136:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"title",divider:!0,canCompact:!1,bindingSelector:"input[type=text]",ui:{inspect:"button.cs-title-button"},triggers:{"click @ui.inspect":"inspect"},onInspect:function(){cs.events.trigger("inspect:element",this.proxy.getSource())}})},{}],137:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"toggle",binding:{initialize:function(e,t,n){this.$("ul.cs-toggle").on("click",_.bind(function(e){t.set(n.observe,this.$(e.currentTarget).hasClass("off")),this.notLiveTrigger()},this));var o=_.bind(function(e,t){var t=t||this.model.get("default")||!1;this.$(".cs-toggle").toggleClass("on",t).toggleClass("off",!t)},this);o(t,t.get(n.observe)),this.listenTo(t,"change:"+n.observe,o)}}})},{}],138:[function(e,t,n){t.exports=Cornerstone.ControlViews.Base.extend({controlName:"wpselect",bindingSelector:"select",controlEvents:{"change select":"notLiveTrigger"},onBeforeBaseRender:function(){var e=this.model.get("options");this.$select=Backbone.$(e.markup||'<select class="empty"></select>'),this.wpDefault=this.$select.val(),this.$(".cs-wp-select").append(this.$select)}})},{}],139:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-confirm",template:"extra/confirm",defaultConfig:{message:cs.l18n("confirm-message"),allowQuickConfirm:!1,subtext:!1,yep:cs.l18n("confirm-yep"),nope:cs.l18n("confirm-nope"),classes:[],view:null},events:{"click .yep":"acceptDebounce","click .nope":"declineDebounce"},initialize:function(e){this.data=_.clone(this.defaultConfig),this.acceptDebounced=_.debounce(_.bind(this.accept,this),500,!0),this.declineDebounced=_.debounce(_.bind(this.decline,this),500,!0),this.listenTo(cs.confirm,"abort",this.declineDebounce),this.listenTo(cs.confirm,"open",this.open)},acceptDebounce:function(){this.acceptDebounced()},declineDebounce:function(){this.declineDebounced()},open:function(e,t){if(this.context=t||{},this.data=_.extend(_.clone(this.defaultConfig),e),this.data.allowQuickConfirm&&cs.data.request("delete:confirm:key"))return void this.accept();this.render(),this.$el.addClass("active")},serializeData:function(){var e=_.clone(this.data);return _.isFunction(e.message)&&(e.message=e.message.call(this.context)),_.isFunction(e.subtext)&&(e.subtext=e.subtext.call(this.context)),_.isFunction(e.classes)&&(e.classes=e.classes.call(this.context)),_.isFunction(e.yep)&&(e.yep=e.yep.call(this.context)),_.isFunction(e.nope)&&(e.nope=e.nope.call(this.context)),e.classes.unshift("cs-confirm-content"),e.contentClass=e.classes.join(" "),e},accept:function(){_.isFunction(this.data.accept)&&this.data.accept(),this.close()},decline:function(){_.isFunction(this.data.decline)&&this.data.decline(),this.close()},close:function(){this.context=null,this.data={},this.$el.removeClass("active")}})},{}],140:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"button",className:"expand cs-icon",template:!1,attributes:{"data-cs-icon":cs.fontIcon("play-circle")},events:{click:"collapse"},initialize:function(){Backbone.$("body").toggleClass("cs-editor-active",!0).toggleClass("cs-editor-inactive",!1),this.listenTo(cs.extra,"flyout:collapse",function(){Backbone.$("body").toggleClass("cs-editor-active",!1).toggleClass("cs-editor-inactive",!0),cs.extra.trigger("set:collapse",!0)}),this.listenTo(cs.extra,"set:collapse",function(e){cs.extra.reply("get:collapse",e),cs.global.trigger("set:collapse",e)})},collapse:function(e){cs.extra.trigger("set:collapse",!1),Backbone.$("body").toggleClass("cs-editor-active",!0).toggleClass("cs-editor-inactive",!1),cs.extra.trigger("flyout","collapse")}})},{}],141:[function(e,t,n){var o=e("../controls/control-collection");t.exports=CS.Mn.ItemView.extend({className:"cs-expanded-content-outer",template:"extra/expanded-control",events:{"click .cs-expanded-close":"shutdown",keyup:"escape"},initialize:function(e){this.listenTo(cs.extra,"set:collapse",this.collape),this.linkedView=null,this.listenTo(cs.events,"expand:control:open",this.open)},onRender:function(){this.controlView=new o({collection:cs.component("inspector").getExpansionControls()}),this.controlView.render(),this.$(".cs-expanded-content-inner").append(this.controlView.$el)},open:function(){this.controlView.render(),_.defer(_.bind(function(){this.$el.addClass("active"),this.controlView.children.each(function(e){e.triggerMethod("expanded:open")});var e=this.$("textarea");console.log(e),e.height(.6*this.$el.height()),_.delay(function(){e.focusEnd()},100)},this))},escape:function(e){27===e.keyCode&&this.shutdown()},collape:function(e){e&&this.shutdown()},shutdown:function(){this.$el.removeClass("active"),_.delay(function(){cs.events.trigger("expand:close")},200)}})},{"../controls/control-collection":104}],142:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-home",template:"extra/home",initialize:function(){this.listenTo(cs.channel,"save:complete",this.render),this.listenTo(cs.channel,"update:saved:last",this.render)},serializeData:function(){var e=cs.data.request("saved:last");return{savedLastMessage:_.isNull(e)?cs.l18n("home-unsaved"):cs.l18n("home-saved-last").replace("%s",e.fromNow()),savedLastClass:_.isNull(e)||e.isBefore(new Date((new Date).getTime()-12e4))?"warn":"happy",dashboardEditUrl:cs.config("dashboardEditUrl"),frontEndUrl:cs.config("frontEndUrl")}}})},{}],143:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({className:"cs-options",getChildView:function(e){return cs.controlLookup(e.get("type"))},template:_.template('<div id="options-controls"><ul class="cs-controls"></ul></div>'),childViewContainer:"ul.cs-controls",initialize:function(){this.collection=cs.component("options").inspect.controls}})},{}],144:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-respond",template:"extra/respond",events:{"click button":"handleClick"},initialize:function(){cs.extra.reply("width","xl"),this.listenTo(cs.extra,"respond:width",this.setRespond)},handleClick:function(e){this.$("button").removeClass("active"),this.$(".cs-respond-labels div").removeClass("active"),this.$(e.currentTarget).addClass("active");var t=this.$(e.currentTarget).data("respond");cs.extra.reply("width",t),this.$('.cs-respond-labels div[data-respond="'+t+'"]').addClass("active"),cs.extra.trigger("respond:width",t)},onRender:function(){var e=cs.extra.request("width");this.$('button[data-respond="'+e+'"]').addClass("active"),this.$('.cs-respond-labels [data-respond="'+e+'"]').addClass("active")},setRespond:function(e){var t=Backbone.$(".cs-preview");t.removeClass("cs-respond-xl cs-respond-lg cs-respond-md cs-respond-sm cs-respond-xs"),e&&t.addClass("cs-respond-"+e)}})},{}],145:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-saved",template:"extra/save-complete",messages:cs.l18n("save-complete-messages"),serializeData:function(){return{message:this.messages[Math.floor(Math.random()*this.messages.length)]}},onRender:function(){this.$el.css({display:"none",opacity:1}).removeClass("saved-out")},onSaveComplete:function(){if(!cs.config("visualEnhancements"))return void cs.message.trigger("success",cs.l18n("save-complete-simple"),1250);this.$el.css({display:"table"}).addClass("saved-in"),setTimeout(_.bind(function(){this.$el.animate({opacity:0},650,"linear",_.bind(function(){this.$el.css({display:"none",opacity:1}).removeClass("saved-out")},this)).removeClass("saved-in").addClass("saved-out"),setTimeout(_.bind(function(){this.render()},this),1e3)},this),1e3)}})},{}],146:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"li",className:"cs-control-empty",template:"inspector/blank-state"})},{}],147:[function(e,t,n){var o=e("../controls/control-collection"),i=e("../main/base-pane");t.exports=i.extend({name:"inspector",initialize:function(){this.listenTo(cs.navigate,"refresh:inspector:heading",this.updateHeading)},onShowContent:function(){this.Content.show(new o({collection:cs.component("inspector").getPrimaryControls(),emptyView:e("./empty-controls")}))},updateHeading:function(){this.$("h2").text(cs.navigate.request("inspector:heading"))},onOpenSubItem:function(){this.Sub.show(new o({collection:cs.component("inspector").getSecondaryControls(),emptyView:e("./empty-controls")}))},updateSerializeData:function(e){var t=cs.navigate.request("inspector:heading");return t&&(e.heading=t),e}})},{"../controls/control-collection":104,"../main/base-pane":154,"./empty-controls":146}],148:[function(e,t,n){var o=e("../controls/control-collection"),i=e("../main/base-pane");t.exports=i.extend({name:"layout",onShowContent:function(){this.Content.show(new o({collection:cs.component("layout").inspect.primary.controls}))},onOpenSubRows:function(){e("./sub-row/layout-sub-rows");this.Sub.show(new o({collection:cs.component("layout").inspect.secondary.controls}))},onOpenSubTemplates:function(){var t=e("./sub-templates/layout-sub-templates");this.Sub.show(new t)}})},{"../controls/control-collection":104,"../main/base-pane":154,"./sub-row/layout-sub-rows":149,"./sub-templates/layout-sub-templates":150}],149:[function(e,t,n){e("../../controls/control-collection");t.exports=CS.Mn.LayoutView.extend({template:"layout/sub-row/layout-sub-row",className:"cs-pane-content-inner row",regions:{Controls:"#layout-row-controls"},
initialize:function(){},setActiveRow:function(e){},onBeforeShow:function(){}})},{"../../controls/control-collection":104}],150:[function(e,t,n){var o=e("../../controls/control-collection");t.exports=CS.Mn.LayoutView.extend({template:"layout/sub-templates/layout-sub-template",className:"cs-pane-content-inner templates",regions:{Controls:"#layout-template-controls"},initialize:function(){this.listenTo(cs.templates,"control:reset",function(){this.onBeforeShow()})},onBeforeShow:function(){this.Controls.show(new o({collection:cs.component("layout-templates").controls}))}})},{"../../controls/control-collection":104}],151:[function(e,t,n){var o=e("../main/base-pane");t.exports=o.extend({name:"elements",paneTemplate:"library/search",paneEvents:{"keyup #elements-search":"search","search #elements-search":"search"},onShowContent:function(){var t=e("./library-list");cs.search.reply("elements",""),this.Content.show(new t({collection:cs.elementLibrary.get("builder")}))},search:function(){var e=cs.elementLibrary.search("builder",this.$("#elements-search").val().toLowerCase().trim());cs.search.reply("elements",e),cs.search.trigger("elements"),this.$(".cs-pane-content-inner").perfectScrollbar("update")},onNavigate:function(){this.$("#elements-search").focus()}})},{"../main/base-pane":154,"./library-list":153}],152:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({className:"cs-element-stub",template:"library/element-stub",attributes:function(){var e={};return cs.options.request("skeleton:mode")||"function"==typeof MouseEvent||(e.draggable="true"),e},initialize:function(){this.listenTo(cs.events,"toggle:skeleton:mode",function(){this.$el.attr(_.extend({},_.result(this,"attributes")))}),this.listenTo(cs.global,"drag:exit",function(){this.clone&&(Backbone.$(this.clone).hide(),Backbone.$("#preview").one("mouseleave",_.bind(function(){cs.global.trigger("drag:resume")},this)))}),this.listenTo(cs.global,"drag:resume",function(){this.clone&&Backbone.$(this.clone).show()})},serializeData:function(){return _.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{icon:cs.icon(this.model.get("icon"))})},events:{"dragstart.h5s":"setData","dragend.h5s":"endDrag","dragula:start":"dragStart","dragula:cloned":"watchClone"},watchClone:function(e,t){Backbone.$(t).on("dragula:dragend",function(){cs.global.trigger("incoming:element:end")})},endDrag:function(e){cs.global.trigger("dragging",!1)},dragStart:function(e,t){this.clone=t,cs.global.trigger("incoming:element",this.model.get("name"))},setData:function(e){cs.global.trigger("dragging",!0,!0),cs.global.trigger("incoming:element",this.model.get("name"),!0);var t=e.originalEvent.dataTransfer;t.effectAllowed="copy",t.dropEffect="copy";var n=JSON.stringify({action:"create",_type:this.model.get("name")}),o=this.$("svg");o.length&&"function"==typeof t.setDragImage&&t.setDragImage(o[0],25,25),t.setData("text",n)}})},{}],153:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({className:"cs-elements",childView:e("./element-stub"),childViewContainer:".cs-pane-section ul",initialize:function(){this.listenTo(cs.search,"elements",this.render)},onBeforeRender:function(){this.searchResults=cs.search.request("elements")||""},viewComparator:function(e){var t=_.isArray(this.searchResults)?this.searchResults:[];return _.indexOf(t,e.get("name"))},filter:function(e,t,n){return!this.searchResults||""==this.searchResults||_.contains(this.searchResults,e.get("name"))}})},{"./element-stub":152}],154:[function(e,t,n){var o=CS.Mn.LayoutView.extend({name:"undefined",className:function(){return"cs-pane "+this.name},template:"main/pane",paneTemplate:!1,regions:{Content:"#content",Sub:"#sub"},events:function(){return _.extend({"click button.cs-builder-sub-back":"back"},this.paneEvents)},paneEvents:{},onBaseOpenSub:function(e){this.Sub.empty(),cs.navigate.trigger("subpane:opened",this.name+":"+e),this.triggerMethod("open:sub"),this.triggerMethod("open:sub:"+e),this.$(".cs-builder-sub").addClass("active").find(".cs-pane-content-inner").perfectScrollbar({suppressScrollX:!0,scrollYMarginOffset:25})},onBaseCloseSub:function(){this.$(".cs-builder-sub").removeClass("active"),this.Sub&&this.Sub.show(new Cornerstone.Mn.ItemView({template:_.template(this.$("#sub").html())})),this.triggerMethod("close:sub")},back:function(){cs.navigate.trigger(this.name+":home")},onBeforeShow:function(){this.Sub.empty(),this.Content.empty(),this.triggerMethod("show:content")},serializeData:function(){var e=_.extend(CS.Mn.LayoutView.prototype.serializeData.apply(this,arguments),{heading:cs.l18n(this.name+"-heading"),returnButtonText:cs.l18n(this.name+"-return"),paneTemplate:this.paneTemplate,name:this.name});return _.isFunction(this.updateSerializeData)?this.updateSerializeData(e):e}});t.exports=o},{}],155:[function(e,t,n){var o=e("./header"),i=e("./footer"),s=e("../extra/expansion"),r=e("./skeleton");t.exports=CS.Mn.LayoutView.extend({template:"main/editor",regions:{Header:"#header",Pane:"#pane",Footer:"#footer",Expansion:"#expand",Skeleton:"#skeleton"},panes:{layout:e("../layout/layout"),elements:e("../library/element-library"),inspector:e("../inspector/inspector"),settings:e("../settings/settings")},initialize:function(){this.listenTo(cs.navigate,"pane",this.changePane),this.listenTo(cs.navigate,"scrollbar:update",this.scrollbarUpdate),this.listenTo(cs.options,"editor:position",this.setEditorPosition),this.listenTo(cs.message,"notice",this.growlNotice),this.listenTo(cs.message,"success",this.growlSuccess),this.listenTo(cs.message,"error",this.growlError),this.listenTo(cs.data,"control:not:live",this.controlNotLive),this.sentControlMessages=[],Backbone.$("#cornerstone").on("mouseenter mouseleave",".cs-sortable li.sortable-item",_.bind(this.sortableHover,this)),"settings"==localStorage.CornerstonePane&&(cs.data.reply("saved:last",Cornerstone.Vendor.moment()),cs.channel.trigger("update:saved:last")),this.listenTo(cs.events,"preview:no-pointer",this.togglePreviewPointerEvents),this.listenTo(cs.events,"skeleton:dragging",this.toggleDragging),this.keybindingToggleClasses()},onRender:function(){var e=localStorage.CornerstonePane;localStorage.CornerstonePane=!1,cs.data.reply("scrollbar:width",this.getScrollbarWidth()),this.changePane(_.has(this.panes,e)?e:"layout"),this.Header.show(new o),this.Footer.show(new i),this.Expansion.show(new s),this.Skeleton.show(new r({model:cs.post.data})),this.Expansion.$el.detach(),this.$el.after(this.Expansion.$el),this.Skeleton.$el.detach(),this.$el.after(this.Skeleton.$el),this.setEditorPosition()},changePane:function(e,t){cs.tooltips.trigger("kill"),this.activePane!=e&&(cs.navigate.trigger("pane:switch"),this.Pane.show(new this.panes[e])),this.activePane=e,this.Pane.currentView.triggerMethod("navigate"),cs.navigate.reply("active:pane",this.activePane),t?this.Pane.currentView.triggerMethod("base:open:sub",t):this.Pane.currentView.triggerMethod("base:close:sub"),this.$(".cs-pane-content-inner").perfectScrollbar({suppressScrollX:!0,scrollYMarginOffset:25})},sortableHover:function(e){Backbone.$(e.currentTarget).toggleClass("hover","mouseenter"===e.type)},controlNotLive:function(e,t){_.contains(this.sentControlMessages,e)||(this.sentControlMessages.push(e),cs.message.trigger("notice",cs.l18n(t)))},growlNotice:function(e,t){this.growlMessage({title:cs.l18n("message-notice"),style:"notice"},arguments)},growlSuccess:function(){this.growlMessage({title:cs.l18n("message-success"),style:"success"},arguments)},growlError:function(){this.growlMessage({title:cs.l18n("message-error"),style:"error"},arguments)},growlMessage:function(e,t){var n={message:"",duration:1e4};t&&t[0]&&(n.message=t[0]),t&&t[1]&&(n.duration=t[1]),t&&t[2]&&(n.title=t[2]);var o=_.extend(e,n);o.duration<5e3&&(o.close=""),Backbone.$.growl(o);var i=cs.data.request("scrollbar:width");i>0&&Backbone.$("#growls").css({right:i})},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var o=n.offsetWidth;return e.parentNode.removeChild(e),t-o},scrollbarUpdate:function(){this.$(".cs-pane-content-inner").perfectScrollbar("update")},setEditorPosition:function(){Backbone.$("#cornerstone").toggleClass("cs-right","right"==cs.options.request("editor:position"))},keybindingToggleClasses:function(){this.listenTo(cs.events,"delete:confirm:key",function(e){Backbone.$("body").toggleClass("cs-delete-confirm",e)})},togglePreviewPointerEvents:function(e){Backbone.$("#preview").toggleClass("no-pointer")},toggleDragging:function(e){Backbone.$("body").toggleClass("cs-hide-cursor",e)}})},{"../extra/expansion":141,"../inspector/inspector":147,"../layout/layout":148,"../library/element-library":151,"../settings/settings":179,"./footer":156,"./header":157,"./skeleton":160}],156:[function(e,t,n){var o=e("../extra/expand"),i=e("../extra/confirm"),s=e("../extra/home"),r=e("../extra/respond"),a=(e("../extra/options"),e("../extra/save-complete"));t.exports=CS.Mn.ItemView.extend({template:"main/footer",ui:{home:"button.home",collapse:"button.collapse",helptext:"button.help-text",skeleton:"button.skeleton-mode",respond:"button.respond",save:"button.save"},events:{"click @ui.home":"toggleHome","click @ui.collapse":"toggleCollapse","click @ui.helptext":"toggleHelpText","click @ui.skeleton":"toggleSkeletonMode","click @ui.respond":"toggleRespond","click @ui.save":"save"},initialize:function(){this.listenTo(cs.extra,"flyout:updated",this.toggleMode),this.listenTo(cs.data,"save:success",this.saveComplete),this.listenTo(cs.data,"save:error",this.saveComplete),this.listenTo(cs.tooltips,"kill",this.killTooltip),Backbone.$("#cornerstone").on("mouseenter mouseleave","[data-tooltip-message]",_.bind(this.toggleTooltip,this)),this.modules={home:new s,expand:new o,respond:new r,save:new a,confirm:new i},this.panels=_.pick(this.modules,"home","expand","respond","save","confirm"),cs.extra.on("collapse",function(e){cs.global.trigger("collapse","on"==e)}),this.panelMode="none",this.listenTo(cs.extra,"flyout",function(e,t){var n=e!=this.panelMode;cs.extra.trigger("flyout:updated",e,n,this.panelMode),e!=this.panelMode&&cs.extra.trigger("flyout:"+e),this.panelMode=n?e:"none";var o="none"!=this.panelMode,e=this.panelMode;o?_.delay(function(){Backbone.$(".cs-editor").addClass("flyout").attr("data-flyout",e),cs.navigate.trigger("scrollbar:update")},650):(Backbone.$(".cs-editor").removeClass("flyout").attr("data-flyout","none"),cs.navigate.trigger("scrollbar:update"))}),this.listenTo(cs.extra,"toggle",function(e){_.defer(_.bind(function(){this.$('button[data-toggle="'+e+'"]').toggleClass("active",cs.options.request(e))},this))}),this.listenTo(cs.global,"preview:failure",function(){this.$("button.skeleton-mode").prop("disabled",!0)})},onRender:function(){var e=this.$(".cs-editor-extra");_.each(this.modules,function(t){e.append(t.render().$el)}),this.$("button[data-toggle]").each(function(){var e=Backbone.$(this);e.toggleClass("active",cs.options.request(e.attr("data-toggle")))})},toggleTooltip:function(e){var t=Backbone.$(e.currentTarget).data("tooltip-message"),n="mouseenter"===e.type&&t&&cs.options.request("help:text");if(n&&this.$(".cs-tooltip-inner").text(t),this.tooltipTimer)return window.clearTimeout(this.tooltipTimer),void(this.tooltipTimer=void 0);this.tooltipTimer=window.setTimeout(_.bind(function(){this.tooltipTimer=void 0,this.$(".cs-tooltip-outer").toggleClass("active",n)},this),n?333:250)},killTooltip:function(){this.tooltipTimer=void 0,this.$(".cs-tooltip-outer").toggleClass("active",!1)},toggleHome:function(){cs.extra.trigger("flyout","home")},toggleCollapse:function(){cs.extra.trigger("flyout","collapse")},toggleSkeletonMode:function(){cs.extra.trigger("toggle","skeleton:mode")},toggleRespond:function(e){cs.extra.trigger("flyout","respond")},save:function(){this.$("button.save").prop("disabled",!0),cs.events.trigger("action:save")},saveComplete:function(){this.$("button.save").removeProp("disabled"),this.panels.save.triggerMethod("save:complete")},saveError:function(){this.$("button.save").removeProp("disabled"),cs.message.trigger("error",cs.l18n("save-error"),3e4)},toggleMode:function(e,t,n){this.$("nav button.has-flyout").removeClass("active"),_.each(this.panels,function(e){e.$el.removeClass("active")}),t&&(this.$("button.has-flyout."+e).addClass("active"),this.$(".cs-editor-extra .cs-"+e).addClass("active"))}})},{"../extra/confirm":139,"../extra/expand":140,"../extra/home":142,"../extra/options":143,"../extra/respond":144,"../extra/save-complete":145}],157:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({tagName:"nav",template:"main/header",events:{"click button.layout":"layout","click button.inspector":"inspector","click button.elements":"elements","click button.settings":"settings"},initialize:function(){this.listenTo(cs.navigate,"pane",this.changePane)},onRender:function(){this.changePane(cs.navigate.request("active:pane"))},layout:function(){cs.navigate.trigger("pane","layout")},inspector:function(){cs.navigate.trigger("pane","inspector")},elements:function(){cs.navigate.trigger("pane","elements")},settings:function(){cs.navigate.trigger("pane","settings")},changePane:function(e){this.$("."+e).addClass("active").siblings().removeClass("active")}})},{}],158:[function(e,t,n){t.exports=CS.Mn.ItemView.extend({template:"observer",className:"cs-observer",initialize:function(){this.lazyRender=_.debounce(this.renderNow,100),this.throttleTimer=50,this.observing=null,this.tooltipText="Element",this.canPreview=!0,this.dimensionTarget=null,this.listenTo(cs.observer,"start",this.observeStart),this.listenTo(cs.observer,"end",this.observeEnd),this.listenTo(cs.global,"kill:observer",this.kill),this.listenTo(cs.observer,"kill",this.kill),this.$wrapper=Backbone.$("#cs-content")},setObserver:function(e,t){if(clearInterval(this.renderInterval),this.coordinates={top:0,left:0,height:0,width:0},this.observing=e,this.observing){var n=e.model.get("_type"),o=cs.elementLibrary.lookup(n),i=o.get("flags");this.canPreview=i.can_preview||!0,this.dimensionTarget=i.dimension_target||null,this.setTooltip(e.model,n)}t?this.renderNow():this.lazyRender()},setTooltip:function(e,t){var n;switch(t){case"section":n=cs.l18n("section-format").replace("%s",e.get("title"));break;case"row":n=cs.l18n("row-numeric").replace("%s",e.getIndex()+1);break;case"column":n=cs.l18n("column-format").replace("%s",e.get("size"));break;default:n=e.definition.get("ui").title}this.canPreview||(n=cs.l18n("no-preview").replace("%s",n)),this.tooltipText=n},observeStart:function(e,t){(_.isNull(this.observing)||this.observing.cid!=e.cid)&&this.setObserver(e,t||!1)},observeEnd:function(e,t){_.isNull(this.observing)||this.observing.cid!=e.cid||this.setObserver(null,t||!1)},kill:function(){this.setObserver(null,!0)},renderNow:function(){if(clearInterval(this.renderInterval),_.isNull(this.observing)||cs.observer.request("get:collapse"))return void this.$el.hide();this.renderLoop(),this.renderInterval=setInterval(_.bind(this.renderLoop,this),this.throttleTimer)},renderLoop:function(){var e=this.dimensionTarget?this.observing.$el.find(this.dimensionTarget):this.observing.$el;e.length<1&&(e=this.observing.$el);var t=e.offset(),n=e.outerHeight(),o=e.outerWidth();this.coordinates.width==o&&this.coordinates.height==n||t&&(this.coordinates={top:t.top-this.$wrapper.offset().top,left:t.left-this.$wrapper.offset().left,width:o,height:n},this.render(),this.$el.css(this.coordinates),this.coordinates.top<25&&this.$(".cs-observer-tooltip").removeClass("top"))},onRender:function(){if(_.isNull(this.observing)||cs.observer.request("get:collapse"))return void this.$el.hide();this.$el.toggleClass("cs-observer-no-preview",!this.canPreview),this.$el.show()},serializeData:function(){return _.extend(CS.Mn.ItemView.prototype.serializeData.apply(this,arguments),{tooltip:this.tooltipText})}})},{}],159:[function(e,t,n){t.exports=Cornerstone.Mn.CompositeView.extend({template:!1,emptyView:CS.Mn.ItemView.extend({className:"cs-empty-rows",template:"empty-rows"}),getChildView:function(e){return cs.component("view-loader").elementLookup(e.get("_type"))},initialize:function(){this.collection=this.model.elements,this.listenToOnce(cs.global,"preview:primed",function(){this.$el.removeClass("cs-preview-loading")}),this.listenTo(this.collection,"sort",this.render),this.observerView=new(e("./observer.js")),this.listenTo(cs.global,"set:collapse",this.toggleCollapse),this.listenTo(cs.global,"dragging",this.toggleDragging),this.listenTo(cs.preview,"dragging",this.toggleDragging),this.listenTo(cs.preview,"autoscroll",_.debounce(_.bind(this.autoScroll,this),250,!0)),this.drake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&(e.classList.contains("x-column")||e.classList.contains("cs-indicator-container"))},moves:function(e,t,n,o){return!!e.classList&&(e.classList.contains("cs-preview-element-wrapper")||e.classList.contains("cs-indicator"))},accepts:function(e,t,n,o){return!!e.classList&&(e.classList.contains("cs-preview-element-wrapper")||e.classList.contains("cs-indicator"))},offset:function(e,t,n){return e.x=0,e.y=0,e},copy:!1,revertOnSpill:!0,mirrorContainer:this.el}),this.drake.on("drag",function(e,t){if(e.classList&&e.classList.contains("cs-indicator")){if(this.incoming){var n=new MouseEvent("mousedown",{buttons:1,which:1,view:window,bubbles:!0,cancelable:!0,synthetic:!0});e.dispatchEvent(n,!0)}this.incoming=!1}else Backbone.$(e).trigger("dragula:lift"),Backbone.$(t).trigger("dragula:lift"),cs.global.trigger("drag:existing:start");cs.preview.trigger("dragging",!0)}),this.listenTo(cs.global,"drag:existing:end",function(){cs.preview.trigger("dragging",!1)}),this.drake.on("dragend",function(e){cs.preview.trigger("dragging",!1),Backbone.$(e).trigger("dragula:dragend")}),this.drake.on("cancel",function(e,t,n){Backbone.$(n).trigger("dragula:cancel"),Backbone.$(t).trigger("dragula:cancel")}),this.drake.on("drop",function(e,t,n,o){Backbone.$(t).trigger("dragula:receive",[e,n,o])}),this.drake.on("over",function(e,t,n){Backbone.$(t).trigger("dragula:over"),Backbone.$(n).trigger("dragula:source:over")}),this.drake.on("shadow",function(e,t,n){Backbone.$(n).trigger("dragula:shadow")}),this.drake.on("out",function(e,t,n){Backbone.$(t).trigger("dragula:out")}),this.drake.on("cloned",_.bind(function(e,t,n){"mirror"==n&&(this.$ghost=Backbone.$(e),this.$ghost.addClass("cs-indicator"),Backbone.$(t).trigger("dragula:mirror",this.$ghost))},this)),cs.$indicator=Backbone.$('<div class="cs-indicator"></div>'),document.addEventListener("dragleave",function(e){var t;t=e.target.classList&&e.target.classList.contains("x-column")?Backbone.$(e.target):Backbone.$(e.target).parent(".x-column"),t.length>0&&!t.csPointInsideElement(e.clientX,e.clientY)&&cs.$indicator.detach()},!1);var t=_.bind(function(){cs.global.trigger("stop:dragging"),cs.preview.trigger("dragging",!1),cs.$ic[0].left=0,cs.$ic[0].top=0,document.removeEventListener("mouseup",t,!1)},this);this.listenTo(cs.global,"drag:resume",function(e){this.$ghost&&this.$ghost.hide(),document.addEventListener("mousemove",n,!1)});var n=_.bind(function(e){this.$ghost&&this.$ghost.show(),cs.global.trigger("drag:exit"),document.removeEventListener("mousemove",n,!1)},this);this.listenTo(cs.global,"incoming:element",function(e,t){cs.incoming={data:{_type:e},options:{},cid:"new:"+e},cs.render.preRender(e),cs.$indicator.empty().detach(),cs.$indicator.removeAttr("style"),cs.$indicator.append(Backbone.$(cs.elementIcon(e))),t||document.addEventListener("mousemove",o,!1)});var o=_.bind(function(e){cs.global.trigger("drag:exit"),cs.$indicator.detach(),cs.$ic.append(cs.$indicator),cs.preview.trigger("dragging",!0),this.drake.incoming=!0,this.drake.start(cs.$indicator[0]),document.removeEventListener("mousemove",o,!1),document.addEventListener("mouseup",t,!1)},this);this.on("drag:cancel",function(){document.removeEventListener("mousemove",o,!1),this.drake.cancel()}),cs.$ic=Backbone.$('<div class="cs-indicator-container"></div>')},onBeforeRender:function(){this.scrollTopCache=Backbone.$("body").scrollTop(),Backbone.$("a").click(function(e){cs.preview.trigger("click:theme:a",e)}).attr("target","_blank")},onRender:function(){this.$el.append(cs.$ic),Backbone.$("html,body").scrollTop(this.scrollTopCache),this.$el.toggleClass("cs-editor-active",!0),this.$el.toggleClass("cs-editor-inactive",!1),this.$el.append(this.observerView.render().$el),_.defer(function(){cs.preview.trigger("responsive:text")})},toggleCollapse:function(e){this.$el.toggleClass("cs-editor-active",!e),this.$el.toggleClass("cs-editor-inactive",e)},toggleDragging:function(e,t){e||(cs.$indicator.detach(),t||this.trigger("drag:cancel")),this.$el.toggleClass("gu-unselectable",e),Backbone.$("body").toggleClass("cs-hide-cursor",e).toggleClass("cs-indicate-invisible",e)},autoScroll:function(e){if(!e.$el.visible(!0)){var t=Backbone.$(cs.config("scrollTopSelector")),n=t.length>0?t.outerHeight():0,o=e.$el.offset().top-n-27;Backbone.$("html,body").animate({scrollTop:o},700,"swing")}},onDestroy:function(){this.drake.destroy()}})},{"./observer.js":158}],160:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({className:"cs-skeleton-content-outer",template:"main/skeleton",childViewContainer:".cs-skeleton-items",getChildView:function(e){return cs.component("view-loader").skeletonLookup(e.get("_type"))},events:{"dragula:receive":"_receiveElement"},initialize:function(){this.collection=this.model.elements,this.hoverRender=_.debounce(this._hoverRender,45),this.hoverTarget=null,this.listenTo(this.collection,"sort",this.render);var t=e("../../utility/dragula-handlers");this.setupElementDragging(t),this.setupRowDragging(t),this.setupSectionDragging(t),this.listenTo(cs.events,"skeleton:dragging",this.toggleDragging),this.listenTo(cs.global,"stop:dragging",function(){this.elementDrake.cancel(),cs.global.trigger("dragging",!1)}),this.listenTo(cs.events,"skeleton:hover",this.hover),this.listenTo(cs.global,"drag:existing:start",function(){function e(){document.removeEventListener("mouseup",e),_.defer(function(){cs.global.trigger("drag:existing:end")})}Backbone.$("#preview");document.addEventListener("mouseup",e)})},setupElementDragging:function(e){this.elementDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&(e.classList.contains("cs-skeleton-container-column")||e.classList.contains("cs-elements"))},moves:function(e,t,n,o){return!!e.classList&&(e.classList.contains("cs-element-stub")&&!e.attributes.draggable||e.classList.contains("cs-skeleton-item")&&!e.classList.contains("is-child")&&!e.classList.contains("layout"))},accepts:function(e,t,n,o){return(!t.classList||!t.classList.contains("cs-elements"))&&(!!e.classList&&(e.classList.contains("cs-element-stub")||e.classList.contains("cs-skeleton-item")&&!e.classList.contains("is-child")&&!e.classList.contains("layout")))},copy:function(e,t){return!!e.classList&&e.classList.contains("cs-element-stub")},offset:function(e,t,n){return n.classList&&(n.classList.contains("cs-element-stub")&&(e.x=0,e.y=0),n.classList.contains("cs-skeleton-item")&&(e.x=0,e.y=Backbone.$(n).height()/2)),e},mirrorContainer:Backbone.$("#before")[0],revertOnSpill:!0});this.elementDrake.on("cloned",e.editorCloned),this.elementDrake.on("dragend",e.skeletonEnd),this.elementDrake.on("drag",e.skeletonStart),this.elementDrake.on("cancel",e.cancel),this.elementDrake.on("remove",e.cancel),this.elementDrake.on("drop",e.drop),this.elementDrake.on("over",e.over),this.elementDrake.on("shadow",e.shadow),this.elementDrake.on("out",e.out),this.listenTo(cs.global,"incoming:element",function(e){cs.incoming={data:{_type:e},options:{},cid:"new:"+e}})},setupSectionDragging:function(e){this.sectionDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&e.classList.contains("cs-skeleton-items")},moves:function(e,t,n,o){return Backbone.$(n).is(".cs-skeleton-item.section > .cs-skeleton-handle > .cs-skeleton-title")},accepts:function(e,t,n,o){return Backbone.$(e).is(".cs-skeleton-item.section")},offset:function(e,t,n){return n.classList&&n.classList.contains("cs-skeleton-item")&&(e.y=Backbone.$(n).height()/2),e},mirrorContainer:Backbone.$("#before")[0]}),this.sectionDrake.on("dragend",e.skeletonEnd),this.sectionDrake.on("drag",e.skeletonStart),this.sectionDrake.on("cancel",e.cancel),this.sectionDrake.on("remove",e.cancel),this.sectionDrake.on("drop",e.drop),this.sectionDrake.on("over",e.over),this.sectionDrake.on("out",e.out)},setupRowDragging:function(e){this.rowDrake=Cornerstone.Vendor.dragula({isContainer:function(e){return!!e.classList&&e.classList.contains("cs-skeleton-container-section")},moves:function(e,t,n,o){return Backbone.$(n).is(".cs-skeleton-item.row > .cs-skeleton-handle > .cs-skeleton-title")&&Backbone.$(e).siblings().length>0},accepts:function(e,t,n,o){return Backbone.$(e).is(".cs-skeleton-item.row")},offset:function(e,t,n){return n.classList&&n.classList.contains("cs-skeleton-item")&&(e.y=Backbone.$(n).height()/2),e},mirrorContainer:Backbone.$("#before")[0],revertOnSpill:!0}),this.rowDrake.on("dragend",e.skeletonEnd),this.rowDrake.on("drag",e.skeletonStart),this.rowDrake.on("cancel",e.cancel),this.rowDrake.on("remove",e.cancel),this.rowDrake.on("drop",e.drop),this.rowDrake.on("over",e.over),this.rowDrake.on("out",e.out)},onRender:function(){this.$(".cs-skeleton-content-inner").perfectScrollbar({scrollYMarginOffset:10,wheelPropagation:!0}),_.defer(_.bind(this.deferRender,this))},deferRender:function(){this.$(".cs-skeleton-content-inner").perfectScrollbar("update")},windowResize:function(){},toggleDragging:function(e,t){this.isDragging=e,this.$el.toggleClass("gu-unselectable",e);var t=t||"";if(this.$el.removeClass("dragging-section dragging-row dragging-column dragging-element"),this.$el.attr("data-element-type",t),e){var n=_.contains(["section","row","column"],t)?t:"element";this.$el.addClass("dragging-"+n),this.setHover(null)}else this.elementDrake.cancel(),this.rowDrake.cancel(),this.sectionDrake.cancel()},hover:function(e,t){if(this.isDragging)return this.setHover(null);if(e){if(!_.isNull(this.hoverTarget)&&this.hoverTarget.cid==t.cid)return;this.setHover(t)}else{if(_.isNull(this.hoverTarget)||this.hoverTarget.cid!=t.cid)return;this.setHover(null)}},setHover:function(e){this.hoverTarget=e,this.hoverRender()},_hoverRender:function(e){cs.events.trigger("skeleton:hover:toggle",this.hoverTarget&&this.hoverTarget.cid?this.hoverTarget.cid:null)},_receiveElement:function(e,t,n,o){e.stopPropagation(),_.defer(_.bind(this._placeElement,this),o?Backbone.$(o).index()-1:this.collection.length)},_placeElement:function(e){if(cs.incoming){var t=_.isFunction(cs.incoming.toJSON)?cs.incoming.toJSON():cs.incoming.data;this.model.elements.create(t,_.clone(cs.incoming.options),{position:e,replace:cs.incoming,after:function(e){cs.incoming=!1}})}}})},{"../../utility/dragula-handlers":94}],161:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({toggle:function(e){var t=this.$(e.target),n=this.$(t.attr("data-target")||e.preventDefault()||t.attr("href")),o=n.data("bs.collapse"),i=o?"toggle":t.data(),s=t.attr("data-parent"),r=s&&this.$(s);o&&o.transitioning||(r&&r.find('[data-toggle="collapse"][data-parent="'+s+'"]').not(t).addClass("collapsed"),t[n.hasClass("in")?"addClass":"removeClass"]("collapsed")),jQuery.fn.collapse.call(n,i)},onClickBeforeInspect:function(e){e.target.className.indexOf("x-accordion-toggle")>=0&&this.toggle(e)}})},{}],162:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({elementEvents:{"click button.close":"closeButton"},closeButton:function(e){e.preventDefault()}})},{}],163:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({remoteRender:!0,template:!1,childViewContainer:"@ui.root",className:"cs-preview-element-wrapper",attributes:function(){return{"data-element":this.model.get("_type")}},draggable:!0,htmlhint:{"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!1,"id-unique":!1,"src-not-empty":!1,"attr-no-duplication":!1,"title-require":!1},events:function(){var e={"click a":"_preventLinkout"},t=_.result(this,"inspectable");(t||_.isUndefined(t))&&(e=_.extend(e,{click:"_click",mouseover:"_observeStart",mouseout:"_observeEnd"},this._setupAutoFocus()));var n=_.result(this,"draggable");return(n||_.isUndefined(n))&&(e=_.extend(e,{"dragula:lift":"_dragLift","dragula:dragend":"_dragEnd","dragula:mirror":"_dragMirror"})),_.extend(e,_.result(this,"elementEvents")||{})},getChildView:function(e){return cs.component("view-loader").elementLookup(e.get("_type"))},constructor:function(e){CS.Mn.CompositeView.apply(this,arguments),this.ignoredAttributes=["rank"],this._setupChildren(),this._repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),2),this._updateMarkup=_.debounce(_.bind(this.__updateMarkup,this),2),this.model.collection&&(this.modelIndex=this.model.collection.indexOf(this.model)),this.listenTo(this.model,"change",this._updateMarkupOnChange),this.listenTo(this.model,"remote:render",this._repaint),this.on("render",this._baseRender),this.listenTo(this.model,"observe:start",function(){cs.observer.trigger("start",this)}),this.listenTo(this.model,"observe:end",function(){cs.observer.trigger("end",this)}),this.on("render:template",this._onRenderTemplate),this.on("template:data:ready",function(e){this.once("render",function(){this.triggerMethod("construct:element",e)})}),this.triggerMethod("element:init"),this.listenTo(cs.global,"autoscroll",function(e){this.model&&this.model.cid==e&&cs.preview.trigger("autoscroll",this)}),this.listenTo(cs.events,"preview:resize",this.exposeVisibility)},_setupChildren:function(){this.model.definition.get("flags").dynamic_child&&(this.collection=this.model.elements,this.ignoredAttributes.push("elements")),this.model.definition.get("flags").child&&this.listenTo(this.model,"parent:change",function(){this._updateMarkup()})},resortView:function(){this._updateMarkup()},_updateMarkupOnChange:function(e){_.isEmpty(_.omit(e.changed,this.ignoredAttributes))||this._updateMarkup()},__updateMarkup:function(e){if(!this.remoteRender)return e?this.render():this._repaint();cs.render.triggerMethod("queue",this.model)},serializeData:function(){var e=CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),t=_.result(this,"elementData")||{};return _.defaults(_.extend(e,t),this.model.getDefaults())},attachElContent:function(e){return this.remoteRender&&(e=cs.render.getCache(this.model),_.isFunction(e)&&(e=CS.Mn.Renderer.render(e,this.serializeData()))),e&&(this.model.definition.get("flags").htmlhint&&(_.isEmpty(Cornerstone.Vendor.HTMLHint.verify(e,this.htmlhint))||(e=Backbone.$("<div>").text(e).html())),this.$el.html(e)),this},exposeVisibility:function(){var e=this.$el.outerHeight()<=0;this.$el.toggleClass("cs-invisible",e),this.triggerMethod("visibility:exposed",e)},onChildviewVisibilityExposed:function(e){this.exposeVisibility()},bindUIElements:function(){this.ui||(this.ui={}),CS.Mn.CompositeView.prototype.bindUIElements.apply(this,arguments);var e=this.$(".cs-inception");this.ui.root=e.length?e.parent():this.$el},_onRenderTemplate:function(){var e=this.$(".cs-inception");e.length&&e.detach()},_baseRender:function(){this.triggerMethod("before:shortcode:init"),cs.preview.trigger("responsive:text",this),this.triggerMethod("after:element:render"),this.remoteRender&&_.defer(_.bind(function(){this._emptyDetection()&&this.triggerMethod("render:empty")},this),0),_.defer(_.bind(this.exposeVisibility,this))},onRenderEmpty:function(){this._renderEmpty()},_renderEmpty:function(){var e=Backbone.$(CS.Mn.Renderer.render("empty-element",this.serializeData()));this.$el.append(e)},_emptyDetection:function(){
return _.isFunction(this.emptyDetection)?this.emptyDetection():!this.model.definition.get("flags").empty&&!this.model.definition.get("flags").no_height_check&&this.$el.shadowHeight()<1},_setupAutoFocus:function(){var e={},t=this.model.definition.get("ui");return t.autofocus?(_.each(t.autofocus,function(t,n){e["click "+t]=function(){cs.global.trigger("auto:focus",n)}}),e):e},_preventLinkout:function(e){e.preventDefault()},_click:function(e){this.triggerMethod("click:before:inspect",e),e.stopPropagation(),cs.global.trigger("inspect",this.model)},_dragLift:function(e){this.$el.addClass("cs-dragging"),cs.incoming=this.model},_dragEnd:function(e){this.$el.removeClass("cs-dragging")},_dragMirror:function(e,t){Backbone.$(t).empty().append(Backbone.$(cs.elementIcon(this.model.get("_type"))))},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start")},_observeEnd:function(e){this.model.trigger("observe:end")}})},{}],164:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onAfterElementRender:function(){_.defer(_.bind(function(){this.$(".x-card-outer").trigger("cs:setcardheight")},this)),this.$("a").click(function(e){e.preventDefault()})}})},{}],165:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,elementEvents:{"click svg.cs-custom-icon":"clickIcon","dragula:send":"sendElement","dragula:receive":"receiveElement","dragula:cancel":"dragCancel","dragula:over":"dragOver","dragula:out":"dragOut","dragula:shadow":"dragShadow","dragula:lift":"dragLift","dragula:source:over":"dragSourceOver","drop.h5s":"receiveNew","dragenter.h5s":"dragEnterH","dragover.h5s":"dragOverH"},initialize:function(){this.checkDragOverStart=_.once(this.dragOverStart),this.checkDragLeave=_.debounce(this.dragLeave,50),this.detachIndicator=_.debounce(this._detachIndicator,50),this.throttleSetDragIndicator=_.throttle(_.bind(this.setDragIndicator,this),125,{leading:!1,trailing:!1}),this.legacyBefore=null,this.$empty=Backbone.$(cs.template("empty-column")())},receiveElement:function(e,t,n,o){cs.observer.trigger("kill");var i=!_.isFunction(cs.incoming.toJSON),s=i?cs.incoming.data:cs.incoming.toJSON(),r=cs.incoming.cid,a=this.model.elements.create(s,_.clone(cs.incoming.options),{position:o?Backbone.$(o).index()-1:this.collection.length,replace:cs.incoming,after:function(e){cs.render.shadow(e,r)}});i&&cs.global.trigger("inspect",a),this.emptyClassCheck()},receiveNew:function(e){this.receiveElement(null,null,null,this.legacyBefore),cs.preview.trigger("dragging",!1)},dragOver:function(){this.$el.toggleClass("cs-receiving",!0)},dragOut:function(){this.$el.toggleClass("cs-receiving",!1)},dragCancel:function(){this.$empty.detach(),this.$el.removeClass("cs-empty")},dragShadow:function(){1===this.collection.length&&this.$el.children().length<=1&&this.emptyClassCheck(!0)},clickIcon:function(e){e.stopPropagation(),cs.global.trigger("nav:kylelements")},onRemoveChild:function(){this.emptyClassCheck()},onAddChild:function(e){this.emptyClassCheck(),e.triggerMethod("added:to:column")},emptyClassCheck:function(e){this.$empty.detach(),this.$el.removeClass("cs-empty"),(this.collection.isEmpty()||e)&&(this.$el.append(this.$empty),this.$el.addClass("cs-empty"),this.$(".cs-empty-column").removeAttr("style"))},dragOverStart:function(){this.$el.toggleClass("cs-receiving",!0),cs.observer.trigger("in",this,!0)},dragEnterH:function(){this.checkDragOverStart(),this.checkDragLeave()},dragOverH:function(e){this.checkDragOverStart(),this.checkDragLeave(),e.originalEvent.preventDefault&&e.originalEvent.preventDefault(),this.throttleSetDragIndicator(e.originalEvent.pageY)},dragLeave:function(){this.$el.toggleClass("cs-receiving",!1),this.checkDragOverStart=_.once(this.dragOverStart)},setDragIndicator:function(e){if(cs.$indicator.detach(),!(this.collection.length<=0)){var t=0,n=this.collection.find(_.bind(function(n){var o=this.children.findByModel(n);return!(o.$el.shadowHeight<1)&&(!(e>o.$el.offset().top+o.$el.outerHeight()/2)||(++t,!1))},this));if(this.legacyBefore=null,this.collection.length==t)this.$el.append(cs.$indicator);else{var o=this.children.findByModel(n);this.legacyBefore=o.el,o.$el.before(cs.$indicator)}}},onElementInit:function(){},onConstructElement:function(e){classes=["x-column","x-sm"],styles={},classes.push("x-"+e.size.replace("/","-")),"none"!=e.text_align&&classes.push(cs.classMap("text_align",e.text_align)),_.isArray(padding=_.clone(e.padding))&&(padding.pop(),styles.padding=padding.join(" ")),_.isArray(borderWidth=_.clone(e.border_width))&&(borderWidth.pop(),"0px"!=_.unique(borderWidth)&&(styles["border-width"]=borderWidth.join(" "),styles["border-color"]=e.border_color,styles["border-style"]=e.border_style)),styles["background-color"]=""!=e.bg_color?e.bg_color:"transparent",""!=e.id&&this.$el.attr("id",e.id),classes.push(e.class),this.$el.attr("class",classes.join(" ")),delete classes,this.$el.removeAttr("style"),this.$el.css(styles),""!=e.style&&this.$el.attr("style",this.$el.attr("style")+e.style),this.emptyClassCheck()},onRenderEmpty:function(){return!1}})},{}],166:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({template:_.template("<div></div>"),remoteRender:!1,minHeight:10,onConstructElement:function(e){var t,n,o=this.$("div");t=["cs-empty-element","cs-gap"],n={},t=_.union(t,cs.classMap("visibility",e.visibility)),""!=e.id&&o.attr("id",e.id),t.push(this.model.get("class")),o.attr("class",t.join(" ")),o.removeAttr("style"),o.css(n),""!=e.style&&o.attr("style",o.attr("style")+e.style),o.css({padding:e.gap_size+" 0 0",margin:0,height:0,minHeight:this.minHeight+"px"})}})},{}],167:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({emptyDetection:function(){return!1},onAfterElementRender:function(){this.model.prevHeight&&(this.$(".cs-empty-element").height(this.model.prevHeight),this.model.prevHeight=!1),_.defer(_.bind(function(){$map=this.$(".x-map"),$map.length>0&&(this.model.prevHeight=$map.outerHeight())},this))}})},{}],168:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onAfterElementRender:function(){}})},{}],169:[function(e,t,n){t.exports={section:e("./section"),row:e("./row"),column:e("./column"),accordion:e("./accordion"),alert:e("./alert"),card:e("./card"),"pricing-table":e("./pricing-table"),row:e("./row"),gap:e("./gap"),"google-map":e("./google-map"),line:e("./line"),slider:e("./slider"),tabs:e("./tabs"),"gravity-forms":e("./gravity-forms")}},{"./accordion":161,"./alert":162,"./card":164,"./column":165,"./gap":166,"./google-map":167,"./gravity-forms":168,"./line":170,"./pricing-table":171,"./row":172,"./section":173,"./slider":174,"./tabs":175}],170:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({template:_.template('<hr class="x-hr">'),remoteRender:!1,onRender:function(){var e,t,n,o,i,s,r,a;e=this.$("hr"),t=["x-hr"],(n=this.model.get("visibility"))&&(t=_.union(t,n)),t.push(this.model.get("class")),e.attr("class",t.join(" ")),o=this.model.get("custom_id"),o&&e.attr("id",o),e.removeAttr("style"),i="",s=this.model.get("style"),a=this.model.get("line_height"),a&&(i+=" border-top-width: "+a+";"),r=this.model.get("line_color"),r&&(i+=" border-top-color: "+r+";"),s&&(i+=" "+s),e.attr("style",i),_.defer(function(){e.css({paddingBottom:e.css("marginBottom"),marginBottom:"0"})})}})},{}],171:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onRemoveChild:function(){this.updateColumnClass()},onAddChild:function(e){this.updateColumnClass()},updateColumnClass:function(){var e=this.$(".x-pricing-table"),t=["one-column","two-columns","three-columns","four-columns","five-columns"];if(t[this.collection.length-1]){var n=t[this.collection.length-1];e.hasClass(n)||e.removeClass(t.join(" ")).addClass(n)}else e.removeClass(t.join(" "))}})},{}],172:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,filter:function(e,t,n){return e.get("_active")},onConstructElement:function(e){var t,n,o,i,s,r;t=["x-container"],n={},e.inner_container&&t.push("max width"),t=_.union(t,cs.classMap("visibility",e.visibility)),"none"!=e.text_align&&t.push(cs.classMap("text_align",e.text_align)),e.marginless_columns&&t.push("marginless-columns"),_.isArray(o=_.clone(e.padding))&&(o.pop(),n.padding=o.join(" ")),_.isArray(i=_.clone(e.margin))&&(i.pop(),n.margin=i.join(" ")),_.isArray(s=_.clone(e.border_width))&&(s.pop(),"0px"!=_.unique(s)&&(n["border-width"]=s.join(" "),n["border-color"]=e.border_color,n["border-style"]=e.border_style)),r=this.model.get("bg_color"),n["background-color"]=r||"transparent",""!=e.id&&this.$el.attr("id",e.id),t.push(e.class),this.$el.attr("class",t.join(" ")),delete t,this.$el.removeAttr("style"),this.$el.css(n),""!=e.style&&this.$el.attr("style",this.$el.attr("style")+e.style)}})},{}],173:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({remoteRender:!1,draggable:!1,onElementInit:function(){this.lazyDetectColorContrast=_.debounce(_.bind(this.detectColorContrast,this),25),this.lazyDetectImageContrast=_.debounce(_.bind(this.detectImageContrast,this),250),this.contrast={color:null,image:null,activeClass:null},this.listenTo(this.model,"change:bg_color",function(){this.contrast.color=null}),this.listenTo(this.model,"change:bg_image",function(){this.contrast.image=null})},onConstructElement:function(e){var t,n,o,i,s,r;switch(this.$el.attr("id","x-section-"+(this.modelIndex+1)),t=["x-section"],n={},o="",this.contrastClass&&t.push(this.contrastClass),t=_.union(t,cs.classMap("visibility",e.visibility)),"none"!=e.text_align&&t.push(cs.classMap("text_align",e.text_align)),e.bg_type){case"video":o="bg-video";break;case"image":o=e.bg_pattern_toggle?"bg-pattern":"bg-image",e.parallax&&t.push("parallax"),""!=e.bg_image&&(n.backgroundImage='url("'+e.bg_image+'")'),_.isNull(this.contrast.image)&&this.lazyDetectImageContrast(e.bg_image,e.bg_color),_.isNull(this.contrast.activeClass)||t.push(this.contrast.activeClass),n["background-color"]=""!=e.bg_color?e.bg_color:"transparent";break;case"color":o="bg-color",_.isNull(this.contrast.image)&&this.lazyDetectColorContrast(e.bg_color),_.isNull(this.contrast.activeClass)||t.push(this.contrast.activeClass),n["background-color"]=""!=e.bg_color?e.bg_color:"transparent"}if(o&&t.push(o),_.isArray(i=_.clone(e.padding))&&(i.pop(),n.padding=i.join(" ")),_.isArray(s=_.clone(e.margin))&&(s.pop(),n.margin=s.join(" ")),_.isArray(r=_.clone(e.border_width))&&(r.pop(),"0px"!=_.unique(r)&&(n["border-width"]=r.join(" "),n["border-color"]=e.border_color,n["border-style"]=e.border_style)),e.id&&this.$el.attr("id",e.id),t.push(e.class),this.$el.attr("class",t.join(" ")),t=null,this.$el.removeAttr("style"),this.$el.css(n),e.style&&this.$el.attr("style",this.$el.attr("style")+e.style),this.$(".x-section-separator").remove(),e.separator_top_type&&"none"!==e.separator_top_type){var a=Backbone.$('<div class="x-section-separator x-section-separator-top x-section-separator-'+e.separator_top_type+'"></div>');e.separator_top_height&&a.height(e.separator_top_height);var l=Backbone.$(function(e,t,n){switch(n||(n=0),t||(t="transparent"),e){case"angle-out":return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none" class="angle-top-out" style="fill: '+t+';"><polygon points="'+n+',0 100,100 0,100"/></svg>';case"angle-in":return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none" class="angle-top-in" style="fill: '+t+';"><polygon points="0,100 '+n+',100 0,0"/><polygon points="'+n+',100 100,100 100,0"/></svg>';case"curve-out":return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 50" preserveAspectRatio="none" class="curve-top-out" style="fill: '+t+';"><path d="M0,50C0,50,22.4,0,50,0s50,50,50,50"/></svg>';case"curve-in":return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 50" preserveAspectRatio="none" class="curve-top-in" style="fill: '+t+';"><path d="M0,0v50h50C22.4,50,0,0,0,0z"/><path d="M50,50h50V0C100,0,77.6,50,50,50z"/></svg>'}return""}(e.separator_top_type,e.bg_color,e.separator_top_angle_point));a.append(l),this.$el.prepend(a)}if(e.separator_bottom_type&&"none"!==e.separator_bottom_type){var c=Backbone.$('<div class="x-section-separator x-section-separator-bottom x-section-separator-'+e.separator_bottom_type+'"></div>');e.separator_bottom_height&&c.height(e.separator_bottom_height);var u=Backbone.$(function(e,t,n){switch(n||(n=0),t||(t="transparent"),e){case"angle-out":return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none" class="angle-bottom-out" style="fill: '+t+';"><polygon points="'+n+',100 100,0 0,0"></svg>';case"angle-in":return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none" class="angle-bottom-in" style="fill: '+t+';"><polygon points="0,0 '+n+',0 0,100"/><polygon points="'+n+',0 100,0 100,100"/></svg>';case"curve-out":return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 50" preserveAspectRatio="none" class="curve-bottom-out" style="fill: '+t+';"><path d="M0,0c0,0,22.4,50,50,50s50-50,50-50"/></svg>';case"curve-in":return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 50" preserveAspectRatio="none" class="curve-bottom-in" style="fill: '+t+';"><path d="M0,50V0h50C22.4,0,0,50,0,50z"/><path d="M50,0h50v50C100,50,77.6,0,50,0z"/></svg>'}return""}(e.separator_bottom_type,e.bg_color,e.separator_bottom_angle_point));c.append(u),this.$el.append(c)}_.defer(_.bind(function(){this.$el.hasClass("parallax")&&(csModernizr.touchevents?this.$el.css("background-attachment","scroll"):(this.$el.hasClass("bg-image")&&(speed=.1),this.$el.hasClass("bg-pattern")&&(speed=.3),speed&&this.$el.parallaxContentBand("50%",speed))),this.$el.hasClass("bg-video")&&this.$el.css({"background-image":'url("'+e.bg_video_poster+'")',"background-color":"white","background-size":"cover"})},this))},detectImageContrast:function(e,t){_.defer(_.bind(function(){if(!e||""==e)return void this.detectColorContrast(t);window.RGBaster.colors(e,{success:_.bind(function(e){this.setContrastClass(e.dominant)},this)})},this))},detectColorContrast:function(e){e&&""!=e||(e="#ffffff"),this.setContrastClass(e)},setContrastClass:function(e){var t=new Cornerstone.Vendor.Color(e),n=t.getDistanceLuminosityFrom(new Cornerstone.Vendor.Color("#fff"))>10.5;this.contrast.activeClass=n?"cs-bg-dark":null,this.$el.toggleClass("cs-bg-dark",n)}})},{}],174:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({emptyDetection:function(){}})},{}],175:[function(e,t,n){t.exports=Cornerstone.ElementViews.Base.extend({onClickBeforeInspect:function(e){$target=jQuery(e.target),"tab"==$target.attr("data-toggle")&&jQuery.fn.tab.call($target,"show")}})},{}],176:[function(e,t,n){t.exports=CS.Mn.CollectionView.extend({childView:e("./settings-section"),events:{"click .cs-pane-section-toggle":"toggle"},toggle:function(e){var t=this.$(e.currentTarget),n=t.next(".cs-pane-section");if(t.hasClass("active"))return t.removeClass("active"),n.slideUp("fast"),void cs.navigate.trigger("scrollbar:update");this.$(".cs-pane-section-toggle").removeClass("active"),t.addClass("active"),cs.navigate.trigger("scrollbar:update"),n.slideDown("fast"),this.$(".cs-pane-section").not(".constant").not(n).slideUp("fast")}})},{"./settings-section":178}],177:[function(e,t,n){var o=e("../controls/control-collection"),i=e("./settings-collection");t.exports=CS.Mn.LayoutView.extend({template:"settings/content",regions:{Controls:"#controls",Sections:"#sections"},initialize:function(){},onBeforeShow:function(){this.Controls.show(new o({collection:cs.component("settings").getPrimaryControls()})),this.Sections.show(new i({collection:cs.component("settings").getSettings()}))}})},{"../controls/control-collection":104,"./settings-collection":176}],178:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({template:"settings/section",className:"cs-settings-section",childViewContainer:"ul.cs-controls",getChildView:function(e){return cs.controlLookup(e.get("type"))},initialize:function(){this.collection=this.model.inspect.controls},onRender:function(){this.collection.isEmpty()&&this.$el.addClass("empty")},serializeData:function(){return _.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{_section_title:this.model.section.get("ui").title})}})},{}],179:[function(e,t,n){var o=e("../main/base-pane"),i=e("./settings-content"),s=e("../controls/control-collection");t.exports=o.extend({name:"settings",initialize:function(){this.listenTo(cs.global,"settings:ready",this.onShowContent)},onShowContent:function(){this.Content.show(cs.data.request("settings:ready")?new i:this.getLoadingView())},getLoadingView:function(){return new CS.Mn.ItemView({tagName:"ul",className:"cs-controls empty",template:_.template('<li class="cs-control-empty"><span class="title"><%= l18n(\'settings-loading\') %></span></li>')})},onOpenSubItem:function(){this.Sub.show(new s({collection:cs.component("inspector").getSecondaryControls()}))}})},{"../controls/control-collection":104,"../main/base-pane":154,"./settings-content":177}],180:[function(e,t,n){t.exports=CS.Mn.CompositeView.extend({remoteRender:!0,template:"main/skeleton-item",childViewContainer:".cs-skeleton-container",duplicatable:function(){var e=this.model.definition.get("flags");return e&&!e.child},deletable:function(){return _.result(this,"duplicatable")},eraseable:!1,manageable:!1,collapsible:!1,className:function(){var e=["cs-skeleton-item"],t=this.model.get("_type");_.contains(["section","row","column"],t)?e.push("layout"):e.push("element"),e.push(t);var n=this.model.definition.get("flags");n&&n.child&&e.push("is-child");var o=_.result(this,"skeletonClasses");return _.isArray(o)&&(e=e.concat(o)),e.join(" ")},attributes:function(){return{"data-element-type":this.model.get("_type")}},events:function(){var e={"click .cs-skeleton-controls button":"clickControl"},t=_.result(this,"inspectable");(t||_.isUndefined(t))&&(e=_.extend(e,{"click > .cs-skeleton-handle":"_click","mouseover > .cs-skeleton-handle":"_observeStart","mouseout > .cs-skeleton-handle":"_observeEnd"}));var n=_.result(this,"draggable");(n||_.isUndefined(n))&&(e=_.extend(e,{"dragula:lift":"_dragLift","dragula:cancel":"_dragEnd"}));var o=_.result(this,"receiver");return(o||_.isUndefined(o))&&(e=_.extend(e,{"dragula:receive":"_receiveElement","dragula:over":"_dragOver","dragula:out":"_dragOut"})),_.extend(e,_.result(this,"elementEvents")||{})},getChildView:function(e){return cs.component("view-loader").skeletonLookup(e.get("_type"))},constructor:function(e){CS.Mn.CompositeView.apply(this,arguments),this._repaint=_.debounce(_.bind(function(){try{this.render()}catch(e){if("ViewDestroyedError"==e.name)return;console.log("Cornerstone Render Exception",e)}},this),2),this.collection=this.model.elements,this.listenTo(this.collection,"sort",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(cs.events,"skeleton:hover:toggle",this.hoverToggle),this.listenTo(cs.events,"skeleton:dragging",function(e){e||this.$el.removeClass("cs-receiving")}),this.model.collection&&(this.modelIndex=this.model.collection.indexOf(this.model))},serializeData:function(){var e="",t="",n=[],o=this.model.get("_type");switch(o){case"section":e=cs.l18n("section-format").replace("%s",this.model.get("title"));break;case"row":e=cs.l18n("row-numeric").replace("%s",this.model.getIndex()+1);break;case"column":e=cs.l18n("column-format").replace("%s",this.model.get("size"));break;default:t=cs.elementIcon(o),e=this.model.definition.get("ui").title}_.result(this,"manageable")&&n.push({action:"managelayout",icon:"bars",tooltip:cs.l18n("tooltip-manage-layout")}),_.result(this,"duplicatable")&&n.push({action:"duplicate",icon:"copy",tooltip:cs.l18n("tooltip-copy")}),_.result(this,"eraseable")&&n.push({action:"erase",icon:"eraser",tooltip:cs.l18n("tooltip-erase")}),_.result(this,"deletable")&&n.push({action:"delete",icon:"trash-o",tooltip:cs.l18n("tooltip-delete")});_.clone(_.result(this,"controls"));return _.result(this,"collapsible")&&n.push({action:"collapse",icon:"caret-down",iconAlt:"caret-up",persist:!0}),this.tooltipText=e,_.extend(CS.Mn.CompositeView.prototype.serializeData.apply(this,arguments),{title:t+e,controls:n})},_click:function(e){this.triggerMethod("click:before:inspect",e),e.stopPropagation(),cs.global.trigger("inspect",this.model)},_dragLift:function(e){e.stopPropagation(),cs.incoming=this.model},_dragEnd:function(e){cs.incoming=!1},_dragOver:function(e){e.stopPropagation(),this.$el.toggleClass("cs-receiving",!0)},_dragOut:function(e){this.$el.toggleClass("cs-receiving",!1)},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start"),cs.events.trigger("skeleton:hover",!0,this)},_observeEnd:function(e){this.model.trigger("observe:end"),cs.events.trigger("skeleton:hover",!1,this)},_receiveElement:function(e,t,n,o){e.stopPropagation(),this.triggerMethod("receive:element",e,t,n,o),_.defer(_.bind(this._placeElement,this),o?Backbone.$(o).index()-1:this.collection.length)},_placeElement:function(e){if(cs.incoming){var t=_.isFunction(cs.incoming.toJSON)?cs.incoming.toJSON():cs.incoming.data;this.model.elements.create(t,_.clone(cs.incoming.options),{position:e,replace:cs.incoming,after:function(e){cs.incoming=!1}})}},onRender:function(){this.$el.toggleClass("collapsed",!!this.model.getMeta("skeleton_collapsed"))},clickControl:function(e){e.stopPropagation();var t=this.$(e.currentTarget).data("action");this.triggerMethod("control:"+t)},onControlManagelayout:function(){_.result(this,"manageable")&&cs.events.trigger("inspect:layout",this.model,{navigate:!0})},onControlDuplicate:function(){_.result(this,"duplicatable")&&cs.global.trigger("element:duplicate",this.model)},onControlDelete:function(){_.result(this,"deletable")&&cs.global.trigger("element:delete",this.model)},onControlErase:function(){_.result(this,"eraseable")&&cs.global.trigger("element:erase",this.model)},onControlCollapse:function(){if(_.result(this,"collapsible")){var e=!this.model.getMeta("skeleton_collapsed");this.$el.toggleClass("collapsed",e);this.model.setMeta("skeleton_collapsed",e)}},collapseHover:function(e){e.stopPropagation()},hoverToggle:function(e){this.$el.toggleClass("hover",e==this.cid)}})},{}],181:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!0,manageable:!0,duplicatable:!1,deletable:!1,eraseable:!0,elementEvents:{"dragula:drop":"updatePosition"},skeletonClasses:function(){return["size-"+this.model.get("size").replace("/","-")]},updatePosition:function(e,t,n){this.triggerMethod("update:position",e,t,n)},_dragLift:function(e){e.stopPropagation()}})},{}],182:[function(e,t,n){t.exports={section:e("./section"),row:e("./row"),column:e("./column")}},{"./column":181,"./row":183,"./section":184}],183:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!1,manageable:!0,collapsible:!0,childViewContainer:".cs-skeleton-container-inner",elementEvents:{"recieve:element":"_receiveElement","dragula:lift:child":"liftColumn"},filter:function(e,t,n){return e.get("_active")},initialize:function(){this.equalize=_.debounce(_.bind(this._equalize,this),1)},onRender:function(){this.setupDrake(),this._equalize(),this.equalize()},onChildviewUpdatePosition:function(e,t,n,o){this.equalize(),_.defer(_.bind(function(){this.triggerMethod("item:before:position:updated",e),this.collection.trigger("update:position",e.model,e.$el.index()),this.triggerMethod("item:position:updated",e)},this))},setupDrake:function(){this.drake&&this.drake.destroy();var t=this.$(".cs-skeleton-container-inner");this.drake=Cornerstone.Vendor.dragula({offset:function(e,t,n){return e.x=Backbone.$(n).width()/2,e},accepts:function(e,t,n,o){return Backbone.$(e).is(".cs-skeleton-item.column")},moves:function(e,t,n,o){return Backbone.$(n).is(".cs-skeleton-item.column > .cs-skeleton-handle > .cs-skeleton-title")&&Backbone.$(e).siblings().length>0},direction:"horizontal",revertOnSpill:!1,mirrorContainer:Backbone.$("#before")[0],containers:[t[0]]});var n=e("../../utility/dragula-handlers");this.drake.on("drag",n.skeletonStart),this.drake.on("dragend",n.skeletonEnd),this.drake.on("drop",n.drop)},onChildviewReceiveElement:function(){this._equalize()},_equalize:function(){this.$el.equalize({equalize:"outerHeight",children:".cs-skeleton-container-column",reset:!0,offset:this.$(".cs-skeleton-handle").outerHeight()-1})},_observeStart:function(e){e.stopPropagation(),this.model.trigger("observe:start"),this.$el.hasClass("cs-receiving")||cs.events.trigger("skeleton:hover",!0,this)},liftColumn:function(){this.$el.addClass("cs-receiving")},onDestroy:function(){this.drake.destroy()},onChildviewRender:function(){this._equalize(),this.equalize()},_receiveElement:function(e){e.stopPropagation()}})},{"../../utility/dragula-handlers":94}],184:[function(e,t,n){t.exports=Cornerstone.SkeletonViews.Base.extend({receiver:!0,manageable:!0,collapsible:!0,initialize:function(){this.listenTo(this.model,"change:title",this.updateTitle)},updateTitle:function(e,t){this.$("> .cs-skeleton-handle > .cs-skeleton-title").html(cs.l18n("section-format").replace("%s",t))}})},{}],185:[function(e,t,n){"use strict";function o(e){var t=r[e];return t?t.lastIndex=0:r[e]=t=new RegExp(a+e+l,"g"),t}function i(e,t){var n=e.className;n.length?o(t).test(n)||(e.className+=" "+t):e.className=t}function s(e,t){e.className=e.className.replace(o(t)," ").trim()}var r={},a="(?:^|\\s)",l="(?:\\s|$)";t.exports={add:i,rm:s}},{}],186:[function(e,t,n){(function(n){"use strict";function o(e,t){function n(e){return-1!==ce.containers.indexOf(e)||le.isContainer(e)}function o(e){var t=e?"remove":"add";i(k,t,"mousedown",T),i(k,t,"mouseup",R)}function a(e){i(k,e?"remove":"add","mousemove",S)}function v(e){var t=e?"remove":"add";i(k,t,"selectstart",$),i(k,t,"click",$)}function y(){o(!0),R({})}function $(e){re&&e.preventDefault()}function T(e){if(ee=e.clientX,te=e.clientY,!(1!==s(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=j(t);n&&(re=n,a(),"mousedown"===e.type&&(m(t)?t.focus():e.preventDefault()))}}function S(e){if(re){if(0===s(e))return void R({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(le.ignoreInputTextSelection){var t=_("clientX",e),n=_("clientY",e);if(m(x.elementFromPoint(t,n)))return}var o=re;a(!0),v(),I(),M(o);var i=r(Q),l=le.offset({x:_("pageX",e)-i.left,y:_("pageY",e)-i.top},e,Q);G=l.x,Z=l.y,w.add(ie||Q,"gu-transit"),H(),z(e)}}}function j(e){if(!(ce.dragging&&J||n(e))){for(var t=e;g(e)&&!1===n(g(e));){if(le.invalid(e,t))return;if(!(e=g(e)))return}var o=g(e);if(o&&!le.invalid(e,t)){if(le.moves(e,o,t,f(e)))return{item:e,source:o}}}}function E(e){var t=j(e);t&&M(t)}function M(e){U(e.item,e.source)&&(ie=e.item.cloneNode(!0),ce.emit("cloned",ie,e.item,"copy")),K=e.source,Q=e.item,ne=oe=f(e.item),ce.dragging=!0,ce.emit("drag",Q,K)}function B(){return!1}function I(){if(ce.dragging){var e=ie||Q;D(e,g(e))}}function L(){re=!1,a(!0),v(!0)}function R(e){if(L(),ce.dragging){var t=ie||Q,n=_("clientX",e),o=_("clientY",e),i=l(J,n,o),s=P(i,n,o);s&&(ie&&le.copySortSource||!ie||s!==K)?D(t,s):le.removeOnSpill?A():N()}}function D(e,t){var n=g(e);ie&&le.copySortSource&&t===K&&n.removeChild(Q),q(t)?ce.emit("cancel",e,K,K):ce.emit("drop",e,t,K,oe),V()}function A(){if(ce.dragging){var e=ie||Q,t=g(e);t&&t.removeChild(e),ce.emit(ie?"cancel":"remove",e,t,K),V()}}function N(e){if(ce.dragging){var t=arguments.length>0?e:le.revertOnSpill,n=ie||Q,o=g(n);o===K&&ie&&o.removeChild(ie);var i=q(o);!1===i&&!ie&&t&&K.insertBefore(n,ne),i||t?ce.emit("cancel",n,K,K):ce.emit("drop",n,o,K,oe),V()}}function V(){var e=ie||Q;L(),X(),e&&w.rm(e,"gu-transit"),se&&clearTimeout(se),ce.dragging=!1,ae&&ce.emit("out",e,ae,K),ce.emit("dragend",e),K=Q=ie=ne=oe=se=ae=null}function q(e,t){var n;return n=void 0!==t?t:J?oe:f(ie||Q),e===K&&n===ne}function P(e,t,o){for(var i=e;i&&!function(){if(!1===n(i))return!1;var s=W(i,e),r=F(i,s,t,o);return!!q(i,r)||le.accepts(Q,i,K,r)}();)i=g(i);return i}function z(e){function t(e){ce.emit(e,r,ae,K)}if(J){e.preventDefault();var n=_("clientX",e),o=_("clientY",e),i=n-G,s=o-Z;J.style.left=i+"px",J.style.top=s+"px";var r=ie||Q,a=l(J,n,o),c=P(a,n,o),u=null!==c&&c!==ae;(u||null===c)&&(function(){ae&&t("out")}(),ae=c,function(){u&&t("over")}());var d=g(r);if(c===K&&ie&&!le.copySortSource)return void(d&&d.removeChild(r));var p,h=W(c,a);if(null!==h)p=F(c,h,n,o);else{if(!0!==le.revertOnSpill||ie)return void(ie&&d&&d.removeChild(r));p=ne,c=K}(null===p||p!==r&&p!==f(r)&&p!==oe)&&(oe=p,c.insertBefore(r,p),ce.emit("shadow",r,c,K))}}function O(e){w.rm(e,"gu-hide")}function Y(e){ce.dragging&&w.add(e,"gu-hide")}function H(){if(!J){var e=Q.getBoundingClientRect();J=Q.cloneNode(!0),J.style.width=p(e)+"px",J.style.height=h(e)+"px",w.rm(J,"gu-transit"),w.add(J,"gu-mirror"),le.mirrorContainer.appendChild(J),i(k,"add","mousemove",z),w.add(le.mirrorContainer,"gu-unselectable"),ce.emit("cloned",J,Q,"mirror")}}function X(){J&&(w.rm(le.mirrorContainer,"gu-unselectable"),i(k,"remove","mousemove",z),g(J).removeChild(J),J=null)}function W(e,t){for(var n=t;n!==e&&g(n)!==e;)n=g(n);return n===k?null:n}function F(e,t,n,o){function i(e){return e?f(t):t}var s="horizontal"===le.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(s?n>e.left+p(e)/2:o>e.top+h(e)/2)}():function(){var t,i,r,a=e.children.length;for(t=0;t<a;t++){if(i=e.children[t],r=i.getBoundingClientRect(),s&&r.left>n)return i;if(!s&&r.top>o)return i}return null}()}function U(e,t){return"boolean"==typeof le.copy?le.copy:le.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var J,K,Q,G,Z,ee,te,ne,oe,ie,se,re,ae=null,le=t||{};void 0===le.moves&&(le.moves=u),void 0===le.accepts&&(le.accepts=u),void 0===le.invalid&&(le.invalid=B),void 0===le.containers&&(le.containers=e||[]),void 0===le.isContainer&&(le.isContainer=c),void 0===le.copy&&(le.copy=!1),void 0===le.copySortSource&&(le.copySortSource=!1),void 0===le.revertOnSpill&&(le.revertOnSpill=!1),void 0===le.removeOnSpill&&(le.removeOnSpill=!1),void 0===le.direction&&(le.direction="vertical"),void 0===le.ignoreInputTextSelection&&(le.ignoreInputTextSelection=!0),void 0===le.mirrorContainer&&(le.mirrorContainer=C),void 0===le.offset&&(le.offset=d);var ce=b({containers:le.containers,start:E,end:I,cancel:N,remove:A,destroy:y,dragging:!1});return!0===le.removeOnSpill&&ce.on("over",O).on("out",Y),o(),ce}function i(e,t,o,i){var s={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},r={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};n.navigator.msPointerEnabled&&y[t](e,r[o],i),y[t](e,s[o],i),y[t](e,o,i)}function s(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function r(e){var t=e.getBoundingClientRect();return{left:t.left+a("scrollLeft","pageXOffset"),top:t.top+a("scrollTop","pageYOffset")}}function a(e,t){return void 0!==n[t]?n[t]:k.clientHeight?k[e]:C[e]}function l(e,t,n){var o,i=e||{},s=i.className;return i.className+=" gu-hide",o=x.elementFromPoint(t,n),i.className=s,o}function c(){return!1}function u(){return!0}function d(e){return e}function p(e){return e.width||e.right-e.left}function h(e){return e.height||e.bottom-e.top}function g(e){return e.parentNode===x?null:e.parentNode}function m(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName}function f(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function v(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function _(e,t){var n=v(t),o={pageX:"clientX",pageY:"clientY"};return e in o&&!(e in n)&&o[e]in n&&(e=o[e]),n[e]}var b=e("contra/emitter"),y=e("crossvent"),w=e("./classes"),x=document,k=x.documentElement,C=x.body
;t.exports=o}).call(this,window||{})},{"./classes":185,"contra/emitter":194,crossvent:195}],187:[function(e,t,n){(function(){"use strict";var e,t,n,o=function(e,t){return function(){return e.apply(t,arguments)}};e=jQuery,t=function(){function e(){}return e.transitions={webkitTransition:"webkitTransitionEnd",mozTransition:"mozTransitionEnd",oTransition:"oTransitionEnd",transition:"transitionend"},e.transition=function(e){var t,n,o,i;t=e[0],n=this.transitions;for(i in n)if(o=n[i],null!=t.style[i])return o},e}(),n=function(){function n(t){null==t&&(t={}),this.html=o(this.html,this),this.$growl=o(this.$growl,this),this.$growls=o(this.$growls,this),this.animate=o(this.animate,this),this.remove=o(this.remove,this),this.dismiss=o(this.dismiss,this),this.present=o(this.present,this),this.cycle=o(this.cycle,this),this.close=o(this.close,this),this.unbind=o(this.unbind,this),this.bind=o(this.bind,this),this.render=o(this.render,this),this.settings=e.extend({},n.settings,t),this.$growls().attr("class",this.settings.location),this.render()}return n.settings={namespace:"growl",duration:3200,close:"&#215;",location:"default",style:"default",size:"medium"},n.growl=function(e){return null==e&&(e={}),this.initialize(),new n(e)},n.initialize=function(){return e("body:not(:has(#growls))").append('<div id="growls" />')},n.prototype.render=function(){var e;e=this.$growl(),this.$growls().append(e),null!=this.settings.static&&("undefined"!=typeof console&&null!==console&&"function"==typeof console.debug&&console.debug("DEPRECATION: static has been renamed to fix and will be removed in the next release"),this.settings.fixed=this.settings.static),this.settings.fixed?this.present():this.cycle()},n.prototype.bind=function(e){return null==e&&(e=this.$growl()),e.on("contextmenu",this.close).find("."+this.settings.namespace+"-close").on("click",this.close)},n.prototype.unbind=function(e){return null==e&&(e=this.$growl()),e.off("contextmenu",this.close).find("."+this.settings.namespace+"-close").off("click",this.close)},n.prototype.close=function(e){var t;return e.preventDefault(),e.stopPropagation(),t=this.$growl(),t.stop().queue(this.dismiss).queue(this.remove)},n.prototype.cycle=function(){var e;return e=this.$growl(),e.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove)},n.prototype.present=function(e){var t;return t=this.$growl(),this.bind(t),this.animate(t,this.settings.namespace+"-incoming","out",e)},n.prototype.dismiss=function(e){var t;return t=this.$growl(),this.unbind(t),this.animate(t,this.settings.namespace+"-outgoing","in",e)},n.prototype.remove=function(e){return this.$growl().remove(),e()},n.prototype.animate=function(e,n,o,i){var s;null==o&&(o="in"),s=t.transition(e),e["in"===o?"removeClass":"addClass"](n),e.offset().position,e["in"===o?"addClass":"removeClass"](n),null!=i&&(null!=s?e.one(s,i):i())},n.prototype.$growls=function(){return null!=this.$_growls?this.$_growls:this.$_growls=e("#growls")},n.prototype.$growl=function(){return null!=this.$_growl?this.$_growl:this.$_growl=e(this.html())},n.prototype.html=function(){return"<div class='"+this.settings.namespace+" "+this.settings.namespace+"-"+this.settings.style+" "+this.settings.namespace+"-"+this.settings.size+"'>\n  <div class='"+this.settings.namespace+"-close'>"+this.settings.close+"</div>\n  <div class='"+this.settings.namespace+"-title'>"+this.settings.title+"</div>\n  <div class='"+this.settings.namespace+"-message'>"+this.settings.message+"</div>\n</div>"},n}(),e.growl=function(e){return null==e&&(e={}),n.growl(e)},e.growl.error=function(t){var n;return null==t&&(t={}),n={title:"Error!",style:"error"},e.growl(e.extend(n,t))},e.growl.notice=function(t){var n;return null==t&&(t={}),n={title:"Notice!",style:"notice"},e.growl(e.extend(n,t))},e.growl.warning=function(t){var n;return null==t&&(t={}),n={title:"Warning!",style:"warning"},e.growl(e.extend(n,t))}}).call(this)},{}],188:[function(e,t,n){!function(e){var t=e(window);e.fn.visible=function(e,n,o){if(!(this.length<1)){var i=this.length>1?this.eq(0):this,s=i.get(0),r=t.width(),a=t.height(),o=o||"both",l=!0!==n||s.offsetWidth*s.offsetHeight;if("function"==typeof s.getBoundingClientRect){var c=s.getBoundingClientRect(),u=c.top>=0&&c.top<a,d=c.bottom>0&&c.bottom<=a,p=c.left>=0&&c.left<r,h=c.right>0&&c.right<=r,g=e?u||d:u&&d,m=e?p||h:p&&h;if("both"===o)return l&&g&&m;if("vertical"===o)return l&&g;if("horizontal"===o)return l&&m}else{var f=t.scrollTop(),v=f+a,_=t.scrollLeft(),b=_+r,y=i.offset(),w=y.top,x=w+i.height(),k=y.left,C=k+i.width(),$=!0===e?x:w,T=!0===e?w:x,S=!0===e?C:k,j=!0===e?k:C;if("both"===o)return!!l&&T<=v&&$>=f&&j<=b&&S>=_;if("vertical"===o)return!!l&&T<=v&&$>=f;if("horizontal"===o)return!!l&&j<=b&&S>=_}}}}(jQuery)},{}],189:[function(e,t,n){function o(e){if(this.options={selector:"*",mouseEvents:["click","dblclick","mousedown","mouseup","mouseenter","mouseleave","mouseover"],usePolyfillIf:function(){if("Microsoft Internet Explorer"==navigator.appName){if(null!=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)){if(parseFloat(RegExp.$1)<11)return!0}}return!1}},e){var t=this;$.each(e,function(e,n){t.options[e]=n})}this.options.usePolyfillIf()&&this.register_mouse_events()}o.initialize=function(e){return null==o.singleton&&(o.singleton=new o(e)),o.singleton},o.prototype.register_mouse_events=function(){$(document).on(this.options.mouseEvents.join(" "),this.options.selector,function(e){if("none"==$(this).css("pointer-events")){var t=$(this).css("display");$(this).css("display","none");var n=document.elementFromPoint(e.clientX,e.clientY);return t?$(this).css("display",t):$(this).css("display",""),e.target=n,$(n).trigger(e),!1}return!0})}},{}],190:[function(e,t,n){!function(e,t){"use strict";var n=function(){return document.createElement("canvas").getContext("2d")},o=function(e,t){var o=new Image,i=e.src||e;"data:"!==i.substring(0,5)&&(o.crossOrigin="Anonymous"),o.onload=function(){var e=n();e.drawImage(o,0,0);var i=e.getImageData(0,0,o.width,o.height);t&&t(i.data)},o.src=i},i=function(e){return["rgb(",e,")"].join("")},s=function(e){return e.map(function(e){return i(e.name)})},r={};r.colors=function(e,t){t=t||{};var n=t.exclude||[],r=t.paletteSize||10;o(e,function(o){for(var a=e.width*e.height||o.length,l={},c="",u=[],d={dominant:{name:"",count:0},palette:Array.apply(null,new Array(r)).map(Boolean).map(function(e){return{name:"0,0,0",count:0}})},p=0;p<a;)if(u[0]=o[p],u[1]=o[p+1],u[2]=o[p+2],c=u.join(","),p+=20,0!==o[p+3]&&(l[c]=c in l?l[c]+1:1,-1===n.indexOf(i(c)))){var h=l[c];h>d.dominant.count?(d.dominant.name=c,d.dominant.count=h):d.palette.some(function(e){if(h>e.count)return e.name=c,e.count=h,!0})}if(t.success){var g=s(d.palette);t.success({dominant:i(d.dominant.name),secondary:g[0],palette:g})}})},e.RGBaster=e.RGBaster||r}(window)},{}],191:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],192:[function(e,t,n){},{}],193:[function(e,t,n){"use strict";var o=e("ticky");t.exports=function(e,t,n){e&&o(function(){e.apply(n||null,t||[])})}},{ticky:225}],194:[function(e,t,n){"use strict";var o=e("atoa"),i=e("./debounce");t.exports=function(e,t){var n=t||{},s={};return void 0===e&&(e={}),e.on=function(t,n){return s[t]?s[t].push(n):s[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var o=arguments.length;if(1===o)delete s[t];else if(0===o)s={};else{var i=s[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=o(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var r=(s[t]||[]).slice(0);return function(){var s=o(arguments),a=this||e;if("error"===t&&!1!==n.throws&&!r.length)throw 1===s.length?s[0]:s;return r.forEach(function(o){n.async?i(o,s,a):o.apply(a,s),o._once&&e.off(t,o)}),e}},e}},{"./debounce":193,atoa:191}],195:[function(e,t,n){(function(n){"use strict";function o(e,t,n,o){return e.addEventListener(t,n,o)}function i(e,t,n){return e.attachEvent("on"+t,c(e,t,n))}function s(e,t,n,o){return e.removeEventListener(t,n,o)}function r(e,t,n){var o=u(e,t,n);if(o)return e.detachEvent("on"+t,o)}function a(e,t,n){var o=-1===h.indexOf(t)?function(){return new p(t,{detail:n})}():function(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(o):e.fireEvent("on"+t,o)}function l(e,t,o){return function(t){var i=t||n.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,o.call(e,i)}}function c(e,t,n){var o=u(e,t,n)||l(e,t,n);return v.push({wrapper:o,element:e,type:t,fn:n}),o}function u(e,t,n){var o=d(e,t,n);if(o){var i=v[o].wrapper;return v.splice(o,1),i}}function d(e,t,n){var o,i;for(o=0;o<v.length;o++)if(i=v[o],i.element===e&&i.type===t&&i.fn===n)return o}var p=e("custom-event"),h=e("./eventmap"),g=n.document,m=o,f=s,v=[];n.addEventListener||(m=i,f=r),t.exports={add:m,remove:f,fabricate:a}}).call(this,window||{})},{"./eventmap":196,"custom-event":197}],196:[function(e,t,n){(function(e){"use strict";var n=[],o="",i=/^on/;for(o in e)i.test(o)&&n.push(o.slice(2));t.exports=n}).call(this,window||{})},{}],197:[function(e,t,n){(function(e){var n=e.CustomEvent;t.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,window||{})},{}],198:[function(e,t,n){t.exports=e("./lib/htmlhint")},{"./lib/htmlhint":199}],199:[function(e,t,n){var o=function(e){function t(e,t){return Array(e+1).join(t||" ")}var n={};return n.version="0.9.13",n.release="20160501",n.rules={},n.defaultRuleset={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"title-require":!0},n.addRule=function(e){n.rules[e.id]=e},n.verify=function(t,o){(o===e||0===Object.keys(o).length)&&(o=n.defaultRuleset),t=t.replace(/^\s*<!--\s*htmlhint\s+([^\r\n]+?)\s*-->/i,function(t,n){return o===e&&(o={}),n.replace(/(?:^|,)\s*([^:,]+)\s*(?:\:\s*([^,\s]+))?/g,function(t,n,i){"false"===i?i=!1:"true"===i&&(i=!0),o[n]=i===e||i}),""});var s,r=new i,a=new n.Reporter(t,o),l=n.rules;for(var c in o)(s=l[c])!==e&&!1!==o[c]&&s.init(r,a,o[c]);return r.parse(t),a.messages},n.format=function(e,n){n=n||{};var o=[],i={white:"",grey:"",red:"",reset:""};n.colors&&(i.white="[37m",i.grey="[90m",i.red="[31m",i.reset="[39m");var s=n.indent||0;return e.forEach(function(e){var n=e.evidence,r=e.line,a=e.col,l=n.length,c=a>41?a-40:1,u=n.length>a+60?a+60:l;41>a&&(u+=40-a+1),n=n.replace(/\t/g," ").substring(c-1,u),c>1&&(n="..."+n,c-=3),l>u&&(n+="..."),o.push(i.white+t(s)+"L"+r+" |"+i.grey+n+i.reset);var d=a-c,p=n.substring(0,d).match(/[^\u0000-\u00ff]/g);null!==p&&(d+=p.length),o.push(i.white+t(s)+t((r+"").length+3+d)+"^ "+i.red+e.message+" ("+e.rule.id+")"+i.reset)}),o},n}();"object"==typeof n&&n&&(n.HTMLHint=o),function(e){var t=function(){var e=this;e._init.apply(e,arguments)};t.prototype={_init:function(e,t){var n=this;n.html=e,n.lines=e.split(/\r?\n/);var o=e.match(/\r?\n/);n.brLen=null!==o?o[0].length:0,n.ruleset=t,n.messages=[]},error:function(e,t,n,o,i){this.report("error",e,t,n,o,i)},warn:function(e,t,n,o,i){this.report("warning",e,t,n,o,i)},info:function(e,t,n,o,i){this.report("info",e,t,n,o,i)},report:function(e,t,n,o,i,s){for(var r,a,l=this,c=l.lines,u=l.brLen,d=n-1,p=c.length;p>d&&(r=c[d],a=r.length,o>a&&p>n);d++)n++,1!==(o-=a)&&(o-=u);l.messages.push({type:e,message:t,raw:s,evidence:r,line:n,col:o,rule:{id:i.id,description:i.description,link:"https://github.com/yaniswang/HTMLHint/wiki/"+i.id}})}},e.Reporter=t}(o);var i=function(e){var t=function(){var e=this;e._init.apply(e,arguments)};return t.prototype={_init:function(){var e=this;e._listeners={},e._mapCdataTags=e.makeMap("script,style"),e._arrBlocks=[],e.lastEvent=null},makeMap:function(e){for(var t={},n=e.split(","),o=0;n.length>o;o++)t[n[o]]=!0;return t},parse:function(t){function n(t,n,o,i){var s=o-_+1;i===e&&(i={}),i.raw=n,i.pos=o,i.line=b,i.col=s,y.push(i),d.fire(t,i);for(;m.exec(n);)b++,_=o+m.lastIndex}var o,i,s,r,a,l,c,u,d=this,p=d._mapCdataTags,h=/<(?:\/([^\s>]+)\s*|!--([\s\S]*?)--|!([^>]*?)|([\w\-:]+)((?:\s+[^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'>]*))?)*?)\s*(\/?))>/g,g=/\s*([^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+)(?:\s*=\s*(?:(")([^"]*)"|(')([^']*)'|([^\s"'>]*)))?/g,m=/\r?\n/g,f=0,v=0,_=0,b=1,y=d._arrBlocks;for(d.fire("start",{pos:0,line:1,col:1});o=h.exec(t);)if(i=o.index,i>f&&(u=t.substring(f,i),a?c.push(u):n("text",u,f)),f=h.lastIndex,!(s=o[1])||(a&&s===a&&(u=c.join(""),n("cdata",u,v,{tagName:a,attrs:l}),a=null,l=null,c=null),a))if(a)c.push(o[0]);else if(s=o[4]){r=[];for(var w,x=o[5],k=0;w=g.exec(x);){var C=w[1],$=w[2]?w[2]:w[4]?w[4]:"",T=w[3]?w[3]:w[5]?w[5]:w[6]?w[6]:"";r.push({name:C,value:T,quote:$,index:w.index,raw:w[0]}),k+=w[0].length}k===x.length?(n("tagstart",o[0],i,{tagName:s,attrs:r,close:o[6]}),p[s]&&(a=s,l=r.concat(),c=[],v=f)):n("text",o[0],i)}else(o[2]||o[3])&&n("comment",o[0],i,{content:o[2]||o[3],long:!!o[2]});else n("tagend",o[0],i,{tagName:s});t.length>f&&(u=t.substring(f,t.length),n("text",u,f)),d.fire("end",{pos:f,line:b,col:t.length-_+1})},addListener:function(t,n){for(var o,i=this._listeners,s=t.split(/[,\s]/),r=0,a=s.length;a>r;r++)o=s[r],i[o]===e&&(i[o]=[]),i[o].push(n)},fire:function(t,n){n===e&&(n={}),n.type=t;var o=this,i=[],s=o._listeners[t],r=o._listeners.all;s!==e&&(i=i.concat(s)),r!==e&&(i=i.concat(r));var a=o.lastEvent;null!==a&&(delete a.lastEvent,n.lastEvent=a),o.lastEvent=n;for(var l=0,c=i.length;c>l;l++)i[l].call(o,n)},removeListener:function(t,n){var o=this._listeners[t];if(o!==e)for(var i=0,s=o.length;s>i;i++)if(o[i]===n){o.splice(i,1);break}},fixPos:function(e,t){var n,o=e.raw.substr(0,t),i=o.split(/\r?\n/),s=i.length-1,r=e.line;return s>0?(r+=s,n=i[s].length+1):n=e.col+t,{line:r,col:n}},getMapAttrs:function(e){for(var t,n={},o=0,i=e.length;i>o;o++)t=e[o],n[t.name]=t.value;return n}},t}();"object"==typeof n&&n&&(n.HTMLParser=i),o.addRule({id:"alt-require",description:"The alt attribute of an <img> element must be present and alt attribute of area[href] and input[type=image] must have a value.",init:function(e,t){var n=this;e.addListener("tagstart",function(o){var i,s=o.tagName.toLowerCase(),r=e.getMapAttrs(o.attrs),a=o.col+s.length+1;"img"!==s||"alt"in r?("area"===s&&"href"in r||"input"===s&&"image"===r.type)&&("alt"in r&&""!==r.alt||(i="area"===s?"area[href]":"input[type=image]",t.warn("The alt attribute of "+i+" must have a value.",o.line,a,n,o.raw))):t.warn("An alt attribute must be present on <img> elements.",o.line,a,n,o.raw)})}}),o.addRule({id:"attr-lowercase",description:"All attribute names must be in lowercase.",init:function(e,t,n){var o=this,i=Array.isArray(n)?n:[];e.addListener("tagstart",function(e){for(var n,s=e.attrs,r=e.col+e.tagName.length+1,a=0,l=s.length;l>a;a++){n=s[a];var c=n.name;-1===i.indexOf(c)&&c!==c.toLowerCase()&&t.error("The attribute name of [ "+c+" ] must be in lowercase.",e.line,r+n.index,o,n.raw)}})}}),o.addRule({id:"attr-no-duplication",description:"Elements cannot have duplicate attributes.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var o,i,s=e.attrs,r=e.col+e.tagName.length+1,a={},l=0,c=s.length;c>l;l++)o=s[l],i=o.name,!0===a[i]&&t.error("Duplicate of attribute name [ "+o.name+" ] was found.",e.line,r+o.index,n,o.raw),a[i]=!0})}}),o.addRule({id:"attr-unsafe-chars",description:"Attribute values cannot contain unsafe chars.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var o,i,s=e.attrs,r=e.col+e.tagName.length+1,a=0,l=s.length;l>a;a++)if(o=s[a],null!==(i=o.value.match(/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/))){var c=escape(i[0]).replace(/%u/,"\\u").replace(/%/,"\\x");t.warn("The value of attribute [ "+o.name+" ] cannot contain an unsafe char [ "+c+" ].",e.line,r+o.index,n,o.raw)}})}}),o.addRule({id:"attr-value-double-quotes",description:"Attribute values must be in double quotes.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var o,i=e.attrs,s=e.col+e.tagName.length+1,r=0,a=i.length;a>r;r++)o=i[r],(""!==o.value&&'"'!==o.quote||""===o.value&&"'"===o.quote)&&t.error("The value of attribute [ "+o.name+" ] must be in double quotes.",e.line,s+o.index,n,o.raw)})}}),o.addRule({id:"attr-value-not-empty",description:"All attributes must have values.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var o,i=e.attrs,s=e.col+e.tagName.length+1,r=0,a=i.length;a>r;r++)o=i[r],""===o.quote&&""===o.value&&t.warn("The attribute [ "+o.name+" ] must have a value.",e.line,s+o.index,n,o.raw)})}}),o.addRule({id:"csslint",description:"Scan css with csslint.",init:function(t,o,i){var s=this;t.addListener("cdata",function(t){if("style"===t.tagName.toLowerCase()){var r;if(r="object"==typeof n&&e?e("csslint").CSSLint.verify:CSSLint.verify,void 0!==i){var a=t.line-1,l=t.col-1;try{r(t.raw,i).messages.forEach(function(e){var t=e.line;o["warning"===e.type?"warn":"error"]("["+e.rule.id+"] "+e.message,a+t,(1===t?l:0)+e.col,s,e.evidence)})}catch(e){}}}})}}),o.addRule({id:"doctype-first",description:"Doctype must be declared first.",init:function(e,t){var n=this,o=function(i){"start"===i.type||"text"===i.type&&/^\s*$/.test(i.raw)||(("comment"!==i.type&&!1===i.long||!1===/^DOCTYPE\s+/i.test(i.content))&&t.error("Doctype must be declared first.",i.line,i.col,n,i.raw),e.removeListener("all",o))};e.addListener("all",o)}}),o.addRule({id:"doctype-html5",description:'Invalid doctype. Use: "<!DOCTYPE html>"',init:function(e,t){function n(e){!1===e.long&&"doctype html"!==e.content.toLowerCase()&&t.warn('Invalid doctype. Use: "<!DOCTYPE html>"',e.line,e.col,i,e.raw)}function o(){e.removeListener("comment",n),e.removeListener("tagstart",o)}var i=this;e.addListener("all",n),e.addListener("tagstart",o)}}),o.addRule({id:"head-script-disabled",description:"The <script> tag cannot be used in a <head> tag.",init:function(e,t){function n(n){var o=e.getMapAttrs(n.attrs),a=o.type,l=n.tagName.toLowerCase();"head"===l&&(r=!0),!0!==r||"script"!==l||a&&!0!==s.test(a)||t.warn("The <script> tag cannot be used in a <head> tag.",n.line,n.col,i,n.raw)}function o(t){"head"===t.tagName.toLowerCase()&&(e.removeListener("tagstart",n),e.removeListener("tagend",o))}var i=this,s=/^(text\/javascript|application\/javascript)$/i,r=!1;e.addListener("tagstart",n),e.addListener("tagend",o)}}),o.addRule({id:"href-abs-or-rel",description:"An href attribute must be either absolute or relative.",init:function(e,t,n){var o=this,i="abs"===n?"absolute":"relative";e.addListener("tagstart",function(e){for(var n,s=e.attrs,r=e.col+e.tagName.length+1,a=0,l=s.length;l>a;a++)if(n=s[a],"href"===n.name){("absolute"===i&&!1===/^\w+?:/.test(n.value)||"relative"===i&&!0===/^https?:\/\//.test(n.value))&&t.warn("The value of the href attribute [ "+n.value+" ] must be "+i+".",e.line,r+n.index,o,n.raw);break}})}}),o.addRule({id:"id-class-ad-disabled",description:"The id and class attributes cannot use the ad keyword, it will be blocked by adblock software.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var o,i,s=e.attrs,r=e.col+e.tagName.length+1,a=0,l=s.length;l>a;a++)o=s[a],i=o.name,/^(id|class)$/i.test(i)&&/(^|[-\_])ad([-\_]|$)/i.test(o.value)&&t.warn("The value of attribute "+i+" cannot use the ad keyword.",e.line,r+o.index,n,o.raw)})}}),o.addRule({id:"id-class-value",description:"The id and class attribute values must meet the specified rules.",init:function(e,t,n){var o,i=this,s={underline:{regId:/^[a-z\d]+(_[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by an underscore."},dash:{regId:/^[a-z\d]+(-[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by a dash."},hump:{regId:/^[a-z][a-zA-Z\d]*([A-Z][a-zA-Z\d]*)*$/,message:"The id and class attribute values must meet the camelCase style."}};if((o="string"==typeof n?s[n]:n)&&o.regId){var r=o.regId,a=o.message;e.addListener("tagstart",function(e){for(var n,o=e.attrs,s=e.col+e.tagName.length+1,l=0,c=o.length;c>l;l++)if(n=o[l],"id"===n.name.toLowerCase()&&!1===r.test(n.value)&&t.warn(a,e.line,s+n.index,i,n.raw),"class"===n.name.toLowerCase())for(var u,d=n.value.split(/\s+/g),p=0,h=d.length;h>p;p++)(u=d[p])&&!1===r.test(u)&&t.warn(a,e.line,s+n.index,i,u)})}}}),o.addRule({id:"id-unique",description:"The value of id attributes must be unique.",init:function(e,t){var n=this,o={};e.addListener("tagstart",function(e){for(var i,s,r=e.attrs,a=e.col+e.tagName.length+1,l=0,c=r.length;c>l;l++)if(i=r[l],"id"===i.name.toLowerCase()){(s=i.value)&&(void 0===o[s]?o[s]=1:o[s]++,o[s]>1&&t.error("The id value [ "+s+" ] must be unique.",e.line,a+i.index,n,i.raw));break}})}}),o.addRule({id:"inline-script-disabled",description:"Inline script cannot be use.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var o,i,s=e.attrs,r=e.col+e.tagName.length+1,a=/^on(unload|message|submit|select|scroll|resize|mouseover|mouseout|mousemove|mouseleave|mouseenter|mousedown|load|keyup|keypress|keydown|focus|dblclick|click|change|blur|error)$/i,l=0,c=s.length;c>l;l++)o=s[l],i=o.name.toLowerCase(),!0===a.test(i)?t.warn("Inline script [ "+o.raw+" ] cannot be use.",e.line,r+o.index,n,o.raw):("src"===i||"href"===i)&&/^\s*javascript:/i.test(o.value)&&t.warn("Inline script [ "+o.raw+" ] cannot be use.",e.line,r+o.index,n,o.raw)})}}),o.addRule({id:"inline-style-disabled",description:"Inline style cannot be use.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var o,i=e.attrs,s=e.col+e.tagName.length+1,r=0,a=i.length;a>r;r++)o=i[r],"style"===o.name.toLowerCase()&&t.warn("Inline style [ "+o.raw+" ] cannot be use.",e.line,s+o.index,n,o.raw)})}}),o.addRule({id:"jshint",description:"Scan script with jshint.",init:function(t,o,i){var s=this;t.addListener("cdata",function(r){if("script"===r.tagName.toLowerCase()){var a=t.getMapAttrs(r.attrs),l=a.type;if(void 0!==a.src||l&&!1===/^(text\/javascript)$/i.test(l))return;var c;if(c="object"==typeof n&&e?e("jshint").JSHINT:JSHINT,void 0!==i){var u=r.line-1,d=r.col-1,p=r.raw.replace(/\t/g," ");try{!1===c(p,i)&&c.errors.forEach(function(e){var t=e.line;o.warn(e.reason,u+t,(1===t?d:0)+e.character,s,e.evidence)})}catch(e){}}}})}}),o.addRule({id:"space-tab-mixed-disabled",description:"Do not mix tabs and spaces for indentation.",init:function(e,t,n){var o=this,i="nomix",s=null;if("string"==typeof n){var r=n.match(/^([a-z]+)(\d+)?/);i=r[1],s=r[2]&&parseInt(r[2],10)}e.addListener("text",function(n){for(var r,a=n.raw,l=/(^|\r?\n)([ \t]+)/g;r=l.exec(a);){var c=e.fixPos(n,r.index+r[1].length);if(1===c.col){var u=r[2];"space"===i?s?(!1===/^ +$/.test(u)||0!=u.length%s)&&t.warn("Please use space for indentation and keep "+s+" length.",c.line,1,o,n.raw):!1===/^ +$/.test(u)&&t.warn("Please use space for indentation.",c.line,1,o,n.raw):"tab"===i&&!1===/^\t+$/.test(u)?t.warn("Please use tab for indentation.",c.line,1,o,n.raw):!0===/ +\t|\t+ /.test(u)&&t.warn("Do not mix tabs and spaces for indentation.",c.line,1,o,n.raw)}}})}}),o.addRule({id:"spec-char-escape",description:"Special characters must be escaped.",init:function(e,t){var n=this;e.addListener("text",function(o){for(var i,s=o.raw,r=/[<>]/g;i=r.exec(s);){var a=e.fixPos(o,i.index);t.error("Special characters must be escaped : [ "+i[0]+" ].",a.line,a.col,n,o.raw)}})}}),o.addRule({id:"src-not-empty",description:"The src attribute of an img(script,link) must have a value.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){for(var o,i=e.tagName,s=e.attrs,r=e.col+i.length+1,a=0,l=s.length;l>a;a++)o=s[a],(!0===/^(img|script|embed|bgsound|iframe)$/.test(i)&&"src"===o.name||"link"===i&&"href"===o.name||"object"===i&&"data"===o.name)&&""===o.value&&t.error("The attribute [ "+o.name+" ] of the tag [ "+i+" ] must have a value.",e.line,r+o.index,n,o.raw)})}}),o.addRule({id:"style-disabled",description:"<style> tags cannot be used.",init:function(e,t){var n=this;e.addListener("tagstart",function(e){"style"===e.tagName.toLowerCase()&&t.warn("The <style> tag cannot be used.",e.line,e.col,n,e.raw)})}}),o.addRule({id:"tag-pair",description:"Tag must be paired.",init:function(e,t){var n=this,o=[],i=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");e.addListener("tagstart",function(e){var t=e.tagName.toLowerCase();void 0!==i[t]||e.close||o.push({tagName:t,line:e.line,raw:e.raw})}),e.addListener("tagend",function(e){for(var i=e.tagName.toLowerCase(),s=o.length-1;s>=0&&o[s].tagName!==i;s--);if(s>=0){for(var r=[],a=o.length-1;a>s;a--)r.push("</"+o[a].tagName+">");if(r.length>0){var l=o[o.length-1];t.error("Tag must be paired, missing: [ "+r.join("")+" ], start tag match failed [ "+l.raw+" ] on line "+l.line+".",e.line,e.col,n,e.raw)}o.length=s}else t.error("Tag must be paired, no start tag: [ "+e.raw+" ]",e.line,e.col,n,e.raw)}),e.addListener("end",function(e){for(var i=[],s=o.length-1;s>=0;s--)i.push("</"+o[s].tagName+">");if(i.length>0){var r=o[o.length-1];t.error("Tag must be paired, missing: [ "+i.join("")+" ], open tag match failed [ "+r.raw+" ] on line "+r.line+".",e.line,e.col,n,"")}})}}),o.addRule({id:"tag-self-close",description:"Empty tags must be self closed.",init:function(e,t){var n=this,o=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");e.addListener("tagstart",function(e){var i=e.tagName.toLowerCase();void 0!==o[i]&&(e.close||t.warn("The empty tag : [ "+i+" ] must be self closed.",e.line,e.col,n,e.raw))})}}),o.addRule({id:"tagname-lowercase",description:"All html element names must be in lowercase.",init:function(e,t){var n=this;e.addListener("tagstart,tagend",function(e){var o=e.tagName;o!==o.toLowerCase()&&t.error("The html element name of [ "+o+" ] must be in lowercase.",e.line,e.col,n,e.raw)})}}),o.addRule({id:"title-require",description:"<title> must be present in <head> tag.",init:function(e,t){function n(e){var t=e.tagName.toLowerCase();"head"===t?s=!0:"title"===t&&s&&(r=!0)}function o(s){var a=s.tagName.toLowerCase();if(r&&"title"===a){var l=s.lastEvent;("text"!==l.type||"text"===l.type&&!0===/^\s*$/.test(l.raw))&&t.error("<title></title> must not be empty.",s.line,s.col,i,s.raw)}else"head"===a&&(!1===r&&t.error("<title> must be present in <head> tag.",s.line,s.col,i,s.raw),e.removeListener("tagstart",n),e.removeListener("tagend",o))}var i=this,s=!1,r=!1;e.addListener("tagstart",n),e.addListener("tagend",o)}})},{csslint:192,jshint:192}],200:[function(e,t,n){!function(e,n,o){function i(e,t,n){if(e.addEventListener)return void e.addEventListener(t,n,!1);e.attachEvent("on"+t,n)}function s(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return _[e.which]?_[e.which]:b[e.which]?b[e.which]:String.fromCharCode(e.which).toLowerCase()}function r(e,t){return e.sort().join(",")===t.sort().join(",")}function a(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function c(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function u(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function d(){if(!v){v={};for(var e in _)e>95&&e<112||_.hasOwnProperty(e)&&(v[_[e]]=e)}return v}function p(e,t,n){return n||(n=d()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function h(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function g(e,t){var n,o,i,s=[];for(n=h(e),i=0;i<n.length;++i)o=n[i],w[o]&&(o=w[o]),t&&"keypress"!=t&&y[o]&&(o=y[o],s.push("shift")),u(o)&&s.push(o);return t=p(o,s,t),{key:o,modifiers:s,action:t}}function m(e,t){return null!==e&&e!==n&&(e===t||m(e.parentNode,t))}function f(e){function t(e){e=e||{};var t,n=!1;for(t in y)e[t]?n=!0:y[t]=0;n||(k=!1)}function o(e,t,n,o,i,s){var a,l,c=[],d=n.type;if(!_._callbacks[e])return[];for("keyup"==d&&u(e)&&(t=[e]),a=0;a<_._callbacks[e].length;++a)if(l=_._callbacks[e][a],(o||!l.seq||y[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!n.metaKey&&!n.ctrlKey||r(t,l.modifiers))){var p=!o&&l.combo==i,h=o&&l.seq==o&&l.level==s;(p||h)&&_._callbacks[e].splice(a,1),c.push(l)}return c}function d(e,t,n,o){_.stopCallback(t,t.target||t.srcElement,n,o)||!1===e(t,n)&&(l(t),c(t))}function p(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=s(e);if(t)return"keyup"==e.type&&w===t?void(w=!1):void _.handleKey(t,a(e),e)}function h(){clearTimeout(b),b=setTimeout(t,1e3)}function m(e,n,o,i){function r(n){d(o,n,e),"keyup"!==i&&(w=s(n)),setTimeout(t,10)}y[e]=0;for(var a=0;a<n.length;++a){var l=a+1===n.length,c=l?r:function(t){return function(){k=t,++y[e],h()}}(i||g(n[a+1]).action);v(n[a],c,i,e,a)}}function v(e,t,n,i,s){_._directMap[e+":"+n]=t,e=e.replace(/\s+/g," ");var r,a=e.split(" ");if(a.length>1)return void m(e,a,t,n);r=g(e,n),_._callbacks[r.key]=_._callbacks[r.key]||[],o(r.key,r.modifiers,{type:r.action},i,e,s),_._callbacks[r.key][i?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:i,level:s,combo:e})}var _=this;if(e=e||n,!(_ instanceof f))return new f(e);_.target=e,_._callbacks={},_._directMap={};var b,y={},w=!1,x=!1,k=!1;_._handleKey=function(e,n,i){var s,r=o(e,n,i),a={},l=0,c=!1;for(s=0;s<r.length;++s)r[s].seq&&(l=Math.max(l,r[s].level));for(s=0;s<r.length;++s)if(r[s].seq){if(r[s].level!=l)continue;c=!0,a[r[s].seq]=1,d(r[s].callback,i,r[s].combo,r[s].seq)}else c||d(r[s].callback,i,r[s].combo);var p="keypress"==i.type&&x;i.type!=k||u(e)||p||t(a),x=c&&"keydown"==i.type},_._bindMultiple=function(e,t,n){for(var o=0;o<e.length;++o)v(e[o],t,n)},i(e,"keypress",p),i(e,"keydown",p),i(e,"keyup",p)}if(e){for(var v,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},b={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},w={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},x=1;x<20;++x)_[111+x]="f"+x;for(x=0;x<=9;++x)_[x+96]=x;f.prototype.bind=function(e,t,n){var o=this;return e=e instanceof Array?e:[e],o._bindMultiple.call(o,e,t,n),o},f.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},f.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},f.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},f.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!m(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},f.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},f.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(_[t]=e[t]);v=null},f.init=function(){var e=f(n)
;for(var t in e)"_"!==t.charAt(0)&&(f[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},f.init(),e.Mousetrap=f,void 0!==t&&t.exports&&(t.exports=f),"function"==typeof define&&define.amd&&define(function(){return f})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},{}],201:[function(e,t,n){!function(e){var t={},n=e.prototype.stopCallback;e.prototype.stopCallback=function(e,o,i,s){var r=this;return!!r.paused||!t[i]&&!t[s]&&n.call(r,e,o,i)},e.prototype.bindGlobal=function(e,n,o){if(this.bind(e,n,o),e instanceof Array)for(var i=0;i<e.length;i++)t[e[i]]=!0;else t[e]=!0},e.init()}(Mousetrap)},{}],202:[function(e,t,n){!function(e,o){"function"==typeof define&&define.amd?define(o):"object"==typeof n?t.exports=o():e.NProgress=o()}(this,function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,o){var i;return i="translate3d"===c.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===c.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},i.transition="all "+n+"ms "+o,i}function o(e,t){return("string"==typeof e?e:r(e)).indexOf(" "+t+" ")>=0}function i(e,t){var n=r(e),i=n+t;o(n,t)||(e.className=i.substring(1))}function s(e,t){var n,i=r(e);o(e,t)&&(n=i.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function r(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function a(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={};l.version="0.2.0";var c=l.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};l.configure=function(e){var t,n;for(t in e)void 0!==(n=e[t])&&e.hasOwnProperty(t)&&(c[t]=n);return this},l.status=null,l.set=function(t){var o=l.isStarted();t=e(t,c.minimum,1),l.status=1===t?null:t;var i=l.render(!o),s=i.querySelector(c.barSelector),r=c.speed,a=c.easing;return i.offsetWidth,u(function(e){""===c.positionUsing&&(c.positionUsing=l.getPositioningCSS()),d(s,n(t,r,a)),1===t?(d(i,{transition:"none",opacity:1}),i.offsetWidth,setTimeout(function(){d(i,{transition:"all "+r+"ms linear",opacity:0}),setTimeout(function(){l.remove(),e()},r)},r)):setTimeout(e,r)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(0);var e=function(){setTimeout(function(){l.status&&(l.trickle(),e())},c.trickleSpeed)};return c.trickle&&e(),this},l.done=function(e){return e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(t){var n=l.status;return n?("number"!=typeof t&&(t=(1-n)*e(Math.random()*n,.1,.95)),n=e(n+t,0,.994),l.set(n)):l.start()},l.trickle=function(){return l.inc(Math.random()*c.trickleRate)},function(){var e=0,t=0;l.promise=function(n){return n&&"resolved"!==n.state()?(0===t&&l.start(),e++,t++,n.always(function(){t--,0===t?(e=0,l.done()):l.set((e-t)/e)}),this):this}}(),l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");i(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=c.template;var o,s=n.querySelector(c.barSelector),r=e?"-100":t(l.status||0),u=document.querySelector(c.parent);return d(s,{transition:"all 0 linear",transform:"translate3d("+r+"%,0,0)"}),c.showSpinner||(o=n.querySelector(c.spinnerSelector))&&a(o),u!=document.body&&i(u,"nprogress-custom-parent"),u.appendChild(n),n},l.remove=function(){s(document.documentElement,"nprogress-busy"),s(document.querySelector(c.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&a(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var u=function(){function e(){var n=t.shift();n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),d=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var n,o=i.length,s=e.charAt(0).toUpperCase()+e.slice(1);o--;)if((n=i[o]+s)in t)return n;return e}function n(n){return n=e(n),s[n]||(s[n]=t(n))}function o(e,t,o){t=n(t),e.style[t]=o}var i=["Webkit","O","Moz","ms"],s={};return function(e,t){var n,i,s=arguments;if(2==s.length)for(n in t)void 0!==(i=t[n])&&t.hasOwnProperty(n)&&o(e,n,i);else o(e,s[1],s[2])}}();return l})},{}],203:[function(e,t,n){"use strict";t.exports=e("./src/js/adaptor/jquery")},{"./src/js/adaptor/jquery":204}],204:[function(e,t,n){"use strict";function o(e){e.fn.perfectScrollbar=function(e){return this.each(function(){if("object"==typeof e||void 0===e){var t=e;s.get(this)||i.initialize(this,t)}else{var n=e;"update"===n?i.update(this):"destroy"===n&&i.destroy(this)}})}}var i=e("../main"),s=e("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],o);else{var r=window.jQuery?window.jQuery:window.$;void 0!==r&&o(r)}t.exports=o},{"../main":210,"../plugin/instances":221}],205:[function(e,t,n){"use strict";function o(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function i(e,t){var n=e.className.split(" "),o=n.indexOf(t);o>=0&&n.splice(o,1),e.className=n.join(" ")}n.add=function(e,t){e.classList?e.classList.add(t):o(e,t)},n.remove=function(e,t){e.classList?e.classList.remove(t):i(e,t)},n.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],206:[function(e,t,n){"use strict";function o(e,t){return window.getComputedStyle(e)[t]}function i(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function s(e,t){for(var n in t){var o=t[n];"number"==typeof o&&(o=o.toString()+"px"),e.style[n]=o}return e}var r={};r.e=function(e,t){var n=document.createElement(e);return n.className=t,n},r.appendTo=function(e,t){return t.appendChild(e),e},r.css=function(e,t,n){return"object"==typeof t?s(e,t):void 0===n?o(e,t):i(e,t,n)},r.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},r.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return r.matches(e,t)})},t.exports=r},{}],207:[function(e,t,n){"use strict";var o=function(e){this.element=e,this.events={}};o.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},o.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter(function(o){return!(!n||o===t)||(this.element.removeEventListener(e,o,!1),!1)},this)},o.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new o(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},i.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,n){var o=this.eventElement(e),i=function(e){o.unbind(t,i),n(e)};o.bind(t,i)},t.exports=i},{}],208:[function(e,t,n){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],209:[function(e,t,n){"use strict";var o=e("./class"),i=e("./dom"),s=n.toInt=function(e){return parseInt(e,10)||0},r=n.clone=function(e){if(e){if(e.constructor===Array)return e.map(r);if("object"==typeof e){var t={};for(var n in e)t[n]=r(e[n]);return t}return e}return null};n.extend=function(e,t){var n=r(e);for(var o in t)n[o]=r(t[o]);return n},n.isEditable=function(e){return i.matches(e,"input,[contenteditable]")||i.matches(e,"select,[contenteditable]")||i.matches(e,"textarea,[contenteditable]")||i.matches(e,"button,[contenteditable]")},n.removePsClasses=function(e){for(var t=o.list(e),n=0;n<t.length;n++){var i=t[n];0===i.indexOf("ps-")&&o.remove(e,i)}},n.outerWidth=function(e){return s(i.css(e,"width"))+s(i.css(e,"paddingLeft"))+s(i.css(e,"paddingRight"))+s(i.css(e,"borderLeftWidth"))+s(i.css(e,"borderRightWidth"))},n.startScrolling=function(e,t){o.add(e,"ps-in-scrolling"),void 0!==t?o.add(e,"ps-"+t):(o.add(e,"ps-x"),o.add(e,"ps-y"))},n.stopScrolling=function(e,t){o.remove(e,"ps-in-scrolling"),void 0!==t?o.remove(e,"ps-"+t):(o.remove(e,"ps-x"),o.remove(e,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":205,"./dom":206}],210:[function(e,t,n){"use strict";var o=e("./plugin/destroy"),i=e("./plugin/initialize"),s=e("./plugin/update");t.exports={initialize:i,update:s,destroy:o}},{"./plugin/destroy":212,"./plugin/initialize":220,"./plugin/update":224}],211:[function(e,t,n){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],212:[function(e,t,n){"use strict";var o=e("../lib/helper"),i=e("../lib/dom"),s=e("./instances");t.exports=function(e){var t=s.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),o.removePsClasses(e),s.remove(e))}},{"../lib/dom":206,"../lib/helper":209,"./instances":221}],213:[function(e,t,n){"use strict";function o(e,t){function n(e){return e.getBoundingClientRect()}var o=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",o),t.event.bind(t.scrollbarYRail,"click",function(o){var i=o.pageY-window.pageYOffset-n(t.scrollbarYRail).top,a=i>t.scrollbarYTop?1:-1;r(e,"top",e.scrollTop+a*t.containerHeight),s(e),o.stopPropagation()}),t.event.bind(t.scrollbarX,"click",o),t.event.bind(t.scrollbarXRail,"click",function(o){var i=o.pageX-window.pageXOffset-n(t.scrollbarXRail).left,a=i>t.scrollbarXLeft?1:-1;r(e,"left",e.scrollLeft+a*t.containerWidth),s(e),o.stopPropagation()})}var i=e("../instances"),s=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e){o(e,i.get(e))}},{"../instances":221,"../update-geometry":222,"../update-scroll":223}],214:[function(e,t,n){"use strict";function o(e,t){function n(n){var i=o+n*t.railXRatio,r=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=i<0?0:i>r?r:i;var a=s.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",a)}var o=null,i=null,a=function(t){n(t.pageX-i),l(e),t.stopPropagation(),t.preventDefault()},u=function(){s.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarX,"mousedown",function(n){i=n.pageX,o=s.toInt(r.css(t.scrollbarX,"left"))*t.railXRatio,s.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function i(e,t){function n(n){var i=o+n*t.railYRatio,r=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=i<0?0:i>r?r:i;var a=s.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",a)}var o=null,i=null,a=function(t){n(t.pageY-i),l(e),t.stopPropagation(),t.preventDefault()},u=function(){s.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",a)};t.event.bind(t.scrollbarY,"mousedown",function(n){i=n.pageY,o=s.toInt(r.css(t.scrollbarY,"top"))*t.railYRatio,s.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",a),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var s=e("../../lib/helper"),r=e("../../lib/dom"),a=e("../instances"),l=e("../update-geometry"),c=e("../update-scroll");t.exports=function(e){var t=a.get(e);o(e,t),i(e,t)}},{"../../lib/dom":206,"../../lib/helper":209,"../instances":221,"../update-geometry":222,"../update-scroll":223}],215:[function(e,t,n){"use strict";function o(e,t){function n(n,o){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&o>0||i>=t.contentHeight-t.containerHeight&&o<0)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===o){if(!t.scrollbarXActive)return!1;if(0===s&&n<0||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var o=!1;t.event.bind(e,"mouseenter",function(){o=!0}),t.event.bind(e,"mouseleave",function(){o=!1});var r=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=s.matches(t.scrollbarX,":focus")||s.matches(t.scrollbarY,":focus");if(o||u){var d=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(d){if("IFRAME"===d.tagName)d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(i.isEditable(d))return}var p=0,h=0;switch(c.which){case 37:p=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:h=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:p=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:h=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:h=90;break;case 32:h=c.shiftKey?90:-90;break;case 34:h=-90;break;case 35:h=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:h=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-h),l(e,"left",e.scrollLeft+p),a(e),r=n(p,h),r&&c.preventDefault()}}})}var i=e("../../lib/helper"),s=e("../../lib/dom"),r=e("../instances"),a=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){o(e,r.get(e))}},{"../../lib/dom":206,"../../lib/helper":209,"../instances":221,"../update-geometry":222,"../update-scroll":223}],216:[function(e,t,n){"use strict";function o(e,t){function n(n,o){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&o>0||i>=t.contentHeight-t.containerHeight&&o<0)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===o){if(!t.scrollbarXActive)return!1;if(0===s&&n<0||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function o(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}function i(t,n){var o=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(o){if(!window.getComputedStyle(o).overflow.match(/(scroll|auto)/))return!1;var i=o.scrollHeight-o.clientHeight;if(i>0&&!(0===o.scrollTop&&n>0||o.scrollTop===i&&n<0))return!0;var s=o.scrollLeft-o.clientWidth;if(s>0&&!(0===o.scrollLeft&&t<0||o.scrollLeft===s&&t>0))return!0}return!1}function a(a){var c=o(a),u=c[0],d=c[1];i(u,d)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(d?r(e,"top",e.scrollTop-d*t.settings.wheelSpeed):r(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?r(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):r(e,"left",e.scrollLeft-d*t.settings.wheelSpeed),l=!0):(r(e,"top",e.scrollTop-d*t.settings.wheelSpeed),r(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),s(e),(l=l||n(u,d))&&(a.stopPropagation(),a.preventDefault()))}var l=!1;void 0!==window.onwheel?t.event.bind(e,"wheel",a):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",a)}var i=e("../instances"),s=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e){o(e,i.get(e))}},{"../instances":221,"../update-geometry":222,"../update-scroll":223}],217:[function(e,t,n){"use strict";function o(e,t){t.event.bind(e,"scroll",function(){s(e)})}var i=e("../instances"),s=e("../update-geometry");t.exports=function(e){o(e,i.get(e))}},{"../instances":221,"../update-geometry":222}],218:[function(e,t,n){"use strict";function o(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function o(){c||(c=setInterval(function(){if(!s.get(e))return void clearInterval(c);a(e,"top",e.scrollTop+u.top),a(e,"left",e.scrollLeft+u.left),r(e)},50))}function l(){c&&(clearInterval(c),c=null),i.stopScrolling(e)}var c=null,u={top:0,left:0},d=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?d=!0:(d=!1,l())}),t.event.bind(window,"mouseup",function(){d&&(d=!1,l())}),t.event.bind(window,"keyup",function(){d&&(d=!1,l())}),t.event.bind(window,"mousemove",function(t){if(d){var n={x:t.pageX,y:t.pageY},s={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<s.left+3?(u.left=-5,i.startScrolling(e,"x")):n.x>s.right-3?(u.left=5,i.startScrolling(e,"x")):u.left=0,n.y<s.top+3?(u.top=s.top+3-n.y<5?-5:-20,i.startScrolling(e,"y")):n.y>s.bottom-3?(u.top=n.y-s.bottom+3<5?5:20,i.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():o()}})}var i=e("../../lib/helper"),s=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){o(e,s.get(e))}},{"../../lib/helper":209,"../instances":221,"../update-geometry":222,"../update-scroll":223}],219:[function(e,t,n){"use strict";function o(e,t,n,o){function i(n,o){var i=e.scrollTop,s=e.scrollLeft,r=Math.abs(n),a=Math.abs(o);if(a>r){if(o<0&&i===t.contentHeight-t.containerHeight||o>0&&0===i)return!t.settings.swipePropagation}else if(r>a&&(n<0&&s===t.contentWidth-t.containerWidth||n>0&&0===s))return!t.settings.swipePropagation;return!0}function l(t,n){a(e,"top",e.scrollTop-n),a(e,"left",e.scrollLeft-t),r(e)}function c(){y=!0}function u(){y=!1}function d(e){return e.targetTouches?e.targetTouches[0]:e}function p(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function h(e){if(p(e)){w=!0;var t=d(e);f.pageX=t.pageX,f.pageY=t.pageY,v=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function g(e){if(!w&&t.settings.swipePropagation&&h(e),!y&&w&&p(e)){var n=d(e),o={pageX:n.pageX,pageY:n.pageY},s=o.pageX-f.pageX,r=o.pageY-f.pageY;l(s,r),f=o;var a=(new Date).getTime(),c=a-v;c>0&&(_.x=s/c,_.y=r/c,v=a),i(s,r)&&(e.stopPropagation(),e.preventDefault())}}function m(){!y&&w&&(w=!1,clearInterval(b),b=setInterval(function(){return s.get(e)&&(_.x||_.y)?Math.abs(_.x)<.01&&Math.abs(_.y)<.01?void clearInterval(b):(l(30*_.x,30*_.y),_.x*=.8,void(_.y*=.8)):void clearInterval(b)},10))}var f={},v=0,_={},b=null,y=!1,w=!1;n?(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",h),t.event.bind(e,"touchmove",g),t.event.bind(e,"touchend",m)):o&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",h),t.event.bind(e,"pointermove",g),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",h),t.event.bind(e,"MSPointerMove",g),t.event.bind(e,"MSPointerUp",m)))}var i=e("../../lib/helper"),s=e("../instances"),r=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){if(i.env.supportsTouch||i.env.supportsIePointer){o(e,s.get(e),i.env.supportsTouch,i.env.supportsIePointer)}}},{"../../lib/helper":209,"../instances":221,"../update-geometry":222,"../update-scroll":223}],220:[function(e,t,n){"use strict";var o=e("../lib/helper"),i=e("../lib/class"),s=e("./instances"),r=e("./update-geometry"),a={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},l=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var n=s.add(e);n.settings=o.extend(n.settings,t),i.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){a[t](e)}),l(e),r(e)}},{"../lib/class":205,"../lib/helper":209,"./handler/click-rail":213,"./handler/drag-scrollbar":214,"./handler/keyboard":215,"./handler/mouse-wheel":216,"./handler/native-scroll":217,"./handler/selection":218,"./handler/touch":219,"./instances":221,"./update-geometry":222}],221:[function(e,t,n){"use strict";function o(e){function t(){l.add(e,"ps-focus")}function n(){l.remove(e,"ps-focus")}var o=this;o.settings=a.clone(c),o.containerWidth=null,o.containerHeight=null,o.contentWidth=null,o.contentHeight=null,o.isRtl="rtl"===u.css(e,"direction"),o.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),o.negativeScrollAdjustment=o.isNegativeScroll?e.scrollWidth-e.clientWidth:0,o.event=new d,o.ownerDocument=e.ownerDocument||document,o.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),o.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),o.scrollbarXRail),o.scrollbarX.setAttribute("tabindex",0),o.event.bind(o.scrollbarX,"focus",t),o.event.bind(o.scrollbarX,"blur",n),o.scrollbarXActive=null,o.scrollbarXWidth=null,o.scrollbarXLeft=null,o.scrollbarXBottom=a.toInt(u.css(o.scrollbarXRail,"bottom")),o.isScrollbarXUsingBottom=o.scrollbarXBottom===o.scrollbarXBottom,o.scrollbarXTop=o.isScrollbarXUsingBottom?null:a.toInt(u.css(o.scrollbarXRail,"top")),o.railBorderXWidth=a.toInt(u.css(o.scrollbarXRail,"borderLeftWidth"))+a.toInt(u.css(o.scrollbarXRail,"borderRightWidth")),u.css(o.scrollbarXRail,"display","block"),o.railXMarginWidth=a.toInt(u.css(o.scrollbarXRail,"marginLeft"))+a.toInt(u.css(o.scrollbarXRail,"marginRight")),u.css(o.scrollbarXRail,"display",""),o.railXWidth=null,o.railXRatio=null,o.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),o.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),o.scrollbarYRail),o.scrollbarY.setAttribute("tabindex",0),o.event.bind(o.scrollbarY,"focus",t),o.event.bind(o.scrollbarY,"blur",n),o.scrollbarYActive=null,o.scrollbarYHeight=null,o.scrollbarYTop=null,o.scrollbarYRight=a.toInt(u.css(o.scrollbarYRail,"right")),o.isScrollbarYUsingRight=o.scrollbarYRight===o.scrollbarYRight,o.scrollbarYLeft=o.isScrollbarYUsingRight?null:a.toInt(u.css(o.scrollbarYRail,"left")),o.scrollbarYOuterWidth=o.isRtl?a.outerWidth(o.scrollbarY):null,o.railBorderYWidth=a.toInt(u.css(o.scrollbarYRail,"borderTopWidth"))+a.toInt(u.css(o.scrollbarYRail,"borderBottomWidth")),u.css(o.scrollbarYRail,"display","block"),o.railYMarginHeight=a.toInt(u.css(o.scrollbarYRail,"marginTop"))+a.toInt(u.css(o.scrollbarYRail,"marginBottom")),u.css(o.scrollbarYRail,"display",""),o.railYHeight=null,o.railYRatio=null}function i(e){return e.getAttribute("data-ps-id")}function s(e,t){e.setAttribute("data-ps-id",t)}function r(e){e.removeAttribute("data-ps-id")}var a=e("../lib/helper"),l=e("../lib/class"),c=e("./default-setting"),u=e("../lib/dom"),d=e("../lib/event-manager"),p=e("../lib/guid"),h={};n.add=function(e){var t=p();return s(e,t),h[t]=new o(e),h[t]},n.remove=function(e){delete h[i(e)],r(e)},n.get=function(e){return h[i(e)]}},{"../lib/class":205,"../lib/dom":206,"../lib/event-manager":207,"../lib/guid":208,"../lib/helper":209,"./default-setting":211}],222:[function(e,t,n){"use strict";function o(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function i(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,a.css(t.scrollbarXRail,n);var o={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?o.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:o.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?o.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:o.left=t.scrollbarYLeft+e.scrollLeft,a.css(t.scrollbarYRail,o),a.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),a.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var s=e("../lib/helper"),r=e("../lib/class"),a=e("../lib/dom"),l=e("./instances"),c=e("./update-scroll");t.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=a.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){a.remove(e)}),a.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=a.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){a.remove(e)}),a.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=o(t,s.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=s.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=o(t,s.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=s.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),i(e,t),t.scrollbarXActive?r.add(e,"ps-active-x"):(r.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?r.add(e,"ps-active-y"):(r.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},{"../lib/class":205,"../lib/dom":206,"../lib/helper":209,"./instances":221,"./update-scroll":223}],223:[function(e,t,n){"use strict";var o,i,s=e("./instances"),r=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};t.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(r("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(r("ps-x-reach-start")));var a=s.get(e);"top"===t&&n>=a.contentHeight-a.containerHeight&&(n=a.contentHeight-a.containerHeight,n-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(r("ps-y-reach-end"))),"left"===t&&n>=a.contentWidth-a.containerWidth&&(n=a.contentWidth-a.containerWidth,n-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(r("ps-x-reach-end"))),o||(o=e.scrollTop),i||(i=e.scrollLeft),"top"===t&&n<o&&e.dispatchEvent(r("ps-scroll-up")),"top"===t&&n>o&&e.dispatchEvent(r("ps-scroll-down")),"left"===t&&n<i&&e.dispatchEvent(r("ps-scroll-left")),"left"===t&&n>i&&e.dispatchEvent(r("ps-scroll-right")),"top"===t&&(e.scrollTop=o=n,e.dispatchEvent(r("ps-scroll-y"))),"left"===t&&(e.scrollLeft=i=n,e.dispatchEvent(r("ps-scroll-x")))}},{"./instances":221}],224:[function(e,t,n){"use strict";var o=e("../lib/helper"),i=e("../lib/dom"),s=e("./instances"),r=e("./update-geometry"),a=e("./update-scroll");t.exports=function(e){var t=s.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=o.toInt(i.css(t.scrollbarXRail,"marginLeft"))+o.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=o.toInt(i.css(t.scrollbarYRail,"marginTop"))+o.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),r(e),a(e,"top",e.scrollTop),a(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":206,"../lib/helper":209,"./instances":221,"./update-geometry":222,"./update-scroll":223}],225:[function(e,t,n){var o,i="function"==typeof setImmediate;o=i?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=o},{}]},{},[4])(4)});
//# sourceMappingURL=builder.js.map
