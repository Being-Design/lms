!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CS_core=e()}}(function(){var e;return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){var i={components:{},loadedComponentGroups:[],RegisteredComponents:{},_initChannel:function(){this.channelName="cs",this.channel=Backbone.Radio.channel(this.channelName);var e=this;Backbone.Radio.debugLog=function(t,n,i){Backbone.Radio.DEBUG&&console&&console.warn&&e.radioDebug&&console.warn(Backbone.Radio._debugText(t,n,i))}},initialize:function(){this.Config=this._booleanize(this.Config),this.events=Backbone.Radio.channel("cs:event"),this.Config.debug&&(Backbone.Radio.DEBUG=!0),this.bootTime=(new Date).getTime(),this.registerComponents(e("./components"))},onBeforeStart:function(e){this.loadComponents("common")},onStart:function(){jQuery(_.bind(function(){this.loadComponents("start")},this))},loadComponents:function(e){this.Registry[e]&&_.each(this.Registry[e],function(e){this.loadComponent(e)},this)},loadComponent:function(e){if(this.components[e])return this.components[e];this.components[e]=new this.RegisteredComponents[e]({cs:this})},component:function(e){return this.components[e]?this.components[e]:{}},registerComponents:function(e){this.RegisteredComponents=_.extend(e,this.RegisteredComponents)},updateConfig:function(e){this.Config=_.deepExtend(this._booleanize(e),this.Config||{})},updateRegistry:function(e){_.each(e,function(e,t){var n=this.Registry[t]||[];this.Registry[t]=_.unique(_.union(n,e))},this)},loadTemplates:function(e){this.Templates=_.extend(this.Templates||{},e)},config:function(e){return _.has(this.Config,e)?this.Config[e]:null},debug:function(){return this.config("debug")},_booleanize:function(e){return _.each(e,function(t,n){"true"==t&&(e[n]=!0),"false"==t&&(e[n]=!1)}),e}};_.extend(i,e("./modules/cs")),i=Cornerstone.Mn.Application.extend(i),t.exports=function(e,t){(window.cs=new i({Config:e,Registry:t})).start({})}},{"./components":12,"./modules/cs":25}],2:[function(e,t,n){t.exports=Backbone.Collection.extend({model:e("../models/control")})},{"../models/control":15}],3:[function(e,t,n){t.exports=Backbone.Collection.extend({model:e("../models/element-definition")})},{"../models/element-definition":16}],4:[function(e,t,n){var i=e("./proxyable");t.exports=i.extend({model:e("../models/element"),comparator:function(e){return e.get("rank")},constructor:function(e,t){this.on("update:position",this.updatePosition),Backbone.Collection.apply(this,arguments),this.on("add",this.pageDirty),this.on("remove",this.pageDirty),this.on("sort",this.pageDirty)},create:function(e,t,n){var n=n||{};e._type||cs.warn("Elements can not be created without a type",e);var i=new this.model(e,t);return n.replace&&_.isFunction(n.replace.destroy)&&(n.replace.trigger("imminent:replacement",i),n.replace.destroy()),_.isFunction(n.after)&&n.after(i),this.updatePosition(i,_.isFinite(n.position)?n.position:this.length),i.trigger("created",i),i},pageDirty:function(){cs.channel.trigger("page:unsaved")},updatePosition:function(e,t){this.remove(e),this.each(function(e,n){var i=n;n>=t&&(i+=1),e.set("rank",i)}),e.set("rank",t),this.add(e,{at:t}),this.sort(),this.each(function(e){e.trigger("position:updated")})},getParent:function(){return this.parent||null}})},{"../models/element":17,"./proxyable":6}],5:[function(e,t,n){t.exports={Proxyable:e("./proxyable"),Element:e("./element"),ElementDefinition:e("./element-definition"),Control:e("./control"),Template:e("./template"),Setting:e("./setting")}},{"./control":2,"./element":4,"./element-definition":3,"./proxyable":6,"./setting":7,"./template":8}],6:[function(e,t,n){var i=Backbone.Collection.extend({model:e("../models/proxyable"),toProxy:function(){var e=new Backbone.Collection;return this.each(function(t){var n=t.getDefaults();e.add(new t.proxyClass(_.extend(n,t.proxyData()),{source:t,defaults:n}))}),e}});i.prototype.sync=Cornerstone.Helpers.csnull,i.prototype.fetch=Cornerstone.Helpers.csnull,i.prototype.save=Cornerstone.Helpers.csnull,t.exports=i},{"../models/proxyable":19}],7:[function(e,t,n){var i=e("./proxyable");t.exports=i.extend({model:e("../models/setting")})},{"../models/setting":20,"./proxyable":6}],8:[function(e,t,n){var i=Backbone.Collection.extend({model:e("../models/template"),section:function(e){return bySection=this.filter(function(t){return t.get("section")===e}),new i(bySection)}});t.exports=i},{"../models/template":21}],9:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){Cornerstone.Mn.Renderer=e("../utility/renderer")}})},{"../utility/renderer":29}],10:[function(e,t,n){t.exports=Cornerstone.Component.extend({initialize:function(){cs.elements=Backbone.Radio.channel("cs:elements"),this.listenTo(cs.elements,"delete",this.deleteEl),this.listenTo(cs.elements,"erase",this.erase),this.listenTo(cs.elements,"add:item",this.add),this.listenTo(cs.elements,"duplicate",this.duplicate)},deleteEl:function(e){e.model&&(e.model.destroy({success:function(){e.success&&_.defer(e.success)}}),cs.elements.trigger("element:deleted"))},erase:function(e){e.model&&(_.isEmpty(e.model.elements)||e.model.elements.reset(),e.success&&_.defer(e.success))},add:function(e,t,n,i){if(e&&t.elements){var r={_type:e};if(n){var i=i||"title";r[i]=n.replace("%s",t.elements.length+1)}t.elements.create(r)}},duplicate:function(e,t){e.updateChildData();var n=e.toJSON(),t=t||"title";n[t]&&(n[t]=cs.l18n("sortable-duplicate").replace("%s",n[t])),e.collection.create(n,_.clone(e.options),{position:e.collection.indexOf(e)+1,after:function(t){cs.render.shadow(t,e.cid)}})}})},{}],11:[function(e,t,n){t.exports=Cornerstone.Component.extend({searchOptions:{caseSensitive:!1,includeScore:!0,shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,keys:["title","name","transposed"]},initialize:function(){this.contexts={},this.library=new Cornerstone.Collections.ElementDefinition;var e=this.cs.config("elementDefinitions");_.isArray(e)&&this.library.add(e),this.cs.elementLibrary=this},lookup:function(e){var t=this.library.findWhere({name:e});return t||this.library.findWhere({name:"undefined"})},all:function(){return new Cornerstone.Collections.ElementDefinition(this.library.models)},filter:function(e){return new Cornerstone.Collections.ElementDefinition(this.library.filter(e))},registerContext:function(e,t){var n=this.filter(t),i=n.map(function(e){var t=e.get("ui").title,n=t.split(" ");return n.reverse(),{title:t,name:e.get("name"),transposed:n.join(" ")}});this.contexts[e]={collection:n,searchIndex:i}},get:function(e){var t=this.contexts[e];return t&&t.collection?t.collection:this.all()},search:function(e,t){var n="",i=this.contexts[e];if(i&&i.searchIndex&&""!=t){var r=new Cornerstone.Vendor.Fuse(i.searchIndex,this.searchOptions);n=_.map(r.search(t),function(e){return e.name})}return n}})},{}],12:[function(e,t,n){t.exports={common:e("./common"),"element-library":e("./element-library"),"element-handler":e("./element-handler")}},{"./common":9,"./element-handler":10,"./element-library":11}],13:[function(e,t,n){e("./modules/bootstrap"),e("./app-mk2")(csCoreData,{common:["common","element-library","element-handler"]})},{"./app-mk2":1,"./modules/bootstrap":23}],14:[function(e,t,n){var i=Backbone.Model.extend({initialize:function(e,t){this.source=t.source||null;t.defaults;this.source&&(this.elements=t.source.elements||null,this.definition=t.source.definition||null),this.listenTo(this.source,"children:updated",function(){this.trigger("children:updated")}),this.listenTo(this.source,"position:updated",function(){this.trigger("position:updated")}),this.listenTo(this.source,"remove destroy",function(){this.destroy()})},getIndex:function(){return this.source.getIndex()},getSource:function(){return this.source},getSourceParent:function(){return this.source.collection.parent},getSourceGrandParent:function(){return this.source.collection.parent.collection.parent},refresh:function(){this.set(_.clone(this.source.attributes),{silent:!0})}});i.prototype.sync=Cornerstone.Helpers.csnull,i.prototype.fetch=Cornerstone.Helpers.csnull,i.prototype.save=Cornerstone.Helpers.csnull,t.exports=i},{}],15:[function(e,t,n){t.exports=Backbone.Model.extend({defaults:{name:null,key:null,type:null,ui:{},options:{},context:"all",condition:{}},initialize:function(){this.proxy=null,_.isNull(this.get("key"))&&this.set("key",this.get("name"))},setProxy:function(e){this.proxy=e,this.trigger("set:proxy")}})},{}],16:[function(e,t,n){t.exports=Backbone.Model.extend({defaults:{name:null,ui:null,flags:null,active:!0,base_defaults:{},defaults:{},controls:[]},getDefaults:function(e){return this.get(e?e+"_defaults":"defaults")},getControls:function(e){var e=e||"all";return _.filter(this.get("controls"),function(t){return"all"==e&&0!==t.context.indexOf("_")||t.context==e},this)}})},{}],17:[function(e,t,n){var i=e("./proxyable");t.exports=i.extend({idAttribute:"_elID",proxyClass:e("./control-proxy"),proxyExclusions:["elements"],defaults:{_type:"undefined"},initialize:function(e){var t,n,i,r;this.definition=this.getDefinition(),(r=this.definition.get("_layout_defaults"))&&_.each(r,function(e,t){this.has(t)||this.set(t,e)},this),this.elements=new Cornerstone.Collections.Element,this.elements.parent=this,t=this.get("elements"),n=this.definition.get("defaults"),i=_.isUndefined(t)?n.elements?_.clone(n.elements):[]:t,i&&!_.isEmpty(i)&&this.elements.add(i),this.listenTo(this.elements,"update",function(){this.trigger("children:updated")}),this.on("change",function(e,t){this.pageDirty(),this.collection&&this.collection.trigger("model:change",e,t),this.elements.isEmpty()||_.isEmpty(_.omit(e.changed,["elements"]))||this.elements.each(function(n){n.trigger("parent:change",e,t)})}),this.on("update:child:data",this.updateChildData),this.listenTo(this.elements,"sort",this.updateChildData),this.listenTo(this.elements,"remove",this.updateChildData),this.listenTo(this.elements,"model:change",this.updateChildData),this.trigger("update:child:data"),this.on("destroy",function(){try{this.elements.invoke("destroy")}catch(e){}})},getDefaults:function(){return _.clone(this.definition.getDefaults())},updateChildData:function(){if(this.elements.isEmpty())return void this.set("elements",[]);this.elements.invoke("updateChildData"),this.set("elements",this.elements.toJSON())},getDataForChild:function(){return _.omit(this.toJSON(),["elements"])},getDefinition:function(){return cs.elementLibrary.lookup(this.get("_type"))},eraseChildren:function(){this.elements.isEmpty()||(this.elements.invoke("destroy"),this.updateChildData())},getIndex:function(){return this.collection.indexOf(this)},toJSON:function(){return _.omit(i.prototype.toJSON.apply(this,arguments),["rank"])},atFloor:function(){var e=this.definition.get("flags");return e.elements&&e.elements.floor&&this.elements.length<=e.elements.floor},pageDirty:function(){cs.channel.trigger("page:unsaved")}})},{"./control-proxy":14,"./proxyable":19}],18:[function(e,t,n){var i={Element:e("./element"),ElementDefinition:e("./element-definition"),Control:e("./control"),Setting:e("./setting"),Proxyable:e("./proxyable"),Template:e("./template"),ControlProxy:e("./control-proxy")};t.exports=i},{"./control":15,"./control-proxy":14,"./element":17,"./element-definition":16,"./proxyable":19,"./setting":20,"./template":21}],19:[function(e,t,n){var i=Backbone.Model.extend({proxyClass:Backbone.Model,proxyExclusions:[],constructor:function(e,t){var n=e||{};t||(t={}),this.cid=_.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=_.defaults({},n,_.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},setMeta:function(e,t){var n=this.get("_csmeta")||{},i=_.clone(n);return n[e]=t,this.set({_csmeta:n},{silent:!0}),this.trigger("meta:change",e,t,i,this),this.trigger("meta:change:"+e,t,i[e],this),this},getMeta:function(e){var t=this.get("_csmeta")||{};return _.isUndefined(e)?t:_.isUndefined(t[e])?void 0:t[e]},toJSON:function(){var e=Backbone.Model.prototype.toJSON.apply(this,arguments);return!_.isEmpty(this.meta)&&_.isObject(this.meta)&&(e._csmeta=this.meta),e},clone:function(){return Backbone.Model.prototype.toJSON.apply(this,arguments)},proxyData:function(){return _.omit(this.attributes,this.proxyExclusions)},toProxy:function(){var e=this.getDefaults();return new this.proxyClass(_.extend(e,this.proxyData()),{source:this,defaults:e})},proxyUpdate:function(e){var t=this.getDefaults();_.each(e,function(e,n){"disabled"!=n&&(_.isEqual(t[n],e)?this.unset(n):this.set(n,e))},this)},getDefaults:function(){return{}}});i.prototype.sync=Cornerstone.Helpers.csnull,i.prototype.fetch=Cornerstone.Helpers.csnull,i.prototype.save=Cornerstone.Helpers.csnull,t.exports=i},{}],20:[function(e,t,n){var i=e("./proxyable");t.exports=i.extend({idAttribute:"_sID",proxyClass:e("./control-proxy"),proxyExclusions:["elements"],defaults:{_section:"undefined"},initialize:function(e){var t,n,i;this.section=this.getSection(),this.elements=new Cornerstone.Collections.Element,this.elements.parent=this,t=this.get("elements"),n=this.section.get("defaults"),i=_.isEmpty(t)?n.elements?n.elements:[]:t,i&&!_.isEmpty(i)&&this.elements.add(i),this.listenTo(this.elements,"update",function(){this.trigger("children:updated")}),this.on("change",function(e,t){this.collection&&this.collection.trigger("model:change",e,t)}),this.on("update:child:data",this.updateChildData)},getDefaults:function(){return _.clone(this.section.get("defaults"))},updateChildData:function(){if(this.elements.isEmpty())return void this.set("elements",[]);this.elements.invoke("updateChildData"),this.set("elements",this.elements.toJSON())},getSection:function(){return cs.settingSections.findWhere({name:this.get("_section")})},eraseChildren:function(){this.elements.isEmpty()||(this.elements.invoke("destroy"),this.updateChildData())},getIndex:function(){return this.collection.indexOf(this)},toJSON:function(){return _.omit(i.prototype.toJSON.apply(this,arguments),["rank"])}})},{"./control-proxy":14,"./proxyable":19}],21:[function(e,t,n){t.exports=Backbone.Model.extend({defaults:{title:"Generic Block",section:"user-blocks",type:"block",elements:[]}})},{}],22:[function(e,t,n){var i=!1,r=!1;t.exports=function(e,t,n){var n=n||{},o=cs.config("_cs_nonce");return i=i||cs.config("useLegacyAjax"),Backbone.$.Deferred(function(s){function a(e){e.extraneous&&console.warn("Cornerstone has recovered from extraneous output found in an AJAX response. Logging original response.",{original:e.extraneous}),e.php_errors&&(console.warn("Cornerstone detected PHP Errors while generating an AJAX response. Logging errors..."),_.isArray(e.php_errors)?console.log(_.reduce(e.php_errors,function(e,t){return e+t+"\n"},"")):console.log(e.php_errors))}function h(e){if(e.responseJSON.debug&&a(e.responseJSON.debug),!r&&e.responseJSON.failed_php_input)return r=!0,void u();var t=[e.responseJSON.data||{},e];e.responseJSON.success?s.resolveWith(this,t):(s.rejectWith(this,t),t.message&&cs.warn(message))}function c(e){if(e.responseText){var t=e.responseText.match(/{"success":\w*?,"data.*/),n={};try{n=JSON.parse(t[0])}catch(t){console.warn("Failed to recover from malformed AJAX response: ",e)}if(_.isObject(n.data)&&_.isBoolean(n.success))return console.warn("Recovered from malformed AJAX response: ",e),e.responseJSON=n,void h(e)}i?(console.log("Unhandled AJAX error. Expecting valid JSON from response.",e),s.rejectWith(this,[{},e])):(cs.warn("Failed AJAX request. Switching to fallback.",e),Backbone.$.ajax({type:"POST",url:cs.config("fallbackAjaxUrl"),data:{enable:!0,_cs_nonce:o,action:"cs_legacy_ajax"},complete:function(){i=!0,u()}}))}function u(){var s={_cs_nonce:o,action:e,request:t};i||r?s.request=Cornerstone.Vendor.Base64.encode(JSON.stringify(s.request||{})):s=JSON.stringify(s);var a=_.defaults(_.omit(n,["success","error","always"]),{type:"POST",url:cs.config(i?"fallbackAjaxUrl":"ajaxUrl"),context:this,data:s,dataType:"json"});Backbone.$.ajax(a).done(function(e,t,n){n.responseJSON?h(n):c(n)}).fail(function(e){e.responseJSON?h(e):c(e)})}n.always&&s.always(n.always),n.success&&s.done(n.success),n.error&&s.fail(n.error),u()}).promise()}},{}],23:[function(e,t,n){window.Cornerstone=window.CS={};var i=e("./../../vendor/underscore-shim.js");e("../../vendor/string_score"),e("../../vendor/equalize"),e("backbone.radio"),e("backbone.stickit"),i.mixin({deepExtend:e("underscore-deep-extend")(i)}),Cornerstone.Vendor={Base64:e("../../vendor/base64"),Color:e("../../vendor/color"),FileSaver:e("../../vendor/FileSaver"),Fuse:e("fuse.js"),Marionette:e("backbone.marionette"),moment:e("moment"),bowser:e("bowser"),Pikaday:e("pikaday"),svg4everybody:e("svg4everybody")},Cornerstone.Helpers={csnull:function(){return null}},e("es6-promise").polyfill(),Cornerstone.Vendor.svg4everybody(),Cornerstone.Mn=Cornerstone.Vendor.Marionette,Cornerstone.Component=e("./component-base"),Cornerstone.Models=e("../models"),Cornerstone.Collections=e("../collections"),Cornerstone.InspectionSupervisor=e("./inspection-supervisor"),Cornerstone.Post=e("./post"),Cornerstone.serial=e("./serial"),t.exports=Cornerstone},{"../../vendor/FileSaver":31,"../../vendor/base64":33,"../../vendor/color":34,"../../vendor/equalize":35,"../../vendor/string_score":37,"../collections":5,"../models":18,"./../../vendor/underscore-shim.js":38,"./component-base":24,"./inspection-supervisor":26,"./post":27,"./serial":28,"backbone.marionette":40,"backbone.radio":41,"backbone.stickit":42,bowser:43,"es6-promise":45,"fuse.js":46,moment:47,pikaday:48,svg4everybody:50,"underscore-deep-extend":51}],24:[function(e,t,n){t.exports=Cornerstone.Mn.Object.extend({constructor:function(e){this.options=e||{},this.cs=this.getOption("cs"),Cornerstone.Mn.Object.call(this,e)}})},{}],25:[function(e,t,n){t.exports={ajax:e("./ajax"),template:function(){return this.Templates[1==arguments.length?arguments[0]:arguments.join("/")]},icon:function(e){if(e){var e=e.split("/"),t=cs.config("iconMaps"),n=e[0];if(t[n]){e.shift();var i=e.join("-");return'<svg role="img" class="cs-custom-icon"><use xlink:href="'+(t[n]+"#"+i)+'"/></svg>'}}return'<i class="cs-icon fallback" data-cs-icon="'+this.fontIcon()+'">\x3c!-- icon '+n+" not found--\x3e</i>"},elementIcon:function(e){return this.icon(cs.elementLibrary.lookup(e).get("icon"))},fontIcon:function(){return String.fromCharCode("0x"+this.fontIconLookup(arguments[0]||void 0))},fontIconLookup:function(){var e=arguments[0]||"spinner";return this.Config.fontAwesome[e]?this.Config.fontAwesome[e]:this.Config.fontAwesome.spinner},l18n:function(e){return this.Config.strings[e]||""},log:function(){this.Config.debug&&console.log.apply(console,arguments)},warn:function(){this.Config.debug&&(console.warn.apply(console,arguments),console.trace())},controlLookup:function(e){return Cornerstone.ControlViews[e]||Cornerstone.ControlViews.Base},classMap:function(e,t){var e=e||"undefined",n=!1,i=cs.config("cssClassMap");if(_.isArray(t)||(n=!0,t=[t]),!i[e])return console.warn("Cornerstone classMap | group "+e+" doesn't exist in class map."),[""];var r=_.map(t,function(t){return _.isUndefined(i[e][t])?"":i[e][t]});return n?r[0]:r},debugger:function(e){if(this.config("debug")){var e=e||5e3;setTimeout(function(){},e)}}}},{"./ajax":22}],26:[function(e,t,n){t.exports=Cornerstone.Mn.Object.extend({initialize:function(e){this.controls=new Cornerstone.Collections.Control,this.reset(),e&&(e.length?_.each(e,function(e){this.source(e)},this):this.source(e),this.rebuildControls())},source:function(e){if(e&&e.name&&e.source&&e.controls){this.groups[e.name]||(this.groups[e.name]={controls:new Cornerstone.Collections.Control});var t=this.groups[e.name];t.source=e.source,t.proxy=e.source.toProxy(),t.controls.reset(),this.groups[e.name]=t,this.listenTo(t.proxy,"change",function(e,n){t.source.proxyUpdate(e.changed)}),this.listenTo(t.proxy,"reset:key",function(e){t.source.unset(e)}),this.listenTo(t.controls,"add",function(e,n){e.setProxy(t.proxy)}),this.listenTo(t.controls,"reset",function(e){e.invoke("setProxy",t.proxy)}),t.controls.add(e.controls)}},reset:function(){this.groups={},this.controls.reset()},rebuildControls:function(){this.controls.reset(),_.each(this.groups,function(e){this.controls.add(e.controls.models)},this)}})},{}],27:[function(e,t,n){t.exports=Cornerstone.Mn.Object.extend({initialize:function(e){this.data=new Cornerstone.Models.Element,e&&e.post_id&&(this.data.set("post_id",e.post_id),e.elements&&this.data.elements.add(e.elements))},elements:function(){return this.data.elements},set:function(e,t){return this[e]?this[e]=t:this.data.set(e,t)},get:function(e){return this[e]?this[e]:this.data.get(e)},toJSON:function(){this.data.elements.invoke("updateChildData");var e=this.data.toJSON();return e.elements=this.data.elements.toJSON(),e}})},{}],28:[function(e,t,n){t.exports=function(t){var n,i=e("./../../vendor/jquery-shim.js");return _.each(t,function(e){var t=function(){var t=i.Deferred();return e(function(){t.resolve.apply(this,arguments)}),t.promise()};n=n?n.then(t):t()}),n}},{"./../../vendor/jquery-shim.js":36}],29:[function(e,t,n){t.exports={templateHelpers:e("./template-helpers"),render:function(e,t,n){var t=t||{};if(n&&_.isFunction(n.triggerMethod)&&n.triggerMethod("template:data:ready",t),!1!==e){if(!e)throw new Cornerstone.Mn.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var i=_.isFunction(e)?e:cs.template(e);if(!i)throw new Cornerstone.Mn.Error({name:"TemplateLookupError",message:"Template not found in precompiled templates: "+e});return i(_.extend(t,this.templateHelpers))}}}},{"./template-helpers":30}],30:[function(e,t,n){var i={l18n:function(){return cs.l18n.apply(cs,arguments)},getIcon:function(){return cs.icon.apply(cs,arguments)},fontIcon:function(){return cs.fontIcon.apply(cs,arguments)},render:function(){return CS.Mn.Renderer.render.apply(this,arguments)},debug:function(e){return""}};cs.debug()&&(i.debug=function(e){return e}),t.exports=i},{}],31:[function(t,n,i){var r=r||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},s=e.webkitRequestFileSystem,a=e.requestFileSystem||s||e.mozRequestFileSystem,h=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c=0,u=function(t){var i=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?i():setTimeout(i,500)},l=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){h(e)}}},d=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},f=function(t,h,f){f||(t=d(t));var p,g,m,v=this,_=t.type,y=!1,b=function(){l(v,"writestart progress write writeend".split(" "))},w=function(){if(!y&&p||(p=n().createObjectURL(t)),g)g.location.href=p;else{void 0==e.open(p,"_blank")&&"undefined"!=typeof safari&&(e.location.href=p)}v.readyState=v.DONE,b(),u(p)},M=function(e){return function(){if(v.readyState!==v.DONE)return e.apply(this,arguments)}},x={create:!0,exclusive:!1};return v.readyState=v.INIT,h||(h="download"),r?(p=n().createObjectURL(t),i.href=p,i.download=h,void setTimeout(function(){o(i),b(),u(p),v.readyState=v.DONE})):(e.chrome&&_&&"application/octet-stream"!==_&&(m=t.slice||t.webkitSlice,t=m.call(t,0,t.size,"application/octet-stream"),y=!0),s&&"download"!==h&&(h+=".download"),("application/octet-stream"===_||s)&&(g=e),a?(c+=t.size,void a(e.TEMPORARY,c,M(function(e){e.root.getDirectory("saved",x,M(function(e){var n=function(){e.getFile(h,x,M(function(e){e.createWriter(M(function(n){n.onwriteend=function(t){g.location.href=e.toURL(),v.readyState=v.DONE,l(v,"writeend",t),u(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=v["on"+e]}),n.write(t),v.abort=function(){n.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),w)}),w)};e.getFile(h,{create:!1},M(function(e){e.remove(),n()}),M(function(e){e.code===e.NOT_FOUND_ERR?n():w()}))}),w)}),w)):void w())},p=f.prototype,g=function(e,t,n){return new f(e,t,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=d(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(p.abort=function(){var e=this;e.readyState=e.DONE,l(e,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==n&&n.exports?n.exports.saveAs=r:void 0!==e&&null!==e&&null!=e.amd&&e([],function(){return r})},{}],32:[function(e,t,n){window.CornerstoneShims=window.CornerstoneShims||{},window.CornerstoneShims.Backbone||(window.CornerstoneShims.Backbone=window.Backbone),t.exports=window.CornerstoneShims.Backbone},{}],33:[function(e,t,n){function i(){this.buffer=[]}function r(e){this._input=e,this._index=-1,this._buffer=[]}function o(e){this._input=e,this._index=-1,this._buffer=[]}i.prototype.append=function(e){return this.buffer.push(e),this},i.prototype.toString=function(){return this.buffer.join("")};var s={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){for(var t=new i,n=new r(e);n.moveNext();){var o=n.current;n.moveNext();var s=n.current;n.moveNext();var a=n.current,h=o>>2,c=(3&o)<<4|s>>4,u=(15&s)<<2|a>>6,l=63&a;isNaN(s)?u=l=64:isNaN(a)&&(l=64),t.append(this.codex.charAt(h)+this.codex.charAt(c)+this.codex.charAt(u)+this.codex.charAt(l))}return t.toString()},decode:function(e){for(var t=new i,n=new o(e);n.moveNext();){var r=n.current;if(r<128)t.append(String.fromCharCode(r));else if(r>191&&r<224){n.moveNext();var s=n.current;t.append(String.fromCharCode((31&r)<<6|63&s))}else{n.moveNext();var s=n.current;n.moveNext();var a=n.current;t.append(String.fromCharCode((15&r)<<12|(63&s)<<6|63&a))}}return t.toString()}};r.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var e=this._input.charCodeAt(++this._index);return 13==e&&10==this._input.charCodeAt(this._index+1)&&(e=10,this._index+=2),e<128?this.current=e:e>127&&e<2048?(this.current=e>>6|192,this._buffer.push(63&e|128)):(this.current=e>>12|224,this._buffer.push(e>>6&63|128),this._buffer.push(63&e|128)),!0}},o.prototype={current:64,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var e=s.codex.indexOf(this._input.charAt(++this._index)),t=s.codex.indexOf(this._input.charAt(++this._index)),n=s.codex.indexOf(this._input.charAt(++this._index)),i=s.codex.indexOf(this._input.charAt(++this._index)),r=e<<2|t>>4,o=(15&t)<<4|n>>2,a=(3&n)<<6|i;return this.current=r,64!=n&&this._buffer.push(o),64!=i&&this._buffer.push(a),!0}},t.exports=s},{}],34:[function(e,t,n){!function(e,i){var r=function(e,t){return this instanceof r?this._init(e,t):new r(e,t)};r.fn=r.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(e){var t="noop";switch(typeof e){case"object":return e.a!==i&&this.a(e.a),t=e.r!==i?"fromRgb":e.l!==i?"fromHsl":e.v!==i?"fromHsv":t,this[t](e);case"string":return this.fromCSS(e);case"number":return this.fromInt(parseInt(e,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var e=new r(this.toInt()),t=["_alpha","_hSpace","_hsl","_hsv","error"],n=t.length-1;n>=0;n--)e[t[n]]=this[t[n]];return e},setHSpace:function(e){return this._hSpace="hsv"===e?e:"hsl",this},noop:function(){return this},fromCSS:function(e){var t;if(this.error=!1,e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,""),e.match(/^(rgb|hs(l|v))a?\(/)&&e.match(/\)$/)){if(t=e.replace(/(\s|%)/g,"").replace(/^(rgb|hs(l|v))a?\(/,"").replace(/,?\);?$/,"").split(","),t.length<3)return this._error();if(4===t.length&&(this.a(parseFloat(t.pop())),this.error))return this;for(var n=t.length-1;n>=0;n--)if(t[n]=parseInt(t[n],10),isNaN(t[n]))return this._error();return e.match(/^rgb/)?this.fromRgb({r:t[0],g:t[1],b:t[2]}):e.match(/^hsv/)?this.fromHsv({h:t[0],s:t[1],v:t[2]}):this.fromHsl({h:t[0],s:t[1],l:t[2]})}return this.fromHex(e)},fromRgb:function(e,t){return"object"!=typeof e||e.r===i||e.g===i||e.b===i?this._error():(this.error=!1,this.fromInt(parseInt((e.r<<16)+(e.g<<8)+e.b,10),t))},fromHex:function(e){return e=e.replace(/^#/,"").replace(/^0x/,""),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),this.error=!/^[0-9A-F]{6}$/i.test(e),this.fromInt(parseInt(e,16))},fromHsl:function(e){var t,n,r,o,s,a,h,c;return"object"!=typeof e||e.h===i||e.s===i||e.l===i?this._error():(this._hsl=e,this._hSpace="hsl",a=e.h/360,h=e.s/100,c=e.l/100,0===h?t=n=r=c:(o=c<.5?c*(1+h):c+h-c*h,s=2*c-o,t=this.hue2rgb(s,o,a+1/3),n=this.hue2rgb(s,o,a),r=this.hue2rgb(s,o,a-1/3)),this.fromRgb({r:255*t,g:255*n,b:255*r},!0))},fromHsv:function(e){var t,n,r,o,s,a,h,c,u,l,d;if("object"!=typeof e||e.h===i||e.s===i||e.v===i)return this._error();switch(this._hsv=e,this._hSpace="hsv",t=e.h/360,n=e.s/100,r=e.v/100,h=Math.floor(6*t),c=6*t-h,u=r*(1-n),l=r*(1-c*n),d=r*(1-(1-c)*n),h%6){case 0:o=r,s=d,a=u;break;case 1:o=l,s=r,a=u;break;case 2:o=u,s=r,a=d;break;case 3:o=u,s=l,a=r;break;case 4:o=d,s=u,a=r;break;case 5:o=r,s=u,a=l}return this.fromRgb({r:255*o,g:255*s,b:255*a},!0)},fromInt:function(e,t){return this._color=parseInt(e,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),t===i&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},toString:function(){var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e},toCSS:function(e,t){switch(e=e||"hex",t=parseFloat(t||this._alpha),e){case"rgb":case"rgba":var n=this.toRgb();return t<1?"rgba( "+n.r+", "+n.g+", "+n.b+", "+t+" )":"rgb( "+n.r+", "+n.g+", "+n.b+" )";case"hsl":case"hsla":var i=this.toHsl();return t<1?"hsla( "+i.h+", "+i.s+"%, "+i.l+"%, "+t+" )":"hsl( "+i.h+", "+i.s+"%, "+i.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var e,t,n=this.toRgb(),i=n.r/255,r=n.g/255,o=n.b/255,s=Math.max(i,r,o),a=Math.min(i,r,o),h=(s+a)/2;if(s===a)e=t=0;else{var c=s-a;switch(t=h>.5?c/(2-s-a):c/(s+a),s){case i:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-i)/c+2;break;case o:e=(i-r)/c+4}e/=6}return e=Math.round(360*e),0===e&&this._hsl.h!==e&&(e=this._hsl.h),t=Math.round(100*t),0===t&&this._hsl.s&&(t=this._hsl.s),{h:e,s:t,l:Math.round(100*h)}},toHsv:function(){var e,t,n=this.toRgb(),i=n.r/255,r=n.g/255,o=n.b/255,s=Math.max(i,r,o),a=Math.min(i,r,o),h=s,c=s-a;if(t=0===s?0:c/s,s===a)e=t=0;else{switch(s){case i:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-i)/c+2;break;case o:e=(i-r)/c+4}e/=6}return e=Math.round(360*e),0===e&&this._hsv.h!==e&&(e=this._hsv.h),t=Math.round(100*t),0===t&&this._hsv.s&&(t=this._hsv.s),{h:e,s:t,v:Math.round(100*h)}},toInt:function(){
return this._color},toIEOctoHex:function(){var e=this.toString(),t=parseInt(255*this._alpha,10).toString(16);return 1===t.length&&(t="0"+t),"#"+t+e.replace(/^#/,"")},toLuminosity:function(){var e=this.toRgb();return.2126*Math.pow(e.r/255,2.2)+.7152*Math.pow(e.g/255,2.2)+.0722*Math.pow(e.b/255,2.2)},getDistanceLuminosityFrom:function(e){if(!(e instanceof r))throw"getDistanceLuminosityFrom requires a Color object";var t=this.toLuminosity(),n=e.toLuminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},getMaxContrastColor:function(){var e=this.toLuminosity();return new r(e>=.5?"000000":"ffffff")},getReadableContrastingColor:function(e,t){if(!e instanceof r)return this;var n=t===i?5:t,o=e.getDistanceLuminosityFrom(this),s=e.getMaxContrastColor();if(s.getDistanceLuminosityFrom(e)<=n)return s;if(o>=n)return this;for(var a=0===s.toInt()?-1:1;o<n&&(this.l(a,!0),o=this.getDistanceLuminosityFrom(e),0!==this._color&&16777215!==this._color););return this},a:function(e){if(e===i)return this._alpha;var t=parseFloat(e);return isNaN(t)?this._error():(this._alpha=t,this)},darken:function(e){return e=e||5,this.l(-e,!0)},lighten:function(e){return e=e||5,this.l(e,!0)},saturate:function(e){return e=e||15,this.s(e,!0)},desaturate:function(e){return e=e||15,this.s(-e,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(e){e=e||1;var t=180+30*e;return this.h(t,!0)},getAnalog:function(e){e=e||1;var t=30*e;return this.h(t,!0)},getTetrad:function(e){e=e||1;var t=60*e;return this.h(t,!0)},getTriad:function(e){e=e||1;var t=120*e;return this.h(t,!0)},_partial:function(e){var t=o[e];return function(n,r){var o=this._spaceFunc("to",t.space);return n===i?o[e]:(!0===r&&(n=o[e]+n),t.mod&&(n%=t.mod),t.range&&(n=n<t.range[0]?t.range[0]:n>t.range[1]?t.range[1]:n),o[e]=n,this._spaceFunc("from",t.space,o))}},_spaceFunc:function(e,t,n){var i=t||this._hSpace;return this[e+i.charAt(0).toUpperCase()+i.substr(1)](n)}};var o={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var s in o)o.hasOwnProperty(s)&&(r.fn[s]=r.fn._partial(s));"object"==typeof n?t.exports=r:e.Color=r}(this)},{}],35:[function(e,t,n){!function(e){e.fn.equalize=function(t){var n,i,r=this,o=!1,s=!1,a=0;return e.isPlainObject(t)?(n=t.equalize||"height",o=t.children||!1,s=t.reset||!1,a=t.offset||a):n=t||"height",!!e.isFunction(e.fn[n])&&(i=n.indexOf("eight")>0?"min-height":"width",r.each(function(){var t=o?e(this).find(o):e(this).children(),r=0;t.each(function(){var t,o=e(this);s&&o.css(i,""),(t=o[n]())>r&&(r=t)}),t.css(i,r+a+"px")}))}}(jQuery)},{}],36:[function(e,t,n){"use strict";window.CornerstoneShims=window.CornerstoneShims||{},window.CornerstoneShims.$||(window.CornerstoneShims.$=window.jQuery),t.exports=window.CornerstoneShims.$},{}],37:[function(e,t,n){String.prototype.score=function(e,t){"use strict";if(this===e)return 1;if(""===e)return 0;var n,i,r,o,s,a=0,h=this,c=h.toLowerCase(),u=h.length,l=e.toLowerCase(),d=e.length,f=0,p=1;if(t&&(o=1-t),t)for(s=0;s<d;s+=1)r=c.indexOf(l[s],f),-1===r?p+=o:(f===r?n=.7:(n=.1," "===h[r-1]&&(n+=.8)),h[r]===e[s]&&(n+=.1),a+=n,f=r+1);else for(s=0;s<d;s+=1){if(-1===(r=c.indexOf(l[s],f)))return 0;f===r?n=.7:(n=.1," "===h[r-1]&&(n+=.8)),h[r]===e[s]&&(n+=.1),a+=n,f=r+1}return i=.5*(a/u+a/d)/p,l[0]===c[0]&&i<.85&&(i+=.15),i}},{}],38:[function(e,t,n){window.CornerstoneShims=window.CornerstoneShims||{},window.CornerstoneShims._||(window.CornerstoneShims._=window._),t.exports=window.CornerstoneShims._},{}],39:[function(t,n,i){!function(r,o){if("function"==typeof e&&e.amd)e(["backbone","underscore"],function(e,t){return o(e,t)});else if(void 0!==i){var s=t("./../../../assets/src/js/admin/vendor/backbone-shim.js"),a=t("./../../../assets/src/js/admin/vendor/underscore-shim.js");n.exports=o(s,a)}else o(r.Backbone,r._)}(this,function(e,t){"use strict";var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===n)return delete this._indexByCustom[t],!0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(0,t),e.ChildViewContainer.VERSION="0.1.10",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer})},{"./../../../assets/src/js/admin/vendor/backbone-shim.js":32,"./../../../assets/src/js/admin/vendor/underscore-shim.js":38}],40:[function(t,n,i){!function(r,o){if("function"==typeof e&&e.amd)e(["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(e,t){return r.Marionette=r.Mn=o(r,e,t)});else if(void 0!==i){var s=t("./../../../../assets/src/js/admin/vendor/backbone-shim.js"),a=t("./../../../../assets/src/js/admin/vendor/underscore-shim.js");t("backbone.wreqr"),t("backbone.babysitter");n.exports=o(r,s,a)}else r.Marionette=r.Mn=o(r,r.Backbone,r._)}(this,function(e,t,n){"use strict";var i=e.Marionette,r=e.Mn,o=t.Marionette={};o.VERSION="2.4.4",o.noConflict=function(){return e.Marionette=i,e.Mn=r,this},o.Deferred=t.$.Deferred,o.FEATURES={},o.isEnabled=function(e){return!!o.FEATURES[e]},o.extend=t.Model.extend,o.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},o.mergeOptions=function(e,t){e&&n.extend(this,n.pick(e,t))},o.getOption=function(e,t){if(e&&t)return e.options&&void 0!==e.options[t]?e.options[t]:e[t]},o.proxyGetOption=function(e){return o.getOption(this,e)},o._getValue=function(e,t,i){return n.isFunction(e)&&(e=i?e.apply(t,i):e.call(t)),e},o.normalizeMethods=function(e){return n.reduce(e,function(e,t,i){return n.isFunction(t)||(t=this[t]),t&&(e[i]=t),e},{},this)},o.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},o.normalizeUIKeys=function(e,t){return n.reduce(e,function(e,n,i){return e[o.normalizeUIString(i,t)]=n,e},{})},o.normalizeUIValues=function(e,t,i){return n.each(e,function(r,s){n.isString(r)?e[s]=o.normalizeUIString(r,t):n.isObject(r)&&n.isArray(i)&&(n.extend(r,o.normalizeUIValues(n.pick(r,i),t)),n.each(i,function(e){var i=r[e];n.isString(i)&&(r[e]=o.normalizeUIString(i,t))}))}),e},o.actAsCollection=function(e,t){var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(i,function(i){e[i]=function(){var e=n.values(n.result(this,t)),r=[e].concat(n.toArray(arguments));return n[i].apply(n,r)}})};var s=o.deprecate=function(e,t){n.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||s._cache[e]||(s._warn("Deprecation warning: "+e),s._cache[e]=!0)};s._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},s._cache={},o._triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}return function(t,i,r){var o=arguments.length<3;o&&(r=i,i=r[0]);var s,a="on"+i.replace(/(^|:)(\w)/gi,e),h=t[a];return n.isFunction(h)&&(s=h.apply(t,o?n.rest(r):r)),n.isFunction(t.trigger)&&(o+r.length>1?t.trigger.apply(t,o?r:[i].concat(n.drop(r,0))):t.trigger(i)),s}}(),o.triggerMethod=function(e){return o._triggerMethod(this,arguments)},o.triggerMethodOn=function(e){return(n.isFunction(e.triggerMethod)?e.triggerMethod:o.triggerMethod).apply(e,n.rest(arguments))},o.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,i()}function n(){e._isRendered=!0,i()}function i(){e._isShown&&e._isRendered&&o.isNodeAttached(e.el)&&o.triggerMethodOn(e,"dom:refresh",e)}e._isDomRefreshMonitored||(e._isDomRefreshMonitored=!0,e.on({show:t,render:n}))},function(e){function t(t,i,r,o){var s=o.split(/\s+/);n.each(s,function(n){var o=t[n];if(!o)throw new e.Error('Method "'+n+'" was configured as an event handler, but does not exist.');t.listenTo(i,r,o)})}function i(e,t,n,i){e.listenTo(t,n,i)}function r(e,t,i,r){var o=r.split(/\s+/);n.each(o,function(n){var r=e[n];e.stopListening(t,i,r)})}function o(e,t,n,i){e.stopListening(t,n,i)}function s(t,i,r,o,s){if(i&&r){if(!n.isObject(r))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});r=e._getValue(r,t),n.each(r,function(e,r){n.isFunction(e)?o(t,i,r,e):s(t,i,r,e)})}}e.bindEntityEvents=function(e,n,r){s(e,n,r,i,t)},e.unbindEntityEvents=function(e,t,n){s(e,t,n,o,r)},e.proxyBindEntityEvents=function(t,n){return e.bindEntityEvents(this,t,n)},e.proxyUnbindEntityEvents=function(t,n){return e.unbindEntityEvents(this,t,n)}}(o);var a=["description","fileName","lineNumber","name","message","number"];return o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(e,t){n.isObject(e)?(t=e,e=t.message):t||(t={});var i=Error.call(this,e);n.extend(this,n.pick(i,a),n.pick(t,a)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,o.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),o.Error.extend=o.extend,o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},n.extend(o.Callbacks.prototype,{add:function(e,t){var i=n.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),i.then(function(n){t&&(n.context=t),e.call(n.context,n.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,n.extend(o.Controller.prototype,t.Events,{destroy:function(){return o._triggerMethod(this,"before:destroy",arguments),o._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption}),o.Object=function(e){this.options=n.extend({},n.result(this,"options"),e),this.initialize.apply(this,arguments)},o.Object.extend=o.extend,n.extend(o.Object.prototype,t.Events,{initialize:function(){},destroy:function(e){return e=e||{},this.triggerMethod("before:destroy",e),this.triggerMethod("destroy",e),this.stopListening(),this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Region=o.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),o.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e),o.MonitorDOMRefresh(e);var i=t||{},r=e!==this.currentView,s=!!i.preventDestroy,a=!!i.forceShow,h=!!this.currentView,c=r&&!s,u=r||a;if(h&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&delete this.currentView._parent,c?this.empty():h&&u&&this.currentView.off("destroy",this.empty,this),u){e.once("destroy",this.empty,this),e._parent=this,this._renderView(e),h&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),o.triggerMethodOn(e,"before:show",e,this,t),h&&this.triggerMethod("swapOut",this.currentView,this,t);var l=o.isNodeAttached(this.el),d=[],f=n.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},i);return l&&f.triggerBeforeAttach&&(d=this._displayedViews(e),this._triggerAttach(d,"before:")),this.attachHtml(e),this.currentView=e,l&&f.triggerAttach&&(d=this._displayedViews(e),this._triggerAttach(d)),h&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),o.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var i=(t||"")+"attach";n.each(e,function(e){o.triggerMethodOn(e,i,e,this)},this)},_displayedViews:function(e){return n.union([e],n.result(e,"_getNestedViews")||[])},_renderView:function(e){e.supportsRenderLifecycle||o.triggerMethodOn(e,"before:render",e),e.render(),e.supportsRenderLifecycle||o.triggerMethodOn(e,"render",e)},_ensureElement:function(){if(n.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(e){if(!e)throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e,o._getValue(this.options.parentEl,this))},attachHtml:function(e){this.$el.contents().detach(),this.el.appendChild(e.el)},empty:function(e){var t=this.currentView,n=e||{},i=!!n.preventDestroy;return t?(t.off("destroy",this.empty,this),this.triggerMethod("before:empty",t),i||this._destroyView(),this.triggerMethod("empty",t),delete this.currentView,i&&this.$el.contents().detach(),this):this},_destroyView:function(){var e=this.currentView;e.isDestroyed||(e.supportsDestroyLifecycle||o.triggerMethodOn(e,"before:destroy",e),e.destroy?e.destroy():(e.remove(),e.isDestroyed=!0),e.supportsDestroyLifecycle||o.triggerMethodOn(e,"destroy",e))},attachView:function(e){return this.currentView&&delete this.currentView._parent,e._parent=this,this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(n.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(n.isFunction(e))return this._buildRegionFromRegionClass(e);throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var i=e.regionClass||t,r=n.omit(e,"selector","regionClass");return e.selector&&!r.el&&(r.el=e.selector),new i(r)},_buildRegionFromRegionClass:function(e){return new e}}),o.RegionManager=o.Controller.extend({constructor:function(e){this._regions={},this.length=0,o.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){return e=o._getValue(e,this,arguments),n.reduce(e,function(e,i,r){return n.isString(i)&&(i={selector:i}),i.selector&&(i=n.defaults({},i,t)),e[r]=this.addRegion(r,i),e},{},this)},addRegion:function(e,t){var n;return n=t instanceof o.Region?t:o.Region.buildRegion(t,o.Region),this.triggerMethod("before:add:region",e,n),n._parent=this,this._store(e,n),this.triggerMethod("add:region",e,n),n},get:function(e){return this._regions[e]},getRegions:function(){return n.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return n.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return n.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),o.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]||this.length++,this._regions[e]=t},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this.length--,this.triggerMethod("remove:region",e,t)}}),o.actAsCollection(o.RegionManager.prototype,"_regions"),o.TemplateCache=function(e){this.templateId=e},n.extend(o.TemplateCache,{templateCaches:{},get:function(e,t){var n=this.templateCaches[e];return n||(n=new o.TemplateCache(e),this.templateCaches[e]=n),n.load(t)},clear:function(){var e,t=n.toArray(arguments),i=t.length;if(i>0)for(e=0;e<i;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(o.TemplateCache.prototype,{load:function(e){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId,e);return this.compiledTemplate=this.compileTemplate(t,e),this.compiledTemplate},loadTemplate:function(e,n){var i=t.$(e);if(!i.length)throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return i.html()},compileTemplate:function(e,t){return n.template(e,t)}}),o.Renderer={render:function(e,t){if(!e)throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(n.isFunction(e)?e:o.TemplateCache.get(e))(t)}},o.View=t.View.extend({isDestroyed:!1,supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,constructor:function(e){this.render=n.bind(this.render,this),e=o._getValue(e,this),this.options=n.extend({},n.result(this,"options"),e),this._behaviors=o.Behaviors(this),t.View.call(this,this.options),o.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,n.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return t=o._getValue(t,this),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"_uiBindings");return o.normalizeUIKeys(e,t||n.result(this,"ui"))},normalizeUIValues:function(e,t){var i=n.result(this,"ui"),r=n.result(this,"_uiBindings");return o.normalizeUIValues(e,r||i,t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(n.result(this,"triggers"));return n.reduce(e,function(e,t,n){return e[n]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var i=o._getValue(e||this.events,this);i=this.normalizeUIKeys(i),n.isUndefined(e)&&(this.events=i);var r={},s=n.result(this,"behaviorEvents")||{},a=this.configureTriggers(),h=n.result(this,"behaviorTriggers")||{};n.extend(r,s,i,a,h),t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return this;var e=n.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.isRendered=!1,this.remove(),n.invoke(this._behaviors,"destroy",e),this},bindUIElements:function(){this._bindUIElements(),n.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(e,function(e,t){this.ui[t]=this.$(e)},this)}},unbindUIElements:function(){this._unbindUIElements(),n.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=n.defaults({},e,{preventDefault:!0,stopPropagation:!0}),i=n.isObject(e)?t.event:e;return function(e){e&&(e.preventDefault&&t.preventDefault&&e.preventDefault(),e.stopPropagation&&t.stopPropagation&&e.stopPropagation());var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(i,n)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return n.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){var e=o._triggerMethod(this,arguments);return this._triggerEventOnBehaviors(arguments),this._triggerEventOnParentLayout(arguments[0],n.rest(arguments)),e},_triggerEventOnBehaviors:function(e){for(var t=o._triggerMethod,n=this._behaviors,i=0,r=n&&n.length;i<r;i++)t(n[i],e)},_triggerEventOnParentLayout:function(e,t){var i=this._parentLayoutView();if(i){var r=o.getOption(i,"childViewEventPrefix"),s=r+":"+e,a=[this].concat(t);o._triggerMethod(i,s,a);var h=o.getOption(i,"childEvents");h=o._getValue(h,i);var c=i.normalizeMethods(h);c&&n.isFunction(c[e])&&c[e].apply(i,a)}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?n.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},_parentLayoutView:function(){for(var e=this._parent;e;){if(e instanceof o.LayoutView)return e;e=e._parent}},normalizeMethods:o.normalizeMethods,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,n.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(!1!==e){if(!e)throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.mixinTemplateHelpers(this.serializeData()),n=o.Renderer.render(e,t,this);return this.attachElContent(n),this}},attachElContent:function(e){return this.$el.html(e),this}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(e){this.once("render",this._initialEvents),this._initChildViewStorage(),o.View.apply(this,arguments),this.on({"before:show":this._onBeforeShowCalled,show:this._onShowCalled,"before:attach":this._onBeforeAttachCalled,attach:this._onAttachCalled}),this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){var e,t=this._isShown&&o.isNodeAttached(this.el);this.isBuffering=!1,this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"before:show"),t&&this._triggerBeforeAttach&&(e=this._getNestedViews(),this._triggerMethodMany(e,this,"before:attach")),this.attachBuffer(this,this._createBuffer()),t&&this._triggerAttach&&(e=this._getNestedViews(),this._triggerMethodMany(e,this,"attach")),this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"show"),this.initRenderBuffer()},_triggerMethodMany:function(e,t,i){var r=n.drop(arguments,3);n.each(e,function(e){o.triggerMethodOn.apply(e,[e,i,e,t].concat(r))})},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e,t,i){var r=void 0!==i.at&&(i.index||t.indexOf(e));if((this.getOption("filter")||!1===r)&&(r=n.indexOf(this._filteredSortedModels(r),e)),this._shouldAddChild(e,r)){this.destroyEmptyView();var o=this.getChildView(e);this.addChild(e,o,r)}},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=!1,this.children.each(function(e){o.triggerMethodOn(e,"before:show",e)})},_onShowCalled:function(){this.children.each(function(e){o.triggerMethodOn(e,"show",e)})},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:function(){this._triggerAttach=!0},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.isRendered=!0,this.triggerMethod("render",this),this},reorder:function(){var e=this.children,t=this._filteredSortedModels();if(n.some(t,function(t){return!e.findByModel(t)}))this.render();else{var i=n.map(t,function(t,n){var i=e.findByModel(t);return i._index=n,i.el}),r=e.filter(function(e){return!n.contains(i,e.el)});this.triggerMethod("before:reorder"),this._appendReorderedChildren(i),n.each(r,this.removeChildView,this),this.checkEmpty(),this.triggerMethod("reorder")}},resortView:function(){o.getOption(this,"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var e=this._filteredSortedModels();n.find(e,function(e,t){var n=this.children.findByModel(e);return!n||n._index!==t},this)&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(e){this.$el.append(e)},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren({checkEmpty:!1}),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.getOption("filter")&&this.showEmptyView())},showCollection:function(){var e,t=this._filteredSortedModels();n.each(t,function(t,n){e=this.getChildView(t),this.addChild(t,e,n)},this)},_filteredSortedModels:function(e){var t=this.getViewComparator(),i=this.collection.models;if(e=Math.min(Math.max(e,0),i.length-1),t){var r;e&&(r=i[e],i=i.slice(0,e).concat(i.slice(e+1))),i=this._sortModelsBy(i,t),r&&i.splice(e,0,r)}return this.getOption("filter")&&(i=n.filter(i,function(e,t){return this._shouldAddChild(e,t)},this)),i},_sortModelsBy:function(e,t){return"string"==typeof t?n.sortBy(e,function(e){return e.get(t)},this):1===t.length?n.sortBy(e,t,this):e.sort(n.bind(t,this))},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var n=new t.Model;this.addEmptyView(n,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var i,r=this._isShown&&!this.isBuffering&&o.isNodeAttached(this.el),s=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");n.isFunction(s)&&(s=s.call(this,e,this._emptyViewIndex));var a=this.buildChildView(e,t,s);a._parent=this,this.proxyChildEvents(a),a.once("render",function(){this._isShown&&o.triggerMethodOn(a,"before:show",a),r&&this._triggerBeforeAttach&&(i=this._getViewAndNested(a),this._triggerMethodMany(i,this,"before:attach"))},this),this.children.add(a),this.renderChildView(a,this._emptyViewIndex),r&&this._triggerAttach&&(i=this._getViewAndNested(a),this._triggerMethodMany(i,this,"attach")),this._isShown&&o.triggerMethodOn(a,"show",a)},getChildView:function(e){var t=this.getOption("childView");if(!t)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},addChild:function(e,t,n){var i=this.getOption("childViewOptions");i=o._getValue(i,this,[e,n]);var r=this.buildChildView(e,t,i);return this._updateIndices(r,!0,n),this.triggerMethod("before:add:child",r),this._addChildView(r,n),this.triggerMethod("add:child",r),r._parent=this,r},_updateIndices:function(e,t,n){this.getOption("sort")&&(t&&(e._index=n),this.children.each(function(n){n._index>=e._index&&(n._index+=t?1:-1)}))},_addChildView:function(e,t){var n,i=this._isShown&&!this.isBuffering&&o.isNodeAttached(this.el);this.proxyChildEvents(e),e.once("render",function(){this._isShown&&!this.isBuffering&&o.triggerMethodOn(e,"before:show",e),i&&this._triggerBeforeAttach&&(n=this._getViewAndNested(e),this._triggerMethodMany(n,this,"before:attach"))},this),this.children.add(e),this.renderChildView(e,t),i&&this._triggerAttach&&(n=this._getViewAndNested(e),this._triggerMethodMany(n,this,"attach")),this._isShown&&!this.isBuffering&&o.triggerMethodOn(e,"show",e)},renderChildView:function(e,t){return e.supportsRenderLifecycle||o.triggerMethodOn(e,"before:render",e),e.render(),e.supportsRenderLifecycle||o.triggerMethodOn(e,"render",e),this.attachHtml(this,e,t),e},buildChildView:function(e,t,i){var r=n.extend({model:e},i),s=new t(r);return o.MonitorDOMRefresh(s),s},removeChildView:function(e){return e?(this.triggerMethod("before:remove:child",e),e.supportsDestroyLifecycle||o.triggerMethodOn(e,"before:destroy",e),e.destroy?e.destroy():e.remove(),e.supportsDestroyLifecycle||o.triggerMethodOn(e,"destroy",e),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1),e):e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},_createBuffer:function(){var e=document.createDocumentFragment();return n.each(this._bufferedChildren,function(t){e.appendChild(t.el)}),e},attachHtml:function(e,t,n){e.isBuffering?e._bufferedChildren.splice(n,0,t):e._insertBefore(t,n)||e._insertAfter(t)},_insertBefore:function(e,t){var n;return this.getOption("sort")&&t<this.children.length-1&&(n=this.children.find(function(e){return e._index===t+1})),!!n&&(n.$el.before(e.el),!0)},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy:collection"),this.destroyChildren({checkEmpty:!1}),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(e){var t=e||{},i=!0,r=this.children.map(n.identity)
;return n.isUndefined(t.checkEmpty)||(i=t.checkEmpty),this.children.each(this.removeChildView,this),i&&this.checkEmpty(),r},_shouldAddChild:function(e,t){var i=this.getOption("filter");return!n.isFunction(i)||i.call(this,e,t,this.collection)},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var i=n.toArray(arguments),r=i[0],o=this.normalizeMethods(n.result(this,"childEvents"));i[0]=t+":"+r,i.splice(1,0,e),void 0!==o&&n.isFunction(o[r])&&o[r].apply(this,i.slice(1)),this.triggerMethod.apply(this,i)})},_getImmediateChildren:function(){return n.values(this.children._views)},_getViewAndNested:function(e){return[e].concat(n.result(e,"_getNestedViews")||[])},getViewComparator:function(){return this.getOption("viewComparator")}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(e){return this.getOption("childView")||this.constructor},serializeData:function(){var e={};return this.model&&(e=n.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this._isRendering=!1,this.isRendered=!0,this.triggerMethod("render",this),this},_renderChildren:function(){(this.isRendered||this._isRendering)&&o.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),n=o.Renderer.render(t,e,this);this.attachElContent(n),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){this.getChildViewContainer(e).append(t)},_insertAfter:function(e){this.getChildViewContainer(this,e).append(e.el)},_appendReorderedChildren:function(e){this.getChildViewContainer(this).append(e)},getChildViewContainer:function(e,t){if(e.$childViewContainer)return e.$childViewContainer;var n,i=o.getOption(e,"childViewContainer");if(i){var r=o._getValue(i,e);if(n="@"===r.charAt(0)&&e.ui?e.ui[r.substr(4)]:e.$(r),n.length<=0)throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else n=e.$el;return e.$childViewContainer=n,n},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(!0===this.getOption("destroyImmediate")&&this.$el.remove(),this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},showChildView:function(e,t,i){var r=this.getRegion(e);return r.show.apply(r,n.rest(arguments))},getChildView:function(e){return this.getRegion(e).currentView},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:n.partial(n.result,this,"el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=o._getValue(this.regions,this,[e])||{};var i=this.getOption.call(e,"regions");i=o._getValue(i,this,[e]),n.extend(t,i),t=this.normalizeUIValues(t,["selector","el"]),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return n.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),o.Behavior=o.Object.extend({constructor:function(e,t){this.view=t,this.defaults=n.result(this,"defaults")||{},this.options=n.extend({},this.defaults,e),this.ui=n.extend({},n.result(t,"ui"),n.result(this,"ui")),o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),o.Behaviors=function(e,t){function n(e,i){return t.isObject(e.behaviors)?(i=n.parseBehaviors(e,i||t.result(e,"behaviors")),n.wrap(e,i,t.keys(o)),i):{}}function i(e,t){this._view=e,this._behaviors=t,this._triggers={}}function r(e){return e._uiBindings||e.ui}var o={behaviorTriggers:function(e,t){return new i(this,t).buildBehaviorTriggers()},behaviorEvents:function(n,i){var o={};return t.each(i,function(n,i){var s={},a=t.clone(t.result(n,"events"))||{};a=e.normalizeUIKeys(a,r(n));var h=0;t.each(a,function(e,r){var o=r.match(/^(\S+)\s*(.*)$/),a=o[1]+"."+[this.cid,i,h++," "].join(""),c=o[2],u=a+c,l=t.isFunction(e)?e:n[e];s[u]=t.bind(l,n)},this),o=t.extend(o,s)},this),o}};return t.extend(n,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,i){return t.behaviorClass?t.behaviorClass:e._getValue(n.behaviorsLookup,this,[t,i])[i]},parseBehaviors:function(e,i){return t.chain(i).map(function(i,r){var o=n.getBehaviorClass(i,r),s=new o(i,e);return[s].concat(n.parseBehaviors(e,t.result(s,"behaviors")))}).flatten().value()},wrap:function(e,n,i){t.each(i,function(i){e[i]=t.partial(o[i],e[i],n)})}}),t.extend(i.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(n,i){var o=t.clone(t.result(n,"triggers"))||{};o=e.normalizeUIKeys(o,r(n)),t.each(o,t.bind(this._setHandlerForBehavior,this,n,i))},_setHandlerForBehavior:function(e,t,n,i){var r=i.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[r]=this._view._buildViewTrigger(n)}}),n}(o,n),o.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var n=this.getOption("appRoutes"),i=this._getController();this.processAppRoutes(i,n),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},_processOnRoute:function(e,t){if(n.isFunction(this.onRoute)){var i=n.invert(this.getOption("appRoutes"))[e];this.onRoute(e,i,t)}},processAppRoutes:function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,i){var r=e[i];if(!r)throw new o.Error('Method "'+i+'" was not found on the controller');this.route(t,i,n.bind(r,e))},mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Application=o.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new o.Callbacks,this.submodules={},n.extend(this,e),this._initChannel(),o.Object.apply(this,arguments)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var i=o.Module.getClass(t),r=n.toArray(arguments);return r.unshift(this),i.create.apply(i,r)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(e){var t=n.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var i=o.getOption(e,"regions");return n.isFunction(i)&&(i=i.call(this,e)),n.extend(t,i),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,o._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=n.result(this,"channelName")||"global",this.channel=n.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=n.result(this,"vent")||this.channel.vent,this.commands=n.result(this,"commands")||this.channel.commands,this.reqres=n.result(this,"reqres")||this.channel.reqres}}),o.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,n.isFunction(this.initialize)&&this.initialize(e,t,this.options)},o.Module.extend=o.extend,n.extend(o.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),n.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var r=n.flatten([this,this.app,t,o,t.$,n,i]);e.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),n.extend(o.Module,{create:function(e,t,i){var r=e,o=n.drop(arguments,3);t=t.split(".");var s=t.length,a=[];return a[s-1]=i,n.each(t,function(t,n){var s=r;r=this._getModule(s,t,e,i),this._addModuleDefinition(s,r,a[n],o)},this),r},_getModule:function(e,t,i,r,o){var s=n.extend({},r),a=this.getClass(r),h=e[t];return h||(h=new a(t,i,s),e[t]=h,e.submodules[t]=h),h},getClass:function(e){var t=o.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,i){var r=this._getDefine(n),o=this._getStartWithParent(n,t);r&&t.addDefinition(r,i),this._addStartWithParent(e,t,o)},_getStartWithParent:function(e,t){var i;return n.isFunction(e)&&e.prototype instanceof o.Module?(i=t.constructor.prototype.startWithParent,!!n.isUndefined(i)||i):!n.isObject(e)||(i=e.startWithParent,!!n.isUndefined(i)||i)},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof o.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),o})},{"./../../../../assets/src/js/admin/vendor/backbone-shim.js":32,"./../../../../assets/src/js/admin/vendor/underscore-shim.js":38,"backbone.babysitter":39,"backbone.wreqr":44}],41:[function(t,n,i){!function(r,o){"object"==typeof i&&void 0!==n?n.exports=o(t("./../../../assets/src/js/admin/vendor/underscore-shim.js"),t("./../../../assets/src/js/admin/vendor/backbone-shim.js")):"function"==typeof e&&e.amd?e(["underscore","backbone"],o):r.Backbone.Radio=o(r._,r.Backbone)}(this,function(e,t){"use strict";function n(e,t,n,i){var r=e[t];if(!(n&&n!==r.callback&&n!==r.callback._callback||i&&i!==r.context))return delete e[t],!0}function i(t,i,r,o){t||(t={});for(var s=i?[i]:e.keys(t),a=!1,h=0,c=s.length;h<c;h++)i=s[h],t[i]&&n(t,i,r,o)&&(a=!0);return a}function r(t){return c[t]||(c[t]=e.partial(a.log,t))}function o(t){return e.isFunction(t)?t:function(){return t}}var s=t.Radio,a=t.Radio={};a.VERSION="1.0.2",a.noConflict=function(){return t.Radio=s,this},a.DEBUG=!1,a._debugText=function(e,t,n){return e+(n?" on the "+n+" channel":"")+': "'+t+'"'},a.debugLog=function(e,t,n){a.DEBUG&&console&&console.warn&&console.warn(a._debugText(e,t,n))};var h=/\s+/;a._eventsApi=function(t,n,i,r){if(!i)return!1;var o={};if("object"==typeof i){for(var s in i){var a=t[n].apply(t,[s,i[s]].concat(r));h.test(s)?e.extend(o,a):o[s]=a}return o}if(h.test(i)){for(var c=i.split(h),u=0,l=c.length;u<l;u++)o[c[u]]=t[n].apply(t,[c[u]].concat(r));return o}return!1},a._callHandler=function(e,t,n){var i=n[0],r=n[1],o=n[2];switch(n.length){case 0:return e.call(t);case 1:return e.call(t,i);case 2:return e.call(t,i,r);case 3:return e.call(t,i,r,o);default:return e.apply(t,n)}};var c={};e.extend(a,{log:function(t,n){var i=e.rest(arguments,2);console.log("["+t+'] "'+n+'"',i)},tuneIn:function(e){var t=a.channel(e);return t._tunedIn=!0,t.on("all",r(e)),this},tuneOut:function(e){var t=a.channel(e);return t._tunedIn=!1,t.off("all",r(e)),delete c[e],this}}),a.Requests={request:function(t){var n=e.rest(arguments),i=a._eventsApi(this,"request",t,n);if(i)return i;var r=this.channelName,o=this._requests;if(r&&this._tunedIn&&a.log.apply(this,[r,t].concat(n)),o&&(o[t]||o.default)){var s=o[t]||o.default;return n=o[t]?n:arguments,a._callHandler(s.callback,s.context,n)}a.debugLog("An unhandled request was fired",t,r)},reply:function(e,t,n){return a._eventsApi(this,"reply",e,[t,n])?this:(this._requests||(this._requests={}),this._requests[e]&&a.debugLog("A request was overwritten",e,this.channelName),this._requests[e]={callback:o(t),context:n||this},this)},replyOnce:function(t,n,i){if(a._eventsApi(this,"replyOnce",t,[n,i]))return this;var r=this,s=e.once(function(){return r.stopReplying(t),o(n).apply(this,arguments)});return this.reply(t,s,i)},stopReplying:function(e,t,n){return a._eventsApi(this,"stopReplying",e)?this:(e||t||n?i(this._requests,e,t,n)||a.debugLog("Attempted to remove the unregistered request",e,this.channelName):delete this._requests,this)}},a._channels={},a.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return a._channels[e]?a._channels[e]:a._channels[e]=new a.Channel(e)},a.Channel=function(e){this.channelName=e},e.extend(a.Channel.prototype,t.Events,a.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}});var u,l,d=[t.Events,a.Commands,a.Requests];return e.each(d,function(t){e.each(t,function(t,n){a[n]=function(t){return l=e.rest(arguments),u=this.channel(t),u[n].apply(u,l)}})}),a.reset=function(t){var n=t?[this._channels[t]]:this._channels;e.invoke(n,"reset")},a})},{"./../../../assets/src/js/admin/vendor/backbone-shim.js":32,"./../../../assets/src/js/admin/vendor/underscore-shim.js":38}],42:[function(t,n,i){!function(n){"function"==typeof e&&e.amd?e(["underscore","backbone","exports"],n):"object"==typeof i?n(t("./../../assets/src/js/admin/vendor/underscore-shim.js"),t("./../../assets/src/js/admin/vendor/backbone-shim.js"),i):n(_,Backbone,{})}(function(e,t,n){t.Stickit=n,n._handlers=[],n.addHandler=function(t){t=e.map(e.flatten([t]),function(t){return e.defaults({},t,{updateModel:!0,updateView:!0,updateMethod:"text"})}),this._handlers=this._handlers.concat(t)},n.ViewMixin={_modelBindings:null,unstickit:function(t,n){if(e.isObject(n))return void e.each(n,function(e,n){this.unstickit(t,n)},this);var i=[],r=[];this._modelBindings=e.reject(this._modelBindings,function(e){if(!(t&&e.model!==t||n&&e.config.selector!=n))return e.model.off(e.event,e.fn),r.push(e.config._destroy),i.push(e.model),!0}),e.invoke(e.uniq(i),"trigger","stickit:unstuck",this.cid),e.each(e.uniq(r),function(e){e.call(this)},this),this.$el.off(".stickit"+(t?"."+t.cid:""),n)},stickit:function(t,n){var i=t||this.model,r=n||e.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(i,r);var o=this.remove;return o.stickitWrapped||(this.remove=function(){var e=this;return this.unstickit(),o&&(e=o.apply(this,arguments)),e}),this.remove.stickitWrapped=!0,this},addBinding:function(t,n,r){var g=t||this.model,m=".stickit."+g.cid;if(r=r||{},e.isObject(n)){var v=n;return void e.each(v,function(e,t){this.addBinding(g,t,e)},this)}var _=":el"===n?this.$el:this.$(n);if(this.unstickit(g,n),_.length){e.isString(r)&&(r={observe:r}),e.isFunction(r.observe)&&(r.observe=r.observe.call(this));var y=u(_,r),b=y.observe;y.selector=n,y.view=this;var w=y.bindId=e.uniqueId(),M=e.extend({stickitChange:y},y.setOptions);if(y._destroy=function(){o.call(this,y.destroy,_,g,y)},l(_,y,g,b),f(_,y,g,b),d(_,y,g,b),b){e.each(y.events,function(t){var r=t+m,a=function(e){var t=o.call(this,y.getVal,_,e,y,i.call(arguments,1));s(y.updateModel,t,e,y)&&h(g,b,t,M,y)},c=":el"===n?"":n;this.$el.on(r,c,e.bind(a,this))},this),e.each(e.flatten([b]),function(e){a(g,"change:"+e,y,function(e,t,n){if((n&&n.stickitChange&&n.stickitChange.bindId)!==w){var i=c(g,b,y);p(_,y,i,g)}})});var x=c(g,b,y);p(_,y,x,g,!0)}o.call(this,y.initialize,_,g,y)}}},e.extend(t.View.prototype,n.ViewMixin);var i=[].slice,r=function(t,n){var i=(n||"").split("."),r=e.reduce(i,function(e,t){return e[t]},t);return null==r?t:r},o=function(t){if(t=e.isString(t)?r(this,t):t)return t.apply(this,i.call(arguments,1))},s=function(t,n,i){if(e.isBoolean(t))return t;if(e.isFunction(t)||e.isString(t)){var r=e.last(arguments).view;return o.apply(r,arguments)}return!1},a=function(e,t,n,i){var r=n.view;e.on(t,i,r),r._modelBindings.push({model:e,event:t,fn:i,config:n})},h=function(t,n,i,r,s){var a={},h=s.view;s.onSet&&(i=o.call(h,s.onSet,i,s)),s.set?o.call(h,s.set,n,i,r,s):(a[n]=i,e.isArray(n)&&e.isArray(i)&&(a=e.reduce(n,function(t,n,r){return t[n]=e.has(i,r)?i[r]:null,t},{})),t.set(a,r))},c=function(t,n,i){var r=i.view,s=function(e){return t[i.escape?"escape":"get"](e)},a=function(e){return null==e?"":e},h=e.isArray(n)?e.map(n,s):s(n);return i.onGet&&(h=o.call(r,i.onGet,h,i)),e.isArray(h)?e.map(h,a):a(h)},u=n.getConfiguration=function(t,i){var r=[{updateModel:!1,updateMethod:"text",update:function(e,t,n,i){e[i.updateMethod]&&e[i.updateMethod](t)},getVal:function(e,t,n){return e[n.updateMethod]()}}];r=r.concat(e.filter(n._handlers,function(e){return t.is(e.selector)})),r.push(i);var o=e.extend.apply(e,r);return e.has(o,"updateView")||(o.updateView=!o.visible),o},l=function(t,n,i,r){var o=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"],s=n.view;e.each(n.attributes||[],function(h){h=e.clone(h),h.view=s;var u="",l=h.observe||(h.observe=r),d=function(){var n=e.contains(o,h.name)?"prop":"attr",r=c(i,l,h);"class"===h.name?(t.removeClass(u).addClass(r),u=r):t[n](h.name,r)};e.each(e.flatten([l]),function(e){a(i,"change:"+e,n,d)}),d()})},d=function(t,n,i,r){e.each(n.classes||[],function(r,o){e.isString(r)&&(r={observe:r}),r.view=n.view;var s=r.observe,h=function(){var e=c(i,s,r);t.toggleClass(o,!!e)};e.each(e.flatten([s]),function(e){a(i,"change:"+e,n,h)}),h()})},f=function(t,n,i,r){if(null!=n.visible){var s=n.view,h=function(){var a=n.visible,h=n.visibleFn,u=c(i,r,n),l=!!u;(e.isFunction(a)||e.isString(a))&&(l=!!o.call(s,a,u,n)),h?o.call(s,h,t,l,n):t.toggle(l)};e.each(e.flatten([r]),function(e){a(i,"change:"+e,n,h)}),h()}},p=function(e,t,n,i,r){var a=t.view;s(t.updateView,n,t)&&(o.call(a,t.update,e,n,i,t),r||o.call(a,t.afterUpdate,e,n,t))};return n.addHandler([{selector:"[contenteditable]",updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:'input[type="radio"]',events:["change"],update:function(e,t){e.filter('[value="'+t+'"]').prop("checked",!0)},getVal:function(e){return e.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(n,i,r,o){if(n.length>1)i||(i=[]),n.each(function(n,r){var o=t.$(r),s=e.contains(i,o.val());o.prop("checked",s)});else{var s=e.isBoolean(i)?i:i===n.val();n.prop("checked",s)}},getVal:function(n){var i;if(n.length>1)i=e.reduce(n,function(e,n){var i=t.$(n);return i.prop("checked")&&e.push(i.val()),e},[]);else{i=n.prop("checked");var r=n.val();"on"!==r&&null!=r&&(i=i?n.val():null)}return i}},{selector:"select",events:["change"],update:function(n,i,s,a){var h,u=a.selectOptions,l=u&&u.collection||void 0,d=n.prop("multiple");if(!u){u={};var f=function(e){return e.map(function(e,n){var i=t.$(n).data("stickit-bind-val");return{value:void 0!==i?i:n.value,label:n.text}}).get()};n.find("optgroup").length?(l={opt_labels:[]},n.find("> option").length&&(l.opt_labels.push(void 0),e.each(n.find("> option"),function(e){l[void 0]=f(t.$(e))})),e.each(n.find("optgroup"),function(e){var n=t.$(e).attr("label");l.opt_labels.push(n),l[n]=f(t.$(e).find("option"))})):l=f(n.find("option"))}u.valuePath=u.valuePath||"value",u.labelPath=u.labelPath||"label",u.disabledPath=u.disabledPath||"disabled";var p=function(n,i,o){e.each(n,function(n){var s,a,h,c=t.$("<option/>"),l=n;"__default__"===n?(s=o.label,a=o.value,h=o.disabled):(s=r(n,u.labelPath),a=r(n,u.valuePath),h=r(n,u.disabledPath)),function(t,n,i){c.text(t),l=n,c.data("stickit-bind-val",l),e.isArray(l)||e.isObject(l)||c.val(l),!0===i&&c.prop("disabled","disabled")}(s,a,h);!function(){return!d&&null!=l&&null!=o&&l===o||!(!e.isObject(o)||!e.isEqual(l,o))}()?d&&e.isArray(o)&&e.each(o,function(t){e.isObject(t)&&(t=r(t,u.valuePath)),(t===l||e.isObject(t)&&e.isEqual(l,t))&&c.prop("selected",!0)}):c.prop("selected",!0),i.append(c)})};if(n.find("*").remove(),e.isString(l)){var g=window;0===l.indexOf("this.")&&(g=this),l=l.replace(/^[a-z]*\.(.+)$/,"$1"),h=r(g,l)}else h=e.isFunction(l)?o.call(this,l,n,a):l;if(h instanceof t.Collection){var m=h,v=function(){var e=c(s,a.observe,a);o.call(this,a.update,n,e,s,a)},_=function(){m.off("add remove reset sort",v)},y=function(){_(),m.off("stickit:selectRefresh"),s.off("stickit:selectRefresh")};m.trigger("stickit:selectRefresh"),m.once("stickit:selectRefresh",_,this),m.on("add remove reset sort",v,this),s.trigger("stickit:selectRefresh"),s.once("stickit:selectRefresh",function(){s.off("stickit:unstuck",y)}),s.once("stickit:unstuck",y,this),h=h.toJSON()}if(u.defaultOption){var b=e.isFunction(u.defaultOption)?u.defaultOption.call(this,n,a):u.defaultOption;p(["__default__"],n,b)}if(e.isArray(h))p(h,n,i);else if(h.opt_labels)e.each(h.opt_labels,function(e){var r=t.$("<optgroup/>").attr("label",e);p(h[e],r,i),n.append(r)});else{var w,M=[];for(var x in h)w={},w[u.valuePath]=x,w[u.labelPath]=h[x],M.push(w);M=e.sortBy(M,u.comparator||u.labelPath),p(M,n,i)}},getVal:function(n){var i=n.find("option:selected");return n.prop("multiple")?e.map(i,function(e){return t.$(e).data("stickit-bind-val")}):i.data("stickit-bind-val")}}]),n})},{"./../../assets/src/js/admin/vendor/backbone-shim.js":32,"./../../assets/src/js/admin/vendor/underscore-shim.js":38}],43:[function(t,n,i){!function(t,i,r){void 0!==n&&n.exports?n.exports=r():"function"==typeof e&&e.amd?e("bowser",r):t.bowser=r()}(this,0,function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var n,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(e),o=!r&&/android/i.test(e),a=/nexus\s*[0-6]\s*/i.test(e),h=!a&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),u=/silk/i.test(e),l=/sailfish/i.test(e),d=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),p=/windows phone/i.test(e),g=(/SamsungBrowser/i.test(e),!p&&/windows/i.test(e)),m=!i&&!u&&/macintosh/i.test(e),v=!o&&!l&&!d&&!f&&/linux/i.test(e),_=t(/edge\/(\d+(\.\d+)?)/i),y=t(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e),w=!b&&/[^-]mobi/i.test(e),M=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:s,version:y||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?n={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:s,version:y||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:s,version:y||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:s,version:y||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:p?(n={name:"Windows Phone",windowsphone:s},_?(n.msedge=s,n.version=_):(n.msie=s,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?n={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:s,version:_}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||y}:l?n={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=s)):u?n={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:s,version:y||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(n={name:"WebOS",webos:s,version:y||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=s)):/bada/i.test(e)?n={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:d?n={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(e)?n={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?n={name:"Android",version:y}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:s},y&&(n.version=y)):i?(n={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},y&&(n.version=y)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||y}:{name:t(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=s):(n.name=n.name||"Webkit",n.webkit=s),!n.version&&y&&(n.version=y)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=s,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||n.msedge||!o&&!n.silk?n.windowsphone||n.msedge||!i?m?n.mac=s:M?n.xbox=s:g?n.windows=s:v&&(n.linux=s):(n[i]=s,n.ios=s):n.android=s;var x="";n.windowsphone?x=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(x=t(/os (\d+([_\s]\d+)*) like mac os x/i),x=x.replace(/[_\s]/g,".")):o?x=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?x=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?x=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?x=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(x=t(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(n.osversion=x);var C=x.split(".")[0];return b||h||"ipad"==i||o&&(3==C||C>=4&&!w)||n.silk?n.tablet=s:(w||"iphone"==i||"ipod"==i||o||a||n.blackberry||n.webos||n.bada)&&(n.mobile=s),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=s:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=s:n.x=s,n}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),r=n(e,function(e){var r=i-t(e);return e+=new Array(r+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(r[0][i]>r[1][i])return 1;if(r[0][i]!==r[1][i])return-1;if(0===i)return 0}}function r(t,n,r){var o=a;"string"==typeof n&&(r=n,n=void 0),void 0===n&&(n=!1),r&&(o=e(r));var s=""+o.version;for(var h in t)if(t.hasOwnProperty(h)&&o[h]){if("string"!=typeof t[h])throw new Error("Browser version in the minVersion map should be a string: "+h+": "+String(t));return i([s,t[h]])<0}return n}function o(e,t,n){return!r(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=r,a.compareVersions=i,a.check=o,a._detect=e,a})},{}],44:[function(e,t,n){},{}],45:[function(t,n,i){(function(r,o){!function(t,r){"object"==typeof i&&void 0!==n?n.exports=r():"function"==typeof e&&e.amd?e(r):t.ES6Promise=r()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function i(e){H=e}function s(e){G=e}function a(){return function(){W(c)}}function h(){var e=setTimeout
;return function(){return e(c,1)}}function c(){for(var e=0;e<U;e+=2){(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0}U=0}function u(e,t){var n=arguments,i=this,r=new this.constructor(d);void 0===r[ee]&&R(r);var o=i._state;return o?function(){var e=n[o-1];G(function(){return O(o,r,e,i._result)})}():C(i,r,e,t),r}function l(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return b(n,e),n}function d(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function g(e){try{return e.then}catch(e){return re.error=e,re}}function m(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function v(e,t,n){G(function(e){var i=!1,r=m(n,t,function(n){i||(i=!0,t!==n?b(e,n):M(e,n))},function(t){i||(i=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,x(e,r))},e)}function _(e,t){t._state===ne?M(e,t._result):t._state===ie?x(e,t._result):C(t,void 0,function(t){return b(e,t)},function(t){return x(e,t)})}function y(e,t,i){t.constructor===e.constructor&&i===u&&t.constructor.resolve===l?_(e,t):i===re?x(e,re.error):void 0===i?M(e,t):n(i)?v(e,t,i):M(e,t)}function b(t,n){t===n?x(t,f()):e(n)?y(t,n,g(n)):M(t,n)}function w(e){e._onerror&&e._onerror(e._result),k(e)}function M(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&G(k,e))}function x(e,t){e._state===te&&(e._state=ie,e._result=t,G(w,e))}function C(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+ne]=n,r[o+ie]=i,0===o&&e._state&&G(k,e)}function k(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?O(n,i,r,o):r(o);e._subscribers.length=0}}function D(){this.error=null}function S(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function O(e,t,i,r){var o=n(i),s=void 0,a=void 0,h=void 0,c=void 0;if(o){if(s=S(i,r),s===oe?(c=!0,a=s.error,s=null):h=!0,t===s)return void x(t,p())}else s=r,h=!0;t._state!==te||(o&&h?b(t,s):c?x(t,a):e===ne?M(t,s):e===ie&&x(t,s))}function E(e,t){try{t(function(t){b(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}function T(){return se++}function R(e){e[ee]=se++,e._state=void 0,e._result=void 0,e._subscribers=[]}function A(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[ee]||R(this.promise),z(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&M(this.promise,this._result))):x(this.promise,V())}function V(){return new Error("Array Methods must be provided an Array")}function I(e){return new A(this,e).promise}function Y(e){var t=this;return new t(z(e)?function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function j(e){var t=this,n=new t(d);return x(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this[ee]=T(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&B(),this instanceof F?E(this,e):N())}function P(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=F}var L=void 0;L=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var z=L,U=0,W=void 0,H=void 0,G=function(e,t){X[U]=e,X[U+1]=t,2===(U+=2)&&(H?H(c):Q())},$="undefined"!=typeof window?window:void 0,q=$||{},J=q.MutationObserver||q.WebKitMutationObserver,Z="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Q=void 0;Q=Z?function(){return function(){return r.nextTick(c)}}():J?function(){var e=0,t=new J(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():K?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===$&&"function"==typeof t?function(){try{var e=t,n=e("vertx");return W=n.runOnLoop||n.runOnContext,a()}catch(e){return h()}}():h();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,ie=2,re=new D,oe=new D,se=0;return A.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===te&&n<e;n++)this._eachEntry(t[n],n)},A.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===l){var r=g(e);if(r===u&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===F){var o=new n(d);y(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},A.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===te&&(this._remaining--,e===ie?x(i,n):this._result[t]=n),0===this._remaining&&M(i,this._result)},A.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(ie,t,e)})},F.all=I,F.race=Y,F.resolve=l,F.reject=j,F._setScheduler=i,F._setAsap=s,F._asap=G,F.prototype={constructor:F,then:u,catch:function(e){return this.then(null,e)}},P(),F.polyfill=P,F.Promise=F,F})}).call(this,t("_process"),window||{})},{_process:49}],46:[function(t,n,i){!function(t){"use strict";function r(){console.log.apply(console,arguments)}function o(e,t){var n;this.list=e,this.options=t=t||{};for(n in c)c.hasOwnProperty(n)&&("boolean"==typeof c[n]?this.options[n]=n in t?t[n]:c[n]:this.options[n]=t[n]||c[n])}function s(e,t,n){var i,r,o,h,c,u;if(t){if(o=t.indexOf("."),-1!==o?(i=t.slice(0,o),r=t.slice(o+1)):i=t,null!==(h=e[i])&&void 0!==h)if(r||"string"!=typeof h&&"number"!=typeof h)if(a(h))for(c=0,u=h.length;c<u;c++)s(h[c],r,n);else r&&s(h,r,n);else n.push(h)}else n.push(e);return n}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function h(e,t){t=t||{},this.options=t,this.options.location=t.location||h.defaultOptions.location,this.options.distance="distance"in t?t.distance:h.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:h.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||h.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var c={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:h,sortFn:function(e,t){return e.score-t.score},getFn:s,keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};o.VERSION="2.6.2",o.prototype.set=function(e){return this.list=e,e},o.prototype.search=function(e){return this.options.verbose&&r("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort(),this._format()},o.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,n=e.searchFn,i=t.split(e.tokenSeparator),r=0,o=i.length;if(this.options.tokenize)for(this.tokenSearchers=[];r<o;r++)this.tokenSearchers.push(new n(i[r],e));this.fullSeacher=new n(t,e)},o.prototype._startSearch=function(){var e,t,n,i,r=this.options,o=r.getFn,s=this.list,a=s.length,h=this.options.keys,c=h.length,u=null;if("string"==typeof s[0])for(n=0;n<a;n++)this._analyze("",s[n],n,n);else for(this._keyMap={},n=0;n<a;n++)for(u=s[n],i=0;i<c;i++){if("string"!=typeof(e=h[i])){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||e.weight>1)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,o(u,e,[]),u,n)}},o.prototype._analyze=function(e,t,n,i){var o,s,h,c,u,l,d,f,p,g,m,v,_,y,b,w=this.options,M=!1;if(void 0!==t&&null!==t){s=[];var x=0;if("string"==typeof t){if(o=t.split(w.tokenSeparator),w.verbose&&r("---------\nKey:",e),this.options.tokenize){for(y=0;y<this.tokenSearchers.length;y++){for(f=this.tokenSearchers[y],w.verbose&&r("Pattern:",f.pattern),p=[],v=!1,b=0;b<o.length;b++){g=o[b],m=f.search(g);var C={};m.isMatch?(C[g]=m.score,M=!0,v=!0,s.push(m.score)):(C[g]=1,this.options.matchAllTokens||s.push(1)),p.push(C)}v&&x++,w.verbose&&r("Token scores:",p)}for(c=s[0],l=s.length,y=1;y<l;y++)c+=s[y];c/=l,w.verbose&&r("Token score average:",c)}d=this.fullSeacher.search(t),w.verbose&&r("Full text score:",d.score),u=d.score,void 0!==c&&(u=(u+c)/2),w.verbose&&r("Score average:",u),_=!this.options.tokenize||!this.options.matchAllTokens||x>=this.tokenSearchers.length,w.verbose&&r("Check Matches",_),(M||d.isMatch)&&_&&(h=this.resultMap[i],h?h.output.push({key:e,score:u,matchedIndices:d.matchedIndices}):(this.resultMap[i]={item:n,output:[{key:e,score:u,matchedIndices:d.matchedIndices}]},this.results.push(this.resultMap[i])))}else if(a(t))for(y=0;y<t.length;y++)this._analyze(e,t[y],n,i)}},o.prototype._computeScore=function(){var e,t,n,i,o,s,a,h,c,u=this._keyMap,l=this.results;for(this.options.verbose&&r("\n\nComputing score:\n"),e=0;e<l.length;e++){for(n=0,i=l[e].output,o=i.length,h=1,t=0;t<o;t++)s=i[t].score,a=u?u[i[t].key].weight:1,c=s*a,1!==a?h=Math.min(h,c):(n+=c,i[t].nScore=c);l[e].score=1===h?n/o:h,this.options.verbose&&r(l[e])}},o.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&r("\n\nSorting...."),this.results.sort(e.sortFn))},o.prototype._format=function(){var e,t,n,i,o,s=this.options,a=s.getFn,h=[],c=this.results,u=s.include;for(s.verbose&&r("\n\nOutput:\n\n",c),i=s.id?function(e){c[e].item=a(c[e].item,s.id,[])[0]}:function(){},o=function(e){var t,n,i,r,o,s=c[e];if(u.length>0){if(t={item:s.item},-1!==u.indexOf("matches"))for(i=s.output,t.matches=[],n=0;n<i.length;n++)r=i[n],o={indices:r.matchedIndices},r.key&&(o.key=r.key),t.matches.push(o);-1!==u.indexOf("score")&&(t.score=c[e].score)}else t=s.item;return t},t=0,n=c.length;t<n;t++)i(t),e=o(t),h.push(e);return h},h.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},h.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},h.prototype._bitapScore=function(e,t){var n=e/this.patternLen,i=Math.abs(this.options.location-t);return this.options.distance?n+i/this.options.distance:i?1:n},h.prototype.search=function(e){var t,n,i,r,o,s,a,h,c,u,l,d,f,p,g,m,v,_,y,b,w,M,x,C=this.options;if(e=C.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>C.maxPatternLength){if(_=e.match(new RegExp(this.pattern.replace(C.tokenSeparator,"|"))),y=!!_)for(w=[],t=0,M=_.length;t<M;t++)x=_[t],w.push([e.indexOf(x),x.length-1]);return{isMatch:y,score:y?.5:1,matchedIndices:w}}for(r=C.findAllMatches,o=C.location,i=e.length,s=C.threshold,a=e.indexOf(this.pattern,o),b=[],t=0;t<i;t++)b[t]=0;for(-1!=a&&(s=Math.min(this._bitapScore(0,a),s),-1!=(a=e.lastIndexOf(this.pattern,o+this.patternLen))&&(s=Math.min(this._bitapScore(0,a),s))),a=-1,m=1,v=[],u=this.patternLen+i,t=0;t<this.patternLen;t++){for(h=0,c=u;h<c;)this._bitapScore(t,o+c)<=s?h=c:u=c,c=Math.floor((u-h)/2+h);for(u=c,l=Math.max(1,o-c+1),d=r?i:Math.min(o+c,i)+this.patternLen,f=Array(d+2),f[d+1]=(1<<t)-1,n=d;n>=l;n--)if(g=this.patternAlphabet[e.charAt(n-1)],g&&(b[n-1]=1),f[n]=0===t?(f[n+1]<<1|1)&g:(f[n+1]<<1|1)&g|(p[n+1]|p[n])<<1|1|p[n+1],f[n]&this.matchmask&&(m=this._bitapScore(t,n-1))<=s){if(s=m,a=n-1,v.push(a),!(a>o))break;l=Math.max(1,2*o-a)}if(this._bitapScore(t+1,o)>s)break;p=f}return w=this._getMatchedIndices(b),{isMatch:a>=0,score:0===m?.001:m,matchedIndices:w}},h.prototype._getMatchedIndices=function(e){for(var t,n=[],i=-1,r=-1,o=0,s=e.length;o<s;o++)t=e[o],t&&-1===i?i=o:t||-1===i||(r=o-1,r-i+1>=this.options.minMatchCharLength&&n.push([i,r]),i=-1);return e[o-1]&&o-1-i+1>=this.options.minMatchCharLength&&n.push([i,o-1]),n},"object"==typeof i?n.exports=o:"function"==typeof e&&e.amd?e(function(){return o}):t.Fuse=o}(this)},{}],47:[function(t,n,i){!function(t,r){"object"==typeof i&&void 0!==n?n.exports=r():"function"==typeof e&&e.amd?e(r):t.moment=r()}(this,function(){"use strict";function e(){return Yn.apply(null,arguments)}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,i){return Ee(e,t,n,i,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function u(e){return null==e._pf&&(e._pf=c()),e._pf}function l(e){if(null==e._isValid){var t=u(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=h(NaN);return null!=e?a(u(t),e):u(t).userInvalidated=!0,t}function f(e,t){var n,i,r;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=u(t)),void 0!==t._locale&&(e._locale=t._locale),Bn.length>0)for(n in Bn)i=Bn[n],void 0!==(r=t[i])&&(e[i]=r);return e}function p(t){f(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===Nn&&(Nn=!0,e.updateOffset(this),Nn=!1)}function g(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function m(e){return e<0?Math.ceil(e):Math.floor(e)}function v(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=m(t)),n}function _(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&v(e[i])!==v(t[i]))&&s++;return s+o}function y(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,i,r,o=0;o<e.length;){for(r=b(e[o]).split("-"),t=r.length,n=b(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=M(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&_(r,n,!0)>=t-1)break;t--}o++}return null}function M(e){var i=null;if(!Fn[e]&&void 0!==n&&n&&n.exports)try{i=jn._abbr,t("./locale/"+e),x(i)}catch(e){}return Fn[e]}function x(e,t){var n;return e&&(n=void 0===t?k(e):C(e,t))&&(jn=n),jn._abbr}function C(e,t){return null!==t?(t.abbr=e,Fn[e]=Fn[e]||new y,Fn[e].set(t),x(e),Fn[e]):(delete Fn[e],null)}function k(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return jn;if(!i(e)){if(t=M(e))return t;e=[e]}return w(e)}function D(e,t){var n=e.toLowerCase();Pn[n]=Pn[n+"s"]=Pn[t]=e}function S(e){return"string"==typeof e?Pn[e]||Pn[e.toLowerCase()]:void 0}function O(e){var t,n,i={};for(n in e)s(e,n)&&(t=S(n))&&(i[t]=e[n]);return i}function E(t,n){return function(i){return null!=i?(R(this,t,i),e.updateOffset(this,n),this):T(this,t)}}function T(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function R(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function A(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=S(e),"function"==typeof this[e])return this[e](t);return this}function V(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function I(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(Wn[e]=r),t&&(Wn[t[0]]=function(){return V(r.apply(this,arguments),t[1],t[2])}),n&&(Wn[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function Y(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function j(e){var t,n,i=e.match(Ln);for(t=0,n=i.length;t<n;t++)Wn[i[t]]?i[t]=Wn[i[t]]:i[t]=Y(i[t]);return function(r){var o="";for(t=0;t<n;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function B(e,t){return e.isValid()?(t=N(t,e.localeData()),Un[t]=Un[t]||j(t),Un[t](e)):e.localeData().invalidDate()}function N(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(zn.lastIndex=0;i>=0&&zn.test(e);)e=e.replace(zn,n),zn.lastIndex=0,i-=1;return e}function F(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function P(e,t,n){qn[e]=F(t)?t:function(e){return e&&n?n:t}}function L(e,t){return s(qn,e)?qn[e](t._strict,t._locale):new RegExp(z(e))}function z(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=v(e)}),n=0;n<e.length;n++)Jn[e[n]]=i}function W(e,t){U(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function H(e,t,n){null!=t&&s(Jn,e)&&Jn[e](t,n._a,n,e)}function G(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function $(e){return this._months[e.month()]}function q(e){return this._monthsShort[e.month()]}function J(e,t,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=h([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function Z(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))?e:(n=Math.min(e.date(),G(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function K(t){return null!=t?(Z(this,t),e.updateOffset(this,!0),this):T(this,"Month")}function X(){return G(this.year(),this.month())}function Q(e){var t,n=e._a;return n&&-2===u(e).overflow&&(t=n[Kn]<0||n[Kn]>11?Kn:n[Xn]<1||n[Xn]>G(n[Zn],n[Kn])?Xn:n[Qn]<0||n[Qn]>24||24===n[Qn]&&(0!==n[ei]||0!==n[ti]||0!==n[ni])?Qn:n[ei]<0||n[ei]>59?ei:n[ti]<0||n[ti]>59?ti:n[ni]<0||n[ni]>999?ni:-1,u(e)._overflowDayOfYear&&(t<Zn||t>Xn)&&(t=Xn),u(e).overflow=t),e}function ee(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function te(e,t){var n=!0;return a(function(){return n&&(ee(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function ne(e,t){oi[e]||(ee(t),oi[e]=!0)}function ie(e){var t,n,i=e._i,r=si.exec(i);if(r){for(u(e).iso=!0,t=0,n=ai.length;t<n;t++)if(ai[t][1].exec(i)){e._f=ai[t][0];break}for(t=0,n=hi.length;t<n;t++)if(hi[t][1].exec(i)){e._f+=(r[6]||" ")+hi[t][0];break}i.match(Gn)&&(e._f+="Z"),Me(e)}else e._isValid=!1}function re(t){var n=ci.exec(t._i);if(null!==n)return void(t._d=new Date(+n[1]));ie(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t))}function oe(e,t,n,i,r,o,s){var a=new Date(e,t,n,i,r,o,s);return e<1970&&a.setFullYear(e),a}function se(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function ae(e){return he(e)?366:365}function he(e){return e%4==0&&e%100!=0||e%400==0}function ce(){return he(this.year())}function ue(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),o<r-7&&(o+=7),i=Te(e).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function le(e){return ue(e,this._week.dow,this._week.doy).week}function de(){return this._week.dow}function fe(){return this._week.doy}function pe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function ge(e){var t=ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function me(e,t,n,i,r){var o,s=6+r-i,a=se(e,0,1+s),h=a.getUTCDay();return h<r&&(h+=7),n=null!=n?1*n:r,o=1+s+7*(t-1)-h+n,{year:o>0?e:e-1,dayOfYear:o>0?o:ae(e-1)+o}}function ve(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function _e(e,t,n){return null!=e?e:null!=t?t:n}function ye(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function be(e){var t,n,i,r,o=[];if(!e._d){for(i=ye(e),e._w&&null==e._a[Xn]&&null==e._a[Kn]&&we(e),e._dayOfYear&&(r=_e(e._a[Zn],i[Zn]),e._dayOfYear>ae(r)&&(u(e)._overflowDayOfYear=!0),n=se(r,0,e._dayOfYear),e._a[Kn]=n.getUTCMonth(),e._a[Xn]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Qn]&&0===e._a[ei]&&0===e._a[ti]&&0===e._a[ni]&&(e._nextDay=!0,e._a[Qn]=0),e._d=(e._useUTC?se:oe).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Qn]=24)}}function we(e){var t,n,i,r,o,s,a;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,s=4,n=_e(t.GG,e._a[Zn],ue(Te(),1,4).year),i=_e(t.W,1),r=_e(t.E,1)):(o=e._locale._week.dow,s=e._locale._week.doy,n=_e(t.gg,e._a[Zn],ue(Te(),o,s).year),i=_e(t.w,1),null!=t.d?(r=t.d)<o&&++i:r=null!=t.e?t.e+o:o),a=me(n,i,r,s,o),e._a[Zn]=a.year,e._dayOfYear=a.dayOfYear}function Me(t){if(t._f===e.ISO_8601)return void ie(t);t._a=[],u(t).empty=!0;var n,i,r,o,s,a=""+t._i,h=a.length,c=0;for(r=N(t._f,t._locale).match(Ln)||[],n=0;n<r.length;n++)o=r[n],i=(a.match(L(o,t))||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&u(t).unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),c+=i.length),Wn[o]?(i?u(t).empty=!1:u(t).unusedTokens.push(o),H(o,i,t)):t._strict&&!i&&u(t).unusedTokens.push(o);u(t).charsLeftOver=h-c,a.length>0&&u(t).unusedInput.push(a),!0===u(t).bigHour&&t._a[Qn]<=12&&t._a[Qn]>0&&(u(t).bigHour=void 0),t._a[Qn]=xe(t._locale,t._a[Qn],t._meridiem),be(t),Q(t)}function xe(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Ce(e){var t,n,i,r,o;if(0===e._f.length)return u(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Me(t),l(t)&&(o+=u(t).charsLeftOver,o+=10*u(t).unusedTokens.length,u(t).score=o,(null==i||o<i)&&(i=o,n=t));a(e,n||t)}function ke(e){if(!e._d){var t=O(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],be(e)}}function De(e){var t=new p(Q(Se(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Se(e){var t=e._i,n=e._f;return e._locale=e._locale||k(e._l),null===t||void 0===n&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),g(t)?new p(Q(t)):(i(n)?Ce(e):n?Me(e):r(t)?e._d=t:Oe(e),e))}function Oe(t){var n=t._i;void 0===n?t._d=new Date:r(n)?t._d=new Date(+n):"string"==typeof n?re(t):i(n)?(t._a=o(n.slice(0),function(e){return parseInt(e,10)}),be(t)):"object"==typeof n?ke(t):"number"==typeof n?t._d=new Date(n):e.createFromInputFallback(t)}function Ee(e,t,n,i,r){var o={};return"boolean"==typeof n&&(i=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=e,o._f=t,o._strict=i,De(o)}function Te(e,t,n,i){return Ee(e,t,n,i,!1)}function Re(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Te();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Ae(){return Re("isBefore",[].slice.call(arguments,0))}function Ve(){return Re("isAfter",[].slice.call(arguments,0))}function Ie(e){var t=O(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||0,s=t.day||0,a=t.hour||0,h=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*h+36e5*a,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=k(),this._bubble()}function Ye(e){return e instanceof Ie}function je(e,t){I(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+V(~~(e/60),2)+t+V(~~e%60,2)})}function Be(e){var t=(e||"").match(Gn)||[],n=t[t.length-1]||[],i=(n+"").match(pi)||["-",0,0],r=60*i[1]+v(i[2]);return"+"===i[0]?r:-r}function Ne(t,n){var i,o;return n._isUTC?(i=n.clone(),o=(g(t)||r(t)?+t:+Te(t))-+i,i._d.setTime(+i._d+o),e.updateOffset(i,!1),i):Te(t).local()}function Fe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Pe(t,n){var i,r=this._offset||0;return null!=t?("string"==typeof t&&(t=Be(t)),Math.abs(t)<16&&(t*=60),!this._isUTC&&n&&(i=Fe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!n||this._changeInProgress?nt(this,Ke(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Fe(this)}function Le(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function ze(e){return this.utcOffset(0,e)}function Ue(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Fe(this),"m")),this}function We(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Be(this._i)),this}function He(e){return e=e?Te(e).utcOffset():0,(this.utcOffset()-e)%60==0}function Ge(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function $e(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var e={};if(f(e,this),e=Se(e),e._a){var t=e._isUTC?h(e._a):Te(e._a);this._isDSTShifted=this.isValid()&&_(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function qe(){return!this._isUTC}function Je(){return this._isUTC}function Ze(){return this._isUTC&&0===this._offset}function Ke(e,t){var n,i,r,o=e,a=null;return Ye(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(a=gi.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:v(a[Xn])*n,h:v(a[Qn])*n,m:v(a[ei])*n,s:v(a[ti])*n,ms:v(a[ni])*n}):(a=mi.exec(e))?(n="-"===a[1]?-1:1,o={y:Xe(a[2],n),M:Xe(a[3],n),d:Xe(a[4],n),h:Xe(a[5],n),m:Xe(a[6],n),s:Xe(a[7],n),w:Xe(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=et(Te(o.from),Te(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new Ie(o),Ye(e)&&s(e,"_locale")&&(i._locale=e._locale),i}function Xe(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function et(e,t){var n;return t=Ne(t,e),e.isBefore(t)?n=Qe(e,t):(n=Qe(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function tt(e,t){return function(n,i){var r,o;return null===i||isNaN(+i)||(ne(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=Ke(n,i),nt(this,r,e),this}}function nt(t,n,i,r){var o=n._milliseconds,s=n._days,a=n._months;r=null==r||r,o&&t._d.setTime(+t._d+o*i),s&&R(t,"Date",T(t,"Date")+s*i),a&&Z(t,T(t,"Month")+a*i),r&&e.updateOffset(t,s||a)}function it(e,t){var n=e||Te(),i=Ne(n,this).startOf("day"),r=this.diff(i,"days",!0),o=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,Te(n)))}function rt(){return new p(this)}function ot(e,t){return t=S(void 0!==t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:Te(e),+this>+e):(g(e)?+e:+Te(e))<+this.clone().startOf(t)}function st(e,t){var n;return t=S(void 0!==t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:Te(e),+this<+e):(n=g(e)?+e:+Te(e),+this.clone().endOf(t)<n)}function at(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function ht(e,t){var n;return t=S(t||"millisecond"),"millisecond"===t?(e=g(e)?e:Te(e),+this==+e):(n=+Te(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function ct(e,t,n){var i,r,o=Ne(e,this),s=6e4*(o.utcOffset()-this.utcOffset());return t=S(t),"year"===t||"month"===t||"quarter"===t?(r=ut(this,o),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?r:m(r)}function ut(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(r,"months");return t-o<0?(n=e.clone().add(r-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(r+1,"months"),i=(t-o)/(n-o)),-(r+i)}function lt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ft(t){var n=B(this,t||e.defaultFormat);return this.localeData().postformat(n)}function pt(e,t){return this.isValid()?Ke({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.from(Te(),e)}function mt(e,t){return this.isValid()?Ke({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function vt(e){return this.to(Te(),e)}function _t(e){var t;return void 0===e?this._locale._abbr:(t=k(e),null!=t&&(this._locale=t),this)}function yt(){return this._locale}function bt(e){switch(e=S(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wt(e){return e=S(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function Mt(){return+this._d-6e4*(this._offset||0)}function xt(){return Math.floor(+this/1e3)}function Ct(){return this._offset?new Date(+this):this._d}function kt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Dt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function St(){return l(this)}function Ot(){return a({},u(this))}function Et(){return u(this).overflow}function Tt(e,t){I(0,[e,e.length],0,t)}function Rt(e,t,n){return ue(Te([e,11,31+t-n]),t,n).week}function At(e){var t=ue(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Vt(e){var t=ue(this,1,4).year;return null==e?t:this.add(e-t,"y")}function It(){return Rt(this.year(),1,4)}function Yt(){var e=this.localeData()._week;return Rt(this.year(),e.dow,e.doy)}function jt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Bt(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Nt(e){return this._weekdays[e.day()]}function Ft(e){return this._weekdaysShort[e.day()]}function Pt(e){return this._weekdaysMin[e.day()]}function Lt(e){var t,n,i;for(this._weekdaysParse=this._weekdaysParse||[],
t=0;t<7;t++)if(this._weekdaysParse[t]||(n=Te([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function zt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Bt(e,this.localeData()),this.add(e-t,"d")):t}function Ut(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Ht(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Gt(e,t){return t._meridiemParse}function $t(e){return"p"===(e+"").toLowerCase().charAt(0)}function qt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Jt(e,t){t[ni]=v(1e3*("0."+e))}function Zt(){return this._isUTC?"UTC":""}function Kt(){return this._isUTC?"Coordinated Universal Time":""}function Xt(e){return Te(1e3*e)}function Qt(){return Te.apply(null,arguments).parseZone()}function en(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.call(t,n):i}function tn(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function nn(){return this._invalidDate}function rn(e){return this._ordinal.replace("%d",e)}function on(e){return e}function sn(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)}function an(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function hn(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function cn(e,t,n,i){var r=k(),o=h().set(i,t);return r[n](o,e)}function un(e,t,n,i,r){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return cn(e,t,n,r);var o,s=[];for(o=0;o<i;o++)s[o]=cn(e,o,n,r);return s}function ln(e,t){return un(e,t,"months",12,"month")}function dn(e,t){return un(e,t,"monthsShort",12,"month")}function fn(e,t){return un(e,t,"weekdays",7,"day")}function pn(e,t){return un(e,t,"weekdaysShort",7,"day")}function gn(e,t){return un(e,t,"weekdaysMin",7,"day")}function mn(){var e=this._data;return this._milliseconds=Yi(this._milliseconds),this._days=Yi(this._days),this._months=Yi(this._months),e.milliseconds=Yi(e.milliseconds),e.seconds=Yi(e.seconds),e.minutes=Yi(e.minutes),e.hours=Yi(e.hours),e.months=Yi(e.months),e.years=Yi(e.years),this}function vn(e,t,n,i){var r=Ke(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function _n(e,t){return vn(this,e,t,1)}function yn(e,t){return vn(this,e,t,-1)}function bn(e){return e<0?Math.floor(e):Math.ceil(e)}function wn(){var e,t,n,i,r,o=this._milliseconds,s=this._days,a=this._months,h=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*bn(xn(a)+s),s=0,a=0),h.milliseconds=o%1e3,e=m(o/1e3),h.seconds=e%60,t=m(e/60),h.minutes=t%60,n=m(t/60),h.hours=n%24,s+=m(n/24),r=m(Mn(s)),a+=r,s-=bn(xn(r)),i=m(a/12),a%=12,h.days=s,h.months=a,h.years=i,this}function Mn(e){return 4800*e/146097}function xn(e){return 146097*e/4800}function Cn(e){var t,n,i=this._milliseconds;if("month"===(e=S(e))||"year"===e)return t=this._days+i/864e5,n=this._months+Mn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(xn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function kn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Dn(e){return function(){return this.as(e)}}function Sn(e){return e=S(e),this[e+"s"]()}function On(e){return function(){return this._data[e]}}function En(){return m(this.days()/7)}function Tn(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function Rn(e,t,n){var i=Ke(e).abs(),r=Ki(i.as("s")),o=Ki(i.as("m")),s=Ki(i.as("h")),a=Ki(i.as("d")),h=Ki(i.as("M")),c=Ki(i.as("y")),u=r<Xi.s&&["s",r]||1===o&&["m"]||o<Xi.m&&["mm",o]||1===s&&["h"]||s<Xi.h&&["hh",s]||1===a&&["d"]||a<Xi.d&&["dd",a]||1===h&&["M"]||h<Xi.M&&["MM",h]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,Tn.apply(null,u)}function An(e,t){return void 0!==Xi[e]&&(void 0===t?Xi[e]:(Xi[e]=t,!0))}function Vn(e){var t=this.localeData(),n=Rn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function In(){var e,t,n,i=Qi(this._milliseconds)/1e3,r=Qi(this._days),o=Qi(this._months);e=m(i/60),t=m(e/60),i%=60,e%=60,n=m(o/12),o%=12;var s=n,a=o,h=r,c=t,u=e,l=i,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(h?h+"D":"")+(c||u||l?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(l?l+"S":""):"P0D"}var Yn,jn,Bn=e.momentProperties=[],Nn=!1,Fn={},Pn={},Ln=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Un={},Wn={},Hn=/[+-]?\d{6}/,Gn=/Z|[+-]\d\d:?\d\d/gi,$n=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,qn={},Jn={},Zn=0,Kn=1,Xn=2,Qn=3,ei=4,ti=5,ni=6;I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),D("month","M"),P("M",/\d\d?/),P("MM",/\d\d?/,/\d\d/),P("MMM",$n),P("MMMM",$n),U(["M","MM"],function(e,t){t[Kn]=v(e)-1}),U(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[Kn]=r:u(n).invalidMonth=e});var ii="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ri="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),oi={};e.suppressDeprecationWarnings=!1;var si=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ai=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],hi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ci=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=te("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),D("year","y"),P("Y",/[+-]?\d+/),P("YY",/\d\d?/,/\d\d/),P("YYYY",/\d{1,4}/,/\d{4}/),P("YYYYY",/[+-]?\d{1,6}/,Hn),P("YYYYYY",/[+-]?\d{1,6}/,Hn),U(["YYYYY","YYYYYY"],Zn),U("YYYY",function(t,n){n[Zn]=2===t.length?e.parseTwoDigitYear(t):v(t)}),U("YY",function(t,n){n[Zn]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var ui=E("FullYear",!1);I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),P("w",/\d\d?/),P("ww",/\d\d?/,/\d\d/),P("W",/\d\d?/),P("WW",/\d\d?/,/\d\d/),W(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=v(e)});var li={dow:0,doy:6};I("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),P("DDD",/\d{1,3}/),P("DDDD",/\d{3}/),U(["DDD","DDDD"],function(e,t,n){n._dayOfYear=v(e)}),e.ISO_8601=function(){};var di=te("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Te.apply(null,arguments);return e<this?this:e}),fi=te("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Te.apply(null,arguments);return e>this?this:e});je("Z",":"),je("ZZ",""),P("Z",Gn),P("ZZ",Gn),U(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Be(e)});var pi=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var gi=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,mi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ke.fn=Ie.prototype;var vi=tt(1,"add"),_i=tt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var yi=te("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Tt("gggg","weekYear"),Tt("ggggg","weekYear"),Tt("GGGG","isoWeekYear"),Tt("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),P("G",/[+-]?\d+/),P("g",/[+-]?\d+/),P("GG",/\d\d?/,/\d\d/),P("gg",/\d\d?/,/\d\d/),P("GGGG",/\d{1,4}/,/\d{4}/),P("gggg",/\d{1,4}/,/\d{4}/),P("GGGGG",/[+-]?\d{1,6}/,Hn),P("ggggg",/[+-]?\d{1,6}/,Hn),W(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=v(e)}),W(["gg","GG"],function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)}),I("Q",0,0,"quarter"),D("quarter","Q"),P("Q",/\d/),U("Q",function(e,t){t[Kn]=3*(v(e)-1)}),I("D",["DD",2],"Do","date"),D("date","D"),P("D",/\d\d?/),P("DD",/\d\d?/,/\d\d/),P("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),U(["D","DD"],Xn),U("Do",function(e,t){t[Xn]=v(e.match(/\d\d?/)[0],10)});var bi=E("Date",!0);I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),P("d",/\d\d?/),P("e",/\d\d?/),P("E",/\d\d?/),P("dd",$n),P("ddd",$n),P("dddd",$n),W(["dd","ddd","dddd"],function(e,t,n){var i=n._locale.weekdaysParse(e);null!=i?t.d=i:u(n).invalidWeekday=e}),W(["d","e","E"],function(e,t,n,i){t[i]=v(e)});var wi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),xi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");I("H",["HH",2],0,"hour"),I("h",["hh",2],0,function(){return this.hours()%12||12}),Ht("a",!0),Ht("A",!1),D("hour","h"),P("a",Gt),P("A",Gt),P("H",/\d\d?/),P("h",/\d\d?/),P("HH",/\d\d?/,/\d\d/),P("hh",/\d\d?/,/\d\d/),U(["H","HH"],Qn),U(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),U(["h","hh"],function(e,t,n){t[Qn]=v(e),u(n).bigHour=!0});var Ci=E("Hours",!0);I("m",["mm",2],0,"minute"),D("minute","m"),P("m",/\d\d?/),P("mm",/\d\d?/,/\d\d/),U(["m","mm"],ei);var ki=E("Minutes",!1);I("s",["ss",2],0,"second"),D("second","s"),P("s",/\d\d?/),P("ss",/\d\d?/,/\d\d/),U(["s","ss"],ti);var Di=E("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),D("millisecond","ms"),P("S",/\d{1,3}/,/\d/),P("SS",/\d{1,3}/,/\d\d/),P("SSS",/\d{1,3}/,/\d{3}/);var Si;for(Si="SSSS";Si.length<=9;Si+="S")P(Si,/\d+/);for(Si="S";Si.length<=9;Si+="S")U(Si,Jt);var Oi=E("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var Ei=p.prototype;Ei.add=vi,Ei.calendar=it,Ei.clone=rt,Ei.diff=ct,Ei.endOf=wt,Ei.format=ft,Ei.from=pt,Ei.fromNow=gt,Ei.to=mt,Ei.toNow=vt,Ei.get=A,Ei.invalidAt=Et,Ei.isAfter=ot,Ei.isBefore=st,Ei.isBetween=at,Ei.isSame=ht,Ei.isValid=St,Ei.lang=yi,Ei.locale=_t,Ei.localeData=yt,Ei.max=fi,Ei.min=di,Ei.parsingFlags=Ot,Ei.set=A,Ei.startOf=bt,Ei.subtract=_i,Ei.toArray=kt,Ei.toObject=Dt,Ei.toDate=Ct,Ei.toISOString=dt,Ei.toJSON=dt,Ei.toString=lt,Ei.unix=xt,Ei.valueOf=Mt,Ei.year=ui,Ei.isLeapYear=ce,Ei.weekYear=At,Ei.isoWeekYear=Vt,Ei.quarter=Ei.quarters=jt,Ei.month=K,Ei.daysInMonth=X,Ei.week=Ei.weeks=pe,Ei.isoWeek=Ei.isoWeeks=ge,Ei.weeksInYear=Yt,Ei.isoWeeksInYear=It,Ei.date=bi,Ei.day=Ei.days=zt,Ei.weekday=Ut,Ei.isoWeekday=Wt,Ei.dayOfYear=ve,Ei.hour=Ei.hours=Ci,Ei.minute=Ei.minutes=ki,Ei.second=Ei.seconds=Di,Ei.millisecond=Ei.milliseconds=Oi,Ei.utcOffset=Pe,Ei.utc=ze,Ei.local=Ue,Ei.parseZone=We,Ei.hasAlignedHourOffset=He,Ei.isDST=Ge,Ei.isDSTShifted=$e,Ei.isLocal=qe,Ei.isUtcOffset=Je,Ei.isUtc=Ze,Ei.isUTC=Ze,Ei.zoneAbbr=Zt,Ei.zoneName=Kt,Ei.dates=te("dates accessor is deprecated. Use date instead.",bi),Ei.months=te("months accessor is deprecated. Use month instead",K),Ei.years=te("years accessor is deprecated. Use year instead",ui),Ei.zone=te("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Le);var Ti=Ei,Ri={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ai={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Vi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ii=y.prototype;Ii._calendar=Ri,Ii.calendar=en,Ii._longDateFormat=Ai,Ii.longDateFormat=tn,Ii._invalidDate="Invalid date",Ii.invalidDate=nn,Ii._ordinal="%d",Ii.ordinal=rn,Ii._ordinalParse=/\d{1,2}/,Ii.preparse=on,Ii.postformat=on,Ii._relativeTime=Vi,Ii.relativeTime=sn,Ii.pastFuture=an,Ii.set=hn,Ii.months=$,Ii._months=ii,Ii.monthsShort=q,Ii._monthsShort=ri,Ii.monthsParse=J,Ii.week=le,Ii._week=li,Ii.firstDayOfYear=fe,Ii.firstDayOfWeek=de,Ii.weekdays=Nt,Ii._weekdays=wi,Ii.weekdaysMin=Pt,Ii._weekdaysMin=xi,Ii.weekdaysShort=Ft,Ii._weekdaysShort=Mi,Ii.weekdaysParse=Lt,Ii.isPM=$t,Ii._meridiemParse=/[ap]\.?m?\.?/i,Ii.meridiem=qt,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=te("moment.lang is deprecated. Use moment.locale instead.",x),e.langData=te("moment.langData is deprecated. Use moment.localeData instead.",k);var Yi=Math.abs,ji=Dn("ms"),Bi=Dn("s"),Ni=Dn("m"),Fi=Dn("h"),Pi=Dn("d"),Li=Dn("w"),zi=Dn("M"),Ui=Dn("y"),Wi=On("milliseconds"),Hi=On("seconds"),Gi=On("minutes"),$i=On("hours"),qi=On("days"),Ji=On("months"),Zi=On("years"),Ki=Math.round,Xi={s:45,m:45,h:22,d:26,M:11},Qi=Math.abs,er=Ie.prototype;return er.abs=mn,er.add=_n,er.subtract=yn,er.as=Cn,er.asMilliseconds=ji,er.asSeconds=Bi,er.asMinutes=Ni,er.asHours=Fi,er.asDays=Pi,er.asWeeks=Li,er.asMonths=zi,er.asYears=Ui,er.valueOf=kn,er._bubble=wn,er.get=Sn,er.milliseconds=Wi,er.seconds=Hi,er.minutes=Gi,er.hours=$i,er.days=qi,er.weeks=En,er.months=Ji,er.years=Zi,er.humanize=Vn,er.toISOString=In,er.toString=In,er.toJSON=In,er.locale=_t,er.localeData=yt,er.toIsoString=te("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",In),er.lang=yi,I("X",0,0,"unix"),I("x",0,0,"valueOf"),P("x",/[+-]?\d+/),P("X",/[+-]?\d+(\.\d{1,3})?/),U("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),U("x",function(e,t,n){n._d=new Date(v(e))}),e.version="2.10.6",function(e){Yn=e}(Te),e.fn=Ti,e.min=Ae,e.max=Ve,e.utc=h,e.unix=Xt,e.months=ln,e.isDate=r,e.locale=x,e.invalid=d,e.duration=Ke,e.isMoment=g,e.weekdays=fn,e.parseZone=Qt,e.localeData=k,e.isDuration=Ye,e.monthsShort=dn,e.weekdaysMin=gn,e.defineLocale=C,e.weekdaysShort=pn,e.normalizeUnits=S,e.relativeTimeThreshold=An,e})},{}],48:[function(t,n,i){!function(r,o){"use strict";var s;if("object"==typeof i){try{s=t("moment")}catch(e){}n.exports=o(s)}else"function"==typeof e&&e.amd?e(function(e){try{s=e("moment")}catch(e){}return o(s)}):r.Pikaday=o(r.moment)}(this,function(e){"use strict";var t="function"==typeof e,n=!!window.addEventListener,i=window.document,r=window.setTimeout,o=function(e,t,i,r){n?e.addEventListener(t,i,!!r):e.attachEvent("on"+t,i)},s=function(e,t,i,r){n?e.removeEventListener(t,i,!!r):e.detachEvent("on"+t,i)},a=function(e,t,n){var r;i.createEvent?(r=i.createEvent("HTMLEvents"),r.initEvent(t,!0,!1),r=y(r,n),e.dispatchEvent(r)):i.createEventObject&&(r=i.createEventObject(),r=y(r,n),e.fireEvent("on"+t,r))},h=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},c=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},u=function(e,t){c(e,t)||(e.className=""===e.className?t:e.className+" "+t)},l=function(e,t){e.className=h((" "+e.className+" ").replace(" "+t+" "," "))},d=function(e){return/Array/.test(Object.prototype.toString.call(e))},f=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},p=function(e){var t=e.getDay();return 0===t||6===t},g=function(e){return e%4==0&&e%100!=0||e%400==0},m=function(e,t){return[31,g(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},v=function(e){f(e)&&e.setHours(0,0,0,0)},_=function(e,t){return e.getTime()===t.getTime()},y=function(e,t,n){var i,r;for(i in t)r=void 0!==e[i],r&&"object"==typeof t[i]&&null!==t[i]&&void 0===t[i].nodeName?f(t[i])?n&&(e[i]=new Date(t[i].getTime())):d(t[i])?n&&(e[i]=t[i].slice(0)):e[i]=y({},t[i],n):!n&&r||(e[i]=t[i]);return e},b=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},w={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},M=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},x=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},C=function(e,t,n){var i=new Date(n,0,1);return'<td class="pika-week">'+Math.ceil(((new Date(n,t,e)-i)/864e5+i.getDay()+1)/7)+"</td>"},k=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},D=function(e){return"<tbody>"+e.join("")+"</tbody>"},S=function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+M(e,t)+'">'+M(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"},O=function(e,t,n,i,r,o){var s,a,h,c,u,l=e._o,f=n===l.minYear,p=n===l.maxYear,g='<div id="'+o+'" class="pika-title" role="heading" aria-live="assertive">',m=!0,v=!0;for(h=[],s=0;s<12;s++)h.push('<option value="'+(n===r?s-t:12+s-t)+'"'+(s===i?' selected="selected"':"")+(f&&s<l.minMonth||p&&s>l.maxMonth?'disabled="disabled"':"")+">"+l.i18n.months[s]+"</option>");for(c='<div class="pika-label">'+l.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+h.join("")+"</select></div>",d(l.yearRange)?(s=l.yearRange[0],a=l.yearRange[1]+1):(s=n-l.yearRange,a=1+n+l.yearRange),h=[];s<a&&s<=l.maxYear;s++)s>=l.minYear&&h.push('<option value="'+s+'"'+(s===n?' selected="selected"':"")+">"+s+"</option>");return u='<div class="pika-label">'+n+l.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+h.join("")+"</select></div>",l.showMonthAfterYear?g+=u+c:g+=c+u,f&&(0===i||l.minMonth>=i)&&(m=!1),p&&(11===i||l.maxMonth<=i)&&(v=!1),0===t&&(g+='<button class="pika-prev'+(m?"":" is-disabled")+'" type="button">'+l.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(g+='<button class="pika-next'+(v?"":" is-disabled")+'" type="button">'+l.i18n.nextMonth+"</button>"),g+="</div>"},E=function(e,t,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+S(e)+D(t)+"</table>"},T=function(s){var a=this,h=a.config(s);a._onMouseDown=function(e){if(a._v){e=e||window.event;var t=e.target||e.srcElement;if(t)if(c(t,"is-disabled")||(!c(t,"pika-button")||c(t,"is-empty")||c(t.parentNode,"is-disabled")?c(t,"pika-prev")?a.prevMonth():c(t,"pika-next")&&a.nextMonth():(a.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),h.bound&&r(function(){a.hide(),h.field&&h.field.blur()},100))),c(t,"pika-select"))a._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},a._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;t&&(c(t,"pika-select-month")?a.gotoMonth(t.value):c(t,"pika-select-year")&&a.gotoYear(t.value))},a._onKeyChange=function(e){if(e=e||window.event,a.isVisible())switch(e.keyCode){case 13:case 27:h.field.blur();break;case 37:e.preventDefault(),a.adjustDate("subtract",1);break;case 38:a.adjustDate("subtract",7);break;case 39:a.adjustDate("add",1);break;case 40:a.adjustDate("add",7)}},a._onInputChange=function(n){var i;n.firedBy!==a&&(t?(i=e(h.field.value,h.format,h.formatStrict),i=i&&i.isValid()?i.toDate():null):i=new Date(Date.parse(h.field.value)),f(i)&&a.setDate(i),a._v||a.show())},a._onInputFocus=function(){a.show()},a._onInputClick=function(){a.show()},a._onInputBlur=function(){var e=i.activeElement;do{if(c(e,"pika-single"))return}while(e=e.parentNode);a._c||(a._b=r(function(){a.hide()},50)),a._c=!1},a._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,i=t;if(t){!n&&c(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),o(t,"change",a._onChange)));do{if(c(i,"pika-single")||i===h.trigger)return}while(i=i.parentNode);a._v&&t!==h.trigger&&i!==h.trigger&&a.hide()}},a.el=i.createElement("div"),a.el.className="pika-single"+(h.isRTL?" is-rtl":"")+(h.theme?" "+h.theme:""),o(a.el,"mousedown",a._onMouseDown,!0),o(a.el,"touchend",a._onMouseDown,!0),o(a.el,"change",a._onChange),o(i,"keydown",a._onKeyChange),h.field&&(h.container?h.container.appendChild(a.el):h.bound?i.body.appendChild(a.el):h.field.parentNode.insertBefore(a.el,h.field.nextSibling),o(h.field,"change",a._onInputChange),h.defaultDate||(t&&h.field.value?h.defaultDate=e(h.field.value,h.format).toDate():h.defaultDate=new Date(Date.parse(h.field.value)),h.setDefaultDate=!0));var u=h.defaultDate;f(u)?h.setDefaultDate?a.setDate(u,!0):a.gotoDate(u):a.gotoDate(new Date),h.bound?(this.hide(),a.el.className+=" is-bound",o(h.trigger,"click",a._onInputClick),o(h.trigger,"focus",a._onInputFocus),o(h.trigger,"blur",a._onInputBlur)):this.show()};return T.prototype={config:function(e){this._o||(this._o=y({},w,!0));var t=y(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,f(t.minDate)||(t.minDate=!1),f(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),d(t.yearRange)){var i=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||i,t.yearRange[1]=parseInt(t.yearRange[1],10)||i}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||w.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return f(this._d)?t?e(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,i){t&&e.isMoment(n)&&this.setDate(n.toDate(),i)},getDate:function(){return f(this._d)?new Date(this._d.getTime()):new Date},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",a(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),f(e)){var n=this._o.minDate,i=this._o.maxDate;f(n)&&e<n?e=n:f(i)&&e>i&&(e=i),this._d=new Date(e.getTime()),v(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),a(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(f(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=e.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),t=r<n.getTime()||i.getTime()<r}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,i){var r,o=this.getDate(),s=24*parseInt(i)*60*60*1e3;"add"===n?r=new Date(o.valueOf()+s):"subtract"===n&&(r=new Date(o.valueOf()-s)),t&&("add"===n?r=e(o).add(i,"days").toDate():"subtract"===n&&(r=e(o).subtract(i,"days").toDate())),this.setDate(r)},adjustCalendars:function(){this.calendars[0]=b(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=b({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(v(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=w.minDate,this._o.minYear=w.minYear,this._o.minMonth=w.minMonth,this._o.startRange=w.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(v(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=w.maxDate,this._o.maxYear=w.maxYear,this._o.maxMonth=w.maxMonth,this._o.endRange=w.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,i=n.minYear,o=n.maxYear,s=n.minMonth,a=n.maxMonth,h="";this._y<=i&&(this._y=i,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=o&&(this._y=o,!isNaN(a)&&this._m>a&&(this._m=a)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var c=0;c<n.numberOfMonths;c++)h+='<div class="pika-lendar">'+O(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year,t)+this.render(this.calendars[c].year,this.calendars[c].month,t)+"</div>";this.el.innerHTML=h,n.bound&&"hidden"!==n.field.type&&r(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var e,t,n,r,o,s,a,h,c,u;if(!this._o.container){if(this.el.style.position="absolute",e=this._o.trigger,t=e,n=this.el.offsetWidth,r=this.el.offsetHeight,o=window.innerWidth||i.documentElement.clientWidth,s=window.innerHeight||i.documentElement.clientHeight,a=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop,"function"==typeof e.getBoundingClientRect)u=e.getBoundingClientRect(),h=u.left+window.pageXOffset,c=u.bottom+window.pageYOffset;else for(h=t.offsetLeft,c=t.offsetTop+t.offsetHeight;t=t.offsetParent;)h+=t.offsetLeft,c+=t.offsetTop;(this._o.reposition&&h+n>o||this._o.position.indexOf("right")>-1&&h-n+e.offsetWidth>0)&&(h=h-n+e.offsetWidth),(this._o.reposition&&c+r>s+a||this._o.position.indexOf("top")>-1&&c-r-e.offsetHeight>0)&&(c=c-r-e.offsetHeight),this.el.style.left=h+"px",this.el.style.top=c+"px"}},render:function(e,t,n){var i=this._o,r=new Date,o=m(e,t),s=new Date(e,t,1).getDay(),a=[],h=[];v(r),i.firstDay>0&&(s-=i.firstDay)<0&&(s+=7);for(var c=0===t?11:t-1,u=11===t?0:t+1,l=0===t?e-1:e,d=11===t?e+1:e,g=m(l,c),y=o+s,b=y;b>7;)b-=7;y+=7-b;for(var w=0,M=0;w<y;w++){var D=new Date(e,t,w-s+1),S=!!f(this._d)&&_(D,this._d),O=_(D,r),T=w<s||w>=o+s,R=w-s+1,A=t,V=e,I=i.startRange&&_(i.startRange,D),Y=i.endRange&&_(i.endRange,D),j=i.startRange&&i.endRange&&i.startRange<D&&D<i.endRange,B=i.minDate&&D<i.minDate||i.maxDate&&D>i.maxDate||i.disableWeekends&&p(D)||i.disableDayFn&&i.disableDayFn(D);T&&(w<s?(R=g+R,A=c,V=l):(R-=o,A=u,V=d));var N={day:R,month:A,year:V,isSelected:S,isToday:O,isDisabled:B,isEmpty:T,isStartRange:I,isEndRange:Y,isInRange:j,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths};h.push(x(N)),7==++M&&(i.showWeekNumber&&h.unshift(C(w-s,t,e)),a.push(k(h,i.isRTL)),h=[],M=0)}return E(i,a,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(l(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(o(i,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;!1!==e&&(this._o.bound&&s(i,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",u(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),s(this.el,"mousedown",this._onMouseDown,!0),s(this.el,"touchend",this._onMouseDown,!0),s(this.el,"change",this._onChange),this._o.field&&(s(this._o.field,"change",this._onInputChange),this._o.bound&&(s(this._o.trigger,"click",this._onInputClick),s(this._o.trigger,"focus",this._onInputFocus),s(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},T})},{moment:47}],49:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?g=p.concat(g):v=-1,g.length&&h())}function h(){if(!m){var e=o(a);m=!0;for(var t=g.length;t;){for(p=g,g=[];++v<t;)p&&p[v].run();v=-1,t=g.length}p=null,m=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,d,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(e){l=i}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,g=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1)
;if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new c(e,t)),1!==g.length||m||o(h)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],50:[function(t,n,i){!function(t,i){"function"==typeof e&&e.amd?e([],function(){return t.svg4everybody=i()}):"object"==typeof n&&n.exports?n.exports=i():t.svg4everybody=i()}(this,function(){function e(e,t,n){if(n){var i=document.createDocumentFragment(),r=!t.hasAttribute("viewBox")&&n.getAttribute("viewBox");r&&t.setAttribute("viewBox",r);for(var o=n.cloneNode(!0);o.childNodes.length;)i.appendChild(o.firstChild);e.appendChild(i)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var n=t._cachedDocument;n||(n=t._cachedDocument=document.implementation.createHTMLDocument(""),n.body.innerHTML=t.responseText,t._cachedTarget={}),t._embeds.splice(0).map(function(i){var r=t._cachedTarget[i.id];r||(r=t._cachedTarget[i.id]=n.getElementById(i.id)),e(i.parent,i.svg,r)})}},t.onreadystatechange()}function n(n){function r(){for(var n=0;n<d.length;){var a=d[n],h=a.parentNode,c=i(h);if(c){var p=a.getAttribute("xlink:href")||a.getAttribute("href");if(!p&&s.attributeName&&(p=a.getAttribute(s.attributeName)),o)if(!s.validate||s.validate(p,c,a)){h.removeChild(a);var g=p.split("#"),m=g.shift(),v=g.join("#");if(m.length){var _=u[m];_||(_=u[m]=new XMLHttpRequest,_.open("GET",m),_.send(),_._embeds=[]),_._embeds.push({parent:h,svg:c,id:v}),t(_)}else e(h,c,document.getElementById(v))}else++n,++f}else++n}(!d.length||d.length-f>0)&&l(r,67)}var o,s=Object(n),a=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,h=/\bEdge\/.(\d+)\b/,c=window.top!==window.self;o="polyfill"in s?s.polyfill:a.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||h.test(navigator.userAgent)&&c;var u={},l=window.requestAnimationFrame||setTimeout,d=document.getElementsByTagName("use"),f=0;o&&r()}function i(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return n})},{}],51:[function(t,n,i){(void 0!==n&&function(e){n.exports=e()}||"function"==typeof e&&function(t){e("underscoreDeepExtend",t)}||function(e){window.underscoreDeepExtend=e()})(function(){return function(e){return function(t){var n,i=/#{\s*?_\s*?}/,r=function(t,n){return e.isUndefined(t)||e.isNull(t)||e.isFunction(t)||e.isNull(n)||e.isDate(n)},o=function(n,i,r){return t[r]=e.clone(i)},s=function(t,n){return e.isString(n)&&i.test(n)},a=function(n,r,o){return e.isString(n),t[o]=r.replace(i,n)},h=function(t,n){return e.isArray(t)||e.isArray(n)},c=function(n,i,r){if(!e.isArray(n)||!e.isArray(i))throw new Error("Trying to combine an array with a non-array ("+r+")");var o=e.deepExtend(t[r],i);return t[r]=e.reject(o,e.isNull)},u=function(t,n){return e.isObject(t)||e.isObject(n)},l=function(n,i,r){if(!e.isObject(n)||!e.isObject(i))throw new Error("Trying to combine an object with a non-object ("+r+")");return t[r]=e.deepExtend(n,i)},d=function(e){var i=t[e],d=n[e];r(i,d)?o(0,d,e):s(0,d)?a(i,d,e):h(i,d)?c(i,d,e):u(i,d)?l(i,d,e):t[e]=o(0,d,e)},f=function(e){n=e,Object.keys(n).forEach(d)};return e.each(Array.prototype.slice.call(arguments,1),f),t}}})},{}]},{},[13])(13)});
//# sourceMappingURL=core.js.map
